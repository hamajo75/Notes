<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-01-20 Sat 06:00 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Programming</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="shortcut icon" href="/public_html/favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/html-export.css"/>
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/css/hideshow.css"/>
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/css/code.css">

<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.stickytableheaders.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "0em",
        "HTML-CSS": {
             scale: 1.1,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div style = "text-align: right; margin-top: 5px">
   <a accesskey="h" href="" style="font: 20px arial,helvetica,clean,sans-serif"></a>
   <a accesskey="H" href="https://joesanmarzano.duckdns.org/public_html/" style="font: 20px arial,helvetica,clean,sans-serif;margin: 30px;"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Programming</h1>

<div id="outline-container-orgcdb4a0c" class="outline-2">
<h2 id="orgcdb4a0c">Links</h2>
<div class="outline-text-2" id="text-orgcdb4a0c">
<ul class="org-ul">
<li>Many Tutorials: <a href="https://www.w3schools.com/">https://www.w3schools.com/</a></li>
</ul>
</div>
<div id="outline-container-orgf83de4a" class="outline-3">
<h3 id="orgf83de4a">C++</h3>
<div class="outline-text-3" id="text-orgf83de4a">
<ul class="org-ul">
<li>Online Compiler: <a href="https://www.tutorialspoint.com/compile_cpp_online.php">https://www.tutorialspoint.com/compile_cpp_online.php</a></li>
<li>Compiler Explorer (see ASM-Code): <a href="https://godbolt.org/">https://godbolt.org/</a></li>
<li>Language Reference C++: <a href="https://en.cppreference.com/w/">https://en.cppreference.com/w/</a></li>
<li>Core Guidelines: <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines</a></li>
<li>Tutorial: <a href="https://www.learncpp.com/">https://www.learncpp.com/</a></li>
<li><a href="#org2b152f6">GNU Linker</a>: <a href="https://sourceware.org/binutils/docs/ld/index.html#SEC_Contents">https://sourceware.org/binutils/docs/ld/index.html#SEC_Contents</a></li>
</ul>
</div>
</div>
<div id="outline-container-org3bfdd9e" class="outline-3">
<h3 id="org3bfdd9e">JavaScript</h3>
<div class="outline-text-3" id="text-org3bfdd9e">
<ul class="org-ul">
<li>Online IDE: <a href="https://jsfiddle.net/">https://jsfiddle.net/</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1b81d7c" class="outline-2">
<h2 id="org1b81d7c">Assembler</h2>
<div class="outline-text-2" id="text-org1b81d7c">
<p>
Typically there are 3 categories of commands:
</p>
<ul class="org-ul">
<li>memory access</li>
<li>arithmetic</li>
<li>control program flow (jumps, conditions)</li>
</ul>
</div>

<div id="outline-container-orgca6d180" class="outline-3">
<h3 id="orgca6d180">Examples</h3>
<div class="outline-text-3" id="text-orgca6d180">
<p>
Euclidean Algorithm:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-type">int</span> <span class="org-function-name">gcd</span>(<span class="org-type">int</span> <span class="org-variable-name">a</span>, <span class="org-type">int</span> <span class="org-variable-name">b</span>) {
  <span class="org-keyword">while</span> (a != b)  <span class="org-comment-delimiter">// </span><span class="org-comment">We enter the loop when a&lt;b or a&gt;b, not when i==j</span>
    <span class="org-keyword">if</span> (a &gt; b)    <span class="org-comment-delimiter">// </span><span class="org-comment">When a&gt;b we do this</span>
      a -= b;
    <span class="org-keyword">else</span>          <span class="org-comment-delimiter">// </span><span class="org-comment">When a&lt;b we do that (no if(i&lt;j) needed since i!=j is checked in while condition)</span>
      b -= a;
  <span class="org-keyword">return</span> a;
}
</pre>
</div>
<p>
transforms to
</p>
<div class="org-src-container">
<pre class="src src-asm"><span class="org-comment-delimiter">; </span><span class="org-comment">assign a to register r0, b to r1</span>
<span class="org-function-name">loop</span>:   <span class="org-keyword">CMP</span>    r0, r1       <span class="org-comment-delimiter">; </span><span class="org-comment">set condition "NE" if (a != b),</span>
                            <span class="org-comment-delimiter">;               </span><span class="org-comment">"GT" if (a &gt; b),</span>
                            <span class="org-comment-delimiter">;            </span><span class="org-comment">or "LT" if (a &lt; b)</span>
        <span class="org-keyword">SUBGT</span>  r0, r0, r1   <span class="org-comment-delimiter">; </span><span class="org-comment">if "GT" (Greater Than), a = a-b;</span>
        <span class="org-keyword">SUBLT</span>  r1, r1, r0   <span class="org-comment-delimiter">; </span><span class="org-comment">if "LT" (Less Than), b = b-a;</span>
        <span class="org-keyword">BNE</span>  loop           <span class="org-comment-delimiter">; </span><span class="org-comment">if "NE" (Not Equal), then loop</span>
        <span class="org-keyword">B</span>    lr             <span class="org-comment-delimiter">; </span><span class="org-comment">if the loop is not entered, we can safely return</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6572ef7" class="outline-2">
<h2 id="org6572ef7">C and C++</h2>
<div class="outline-text-2" id="text-org6572ef7">
</div>
<div id="outline-container-orgfb0340f" class="outline-3">
<h3 id="orgfb0340f">Advanced Topics</h3>
<div class="outline-text-3" id="text-orgfb0340f">
</div>
<div id="outline-container-org16f1f0f" class="outline-4">
<h4 id="org16f1f0f">Shallow vs. deep copy</h4>
<div class="outline-text-4" id="text-org16f1f0f">
<dl class="org-dl">
<dt>shallow copy</dt><dd>member wise copy of an object</dd>
</dl>

<p>
That can cause trouble when a class handles dynamically allocated memory.
Copying a pointer just creates a new pointer pointing to the same object.
But you might want a copy of the object pointed to also.
</p>
</div>
</div>
<div id="outline-container-orgdde4702" class="outline-4">
<h4 id="orgdde4702">lvalues and rvalues</h4>
<div class="outline-text-4" id="text-orgdde4702">
<p>
Expressions in C++:
</p>
<ul class="org-ul">
<li>Primary Expressions: <code>"hello"</code>, operands of operators, literals, variable names etc.</li>
<li>Constant Expressions: <code>x = 15</code></li>
<li>Integral Expressions: <code>a + b</code></li>
<li>Float Expressions: <code>x = 8.9</code></li>
<li>Pointer Expressions: <code>&amp;x</code>, <code>ptr++</code></li>
<li>Relational Expressions: <code>a &gt; b</code></li>
<li>Logical Expressions: <code>a &gt; b &amp;&amp; b &gt; c</code></li>
<li>Bitwise Expressions: <code>0x01 &lt;&lt; 2</code></li>
</ul>

<p>
Those expressions have values (they evaluate to a value).
</p>

<p>
Value categories  <a href="https://en.cppreference.com/w/cpp/language/value_category">cppreference</a>
</p>

<div class="picture" id="org7bbcecb">

<div id="org2b069d1" class="figure">
<p><img src="resources/C++ Value Categories.PNG" alt="C++ Value Categories.PNG" />
</p>
</div>

</div>

<p>
What do the letters mean?
</p>
<ul class="org-ul">
<li>"l", "r" originally from left and right of the <code>=</code> operator</li>
<li>"p" pure</li>
<li>"x" expire</li>
<li>"g" generalized</li>
</ul>

<p>
Primary categories: prvalue (pure), lvalue
</p>

<p>
Originally: Values right and left of the assignment operator.
You can also think of an lvalue as a locator value (as a mnemonic).
</p>
<hr />
<p>
<b>Examples</b>
</p>
<ul class="org-ul">
<li>rvalue:
<ul class="org-ul">
<li>Literals: <code>10</code> (prvalue)</li>
<li>temporary objects: <code>a++</code>, <code>a &lt; b</code>, <code>a + 1</code>, <code>firstName + lastName</code> (prvalue)</li>
<li>not possible: <code>10 = x</code> (you cannot assign a value to an rvalue)</li>
<li>Function Calls: <code>GetValue()</code></li>
<li>Temporary Objects: <code>MyClass{1000}</code></li>
<li>Lambda expressions: <code>[](int x){ return x * x; }</code></li>
<li><code>this</code> pointer</li>
<li><code>enums</code> values</li>
</ul></li>

<li>lvalue:
<ul class="org-ul">
<li><code>i = 10</code></li>
<li><code>++a</code>, <code>a = b</code>,</li>
<li>string literals <code>"Hello"</code></li>
</ul></li>
<li>expiring value or xvalue: (temporary)</li>
</ul>

<p>
Notes:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">print</span>(<span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>){}          <span class="org-comment-delimiter">// </span><span class="org-comment">std::string&amp; is an lvalue-reference</span>
<span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">first</span> = <span class="org-string">"Hello "</span>;
<span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">second</span> = <span class="org-string">"Joe"</span>;
print(first + last);                     <span class="org-comment-delimiter">// </span><span class="org-comment">this doesn't compile because "first + last" is an rvalue</span>
<span class="org-type">void</span> <span class="org-function-name">print</span>(<span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>){}    <span class="org-comment-delimiter">// </span><span class="org-comment">like this it works</span>
</pre>
</div>

<p>
<b>Simple picture</b>
</p>
<ul class="org-ul">
<li>Every expression is either a rvalue or a lvalue (or an xvalue).</li>
<li>A <i>lvalue</i> is an expression that represents an object in memory
(something that has an address), typically a function or an object.</li>
<li>A <i>rvalue</i> is an expression that does not represent an object in memory.
It might represent a temporary result in a register (or wherever).
E.g. literals, anonymous objects (String("")).</li>

<li>It doesn't make sense to assign a value to an rvalue.</li>
</ul>

<p>
Compile error examples:
</p>
<div class="org-src-container">
<pre class="src src-cpp">foo() = 2;       <span class="org-comment-delimiter">//</span><span class="org-comment">-&gt; lvalue required</span>
4 = var;         <span class="org-comment-delimiter">// </span><span class="org-comment">4 is not an lvalue</span>
(var + 1) = 4;   <span class="org-comment-delimiter">// </span><span class="org-comment">var + 1 is not an lvalue</span>
<span class="org-type">int</span>&amp; <span class="org-function-name">foo</span>()
{
   <span class="org-keyword">return</span> 2;     <span class="org-comment-delimiter">//</span><span class="org-comment">-&gt; invalid initialization of non-const reference</span>
                 <span class="org-comment-delimiter">//   </span><span class="org-comment">of type 'int&amp;' from an rvalue of type 'int'</span>
}
</pre>
</div>
<p>
This however is possible!
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">globalvar</span> = 20;

<span class="org-type">int</span>&amp; <span class="org-function-name">foo</span>()
{
    <span class="org-keyword">return</span> globalvar;   <span class="org-comment-delimiter">// </span><span class="org-comment">this is an lvalue</span>
}

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    foo() = 10;
    <span class="org-keyword">return</span> 0;
}

<span class="org-comment-delimiter">// </span><span class="org-comment">this works because of the above</span>
<span class="org-constant">std</span>::<span class="org-type">map</span>&lt;<span class="org-type">int</span>, <span class="org-type">float</span>&gt; <span class="org-variable-name">mymap</span>;
mymap[10] = 5.6;             <span class="org-comment-delimiter">//</span><span class="org-comment">[] returns a reference that can be assigned to</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org31cad89" class="outline-4">
<h4 id="org31cad89">Rvalue references</h4>
<div class="outline-text-4" id="text-org31cad89">
<p>
Examples of Rvalues:
</p>
<ul class="org-ul">
<li><code>int x = 1;</code> <code>1</code> is an Rvalue (<code>1 = x;</code> doesn't make sense, neither <code>&amp;1</code>)</li>
<li><code>setValue() = 3;</code> if <code>setValue</code> returns an integer but works if it returns <code>int&amp;</code>.</li>
</ul>

<p>
Rule of thumb:
</p>
<ul class="org-ul">
<li>Lvalues have an address, Rvalues don't.</li>
</ul>

<p>
A literal like <code>1</code> is usually not stored in memory but in a register.
</p>


<p>
RValue references were introduced in C++ 11 to solve two problems:
</p>

<ol class="org-ol">
<li>Move semantics</li>
<li>Perfect forwarding</li>
</ol>

<p>
Syntax looks like this:  <code>int&amp;&amp; rvalueRef;</code>
</p>

<ul class="org-ul">
<li>R-value references extend the lifetime of a (temporary) object to the lifetime of the reference.</li>
<li>Non const R-values allow for modification of an r-value.</li>
</ul>

<p>
With rvalue references a distinction is possible for the compiler that was not possible before:
</p>

<p>
Online IDE:  <a href="http://tpcg.io/SE6FCA" target="_blank">Function overloading with two types of references</a>
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;iostream&gt;</span>

<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">we can distinguish between this 2 functions now:</span>
<span class="org-type">void</span> <span class="org-function-name">fun</span>(<span class="org-keyword">const</span> <span class="org-type">int</span>&amp; <span class="org-variable-name">val</span>)
{
    cout &lt;&lt; <span class="org-string">"int&amp; val: "</span> &lt;&lt; val &lt;&lt; <span class="org-string">"\n"</span>;
}

<span class="org-type">void</span> <span class="org-function-name">fun</span>(<span class="org-keyword">const</span> <span class="org-type">int</span>&amp;&amp; <span class="org-variable-name">val</span>)
{
    cout &lt;&lt; <span class="org-string">"int&amp;&amp; val: "</span> &lt;&lt; val &lt;&lt; <span class="org-string">"\n"</span>;
}

<span class="org-type">int</span> <span class="org-function-name">moreFun</span>()
{
    <span class="org-type">int</span> <span class="org-variable-name">a</span> = 1;
    <span class="org-keyword">return</span> a;
}

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    <span class="org-comment-delimiter">// </span><span class="org-comment">calls the int&amp;&amp; version</span>
    fun(moreFun());
    fun(2);

    <span class="org-comment-delimiter">// </span><span class="org-comment">calls the int&amp; version</span>
    <span class="org-type">int</span> <span class="org-variable-name">x</span>;
    fun(x = 3);

    <span class="org-type">int</span>&amp;&amp; <span class="org-variable-name">ref</span> = moreFun();
    cout &lt;&lt; <span class="org-string">"this is a reference: "</span> &lt;&lt; ref &lt;&lt; <span class="org-string">"\n"</span>;
    cout &lt;&lt; <span class="org-string">"extending the lifetime of the temp object\n"</span>;

    <span class="org-type">int</span> <span class="org-variable-name">ret</span> = moreFun();
    cout &lt;&lt; <span class="org-string">"whereas this is a copy: "</span> &lt;&lt; ret;

    <span class="org-comment-delimiter">/*</span>
<span class="org-comment">    comment out int&amp;&amp; and all calls go to int&amp; version</span>
<span class="org-comment-delimiter">    */</span>

    <span class="org-type">int</span>&amp;&amp; <span class="org-variable-name">reff</span> = 5;
    reff++;             <span class="org-comment-delimiter">// </span><span class="org-comment">can be modified!</span>

   <span class="org-keyword">return</span> 0;
}
</pre>
</div>

<p>
Output:
</p>
<pre class="example" id="org2281b38">
int&amp;&amp; val: 1
int&amp;&amp; val: 2
int&amp; val: 3
this is a reference: 1
extending the lifetime of the temp object
whereas this is a copy: 1
</pre>

<p>
So now we need to understand how this distinction helps to solve the above problems.
</p>

<p>
<i>Rvalue references</i> are needed for move constructor and move assignment operator.
</p>
</div>
</div>

<div id="outline-container-orgf073159" class="outline-4">
<h4 id="orgf073159">Move semantics (C++11)</h4>
<div class="outline-text-4" id="text-orgf073159">
<p>
Move the ownership of an object from reference A to reference B.
</p>

<p>
If you have a pointer p1 pointing to an
object o and then you do <code>p2 = std::move(p1);</code> you don't get two pointers pointing to the
same object but p2 pointing to o and p1 pointing to <code>nullptr</code>. The purpose is to avoid multiple pointers pointing to the same object.
</p>

<p>
With the implementation of move semantics in C++11 we can move the ownership of data from a temporary object to a destination object.
</p>

<p>
Let's play around with <code>std::move()</code>
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-constant">std</span>::<span class="org-type">vector</span>&lt;<span class="org-type">int</span>&gt; <span class="org-variable-name">v1</span> = {1, 2, 3, 4};
<span class="org-constant">std</span>::<span class="org-type">vector</span>&lt;<span class="org-type">int</span>&gt; <span class="org-variable-name">v2</span> = {5, 6, 7, 8};

v2 = <span class="org-constant">std</span>::move(v1);        <span class="org-comment-delimiter">// </span><span class="org-comment">now v1 will be empty</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">v3</span> = <span class="org-constant">std</span>::move(v2);   <span class="org-comment-delimiter">// </span><span class="org-comment">now v2 will be empty</span>
</pre>
</div>

<p>
When a function returns an object it does so by value. In this case a copy of the object is created because the
original object goes out of scope when leaving the function.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">MyClass</span> <span class="org-function-name">myFun</span>();
<span class="org-type">MyClass</span> <span class="org-variable-name">x</span>;
x = myFun();   <span class="org-comment-delimiter">// </span><span class="org-comment">the function call is an rvalue, you can't do myFun() = 1;</span>
</pre>
</div>

<p>
If the object is big we would rather like to move the underlying object instead of copying it.
</p>

<p>
To achieve this we need a special implementation of the assignment operator:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">MyClass</span> <span class="org-function-name">moveFun</span>();
<span class="org-type">MyClass</span>&amp; <span class="org-constant">MyClass</span>::<span class="org-keyword">operator</span>=(<span class="org-keyword">const</span> <span class="org-type">MyClass</span>&amp; other)   <span class="org-comment-delimiter">// </span><span class="org-comment">A normal assignment operator with lvalue reference</span>
<span class="org-type">MyClass</span>&amp; <span class="org-constant">MyClass</span>::<span class="org-keyword">operator</span>=(<span class="org-type">MyClass</span>&amp;&amp; other)        <span class="org-comment-delimiter">// </span><span class="org-comment">B move assignment operator with rvalue reference</span>

<span class="org-type">MyClass</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>;

x = y;          <span class="org-comment-delimiter">// </span><span class="org-comment">A normal assignment (lvalue)</span>
x = moveFun();  <span class="org-comment-delimiter">// </span><span class="org-comment">B move assignement (rvalue)</span>
</pre>
</div>

<p>
The compiler can now choose between the two versions, depending on whether the argument is an rvalue or
an lvalue.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">MyClass</span>&amp; <span class="org-function-name">moreFun</span>();
<span class="org-type">void</span> <span class="org-function-name">fun</span>(<span class="org-type">MyClass</span>&amp; <span class="org-variable-name">obj</span>);      <span class="org-comment-delimiter">// </span><span class="org-comment">A</span>
<span class="org-type">void</span> <span class="org-function-name">fun</span>(<span class="org-type">MyClass</span>&amp;&amp; <span class="org-variable-name">obj</span>);     <span class="org-comment-delimiter">// </span><span class="org-comment">B</span>

fun(x);          <span class="org-comment-delimiter">// </span><span class="org-comment">-&gt; A</span>
fun(MoreFun());  <span class="org-comment-delimiter">// </span><span class="org-comment">-&gt; B</span>
</pre>
</div>

<p>
Save all the constructing and deconstructing, just swap the pointer.
</p>

<p>
continue here: <a href="https://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/">https://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/</a>
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Resource handlers (resource owning types) that can be moved (<code>std::move</code>) but not copied:
<ul class="org-ul">
<li><code>std::ifstream</code>, <code>std::unique_ptr</code>, <code>std::thread</code></li>
</ul></li>
</ul>
</div>

<div id="outline-container-org9f2f010" class="outline-5">
<h5 id="org9f2f010">Move constructor, move assignment operator</h5>
<div class="outline-text-5" id="text-org9f2f010">
<p>
Move ownership of a resource from object A to object B (instead of making a copy like with the copy constructor
/ assignment operator).
</p>

<p>
Copy and copy assignment operator looks like this:
</p>
<pre class="example">
MyClass::MyClass(const MyClass&amp; other)              // normal copy constructor
MyClass&amp; MyClass::operator=(const MyClass&amp; other)   // normal assignment operator
</pre>


<p>
Now the const goes away allowing us to modify the reference.
</p>

<p>
Note: The automatically created functions create copies, they don't move!
</p>
</div>
</div>
</div>

<div id="outline-container-org4925e7a" class="outline-4">
<h4 id="org4925e7a">Return Value Optimization (RVO, NRVO)</h4>
<div class="outline-text-4" id="text-org4925e7a">
<p>
Also called <i>copy elision</i>.
Optimization done by the compiler to avoid calling the copy constructor when a local
object is returned by a function. This can be achieved by putting the data of the object
in the stack frame of the calling function instead of the called function (where it
would be normally located).
</p>
</div>
</div>
<div id="outline-container-org65258f9" class="outline-4">
<h4 id="org65258f9">Most vexing parse</h4>
<div class="outline-text-4" id="text-org65258f9">
<p>
The expression "most vexing parse" comes from Scott Meyers Effective STL.
</p>

<p>
The compiler cannot distinguish between the creation of an object and the specification of a function.
In case of doubt the compiler is required to interpret the line as function declaration.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">TimeKeeper</span> <span class="org-function-name">time_keeper</span>(<span class="org-type">Timer</span>());
<span class="org-comment-delimiter">// </span><span class="org-comment">This can be either</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">1. a variable definition for an object of Type TimeKeeper, initialized with an anonymous instance of class Timer.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">2. a function declaration: function time_keeper() returning a TimeKeeper object and taking a Timer() parameter.</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3a5e559" class="outline-4">
<h4 id="org3a5e559">Generators</h4>
<div class="outline-text-4" id="text-org3a5e559">
<p>
Return values whenever they are called, possibly forever.
</p>
</div>
</div>

<div id="outline-container-org24dbe9a" class="outline-4">
<h4 id="org24dbe9a">C++ 11 and after</h4>
<div class="outline-text-4" id="text-org24dbe9a">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">C++ 11</th>
<th scope="col" class="org-left">C++14</th>
<th scope="col" class="org-left">C++17</th>
<th scope="col" class="org-left">C++20</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">smart pointers</td>
<td class="org-left">override</td>
<td class="org-left">inline variables</td>
<td class="org-left">coroutines</td>
</tr>

<tr>
<td class="org-left">auto</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>[[maybe_unused]]</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">rvalue references</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">lambdas</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">nullptr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">constexpr</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">std::chrono</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">std::async</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">concurrency</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">thread safe static</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>


<div id="outline-container-org96e432b" class="outline-5">
<h5 id="org96e432b">C++ 11</h5>
</div>
<div id="outline-container-org5947f93" class="outline-5">
<h5 id="org5947f93">C++ 14</h5>
</div>
<div id="outline-container-orgff1de71" class="outline-5">
<h5 id="orgff1de71">C++ 17</h5>
<div class="outline-text-5" id="text-orgff1de71">
</div>
<div id="outline-container-orgd2e6f14" class="outline-6">
<h6 id="orgd2e6f14">Inline Variables</h6>
<div class="outline-text-6" id="text-orgd2e6f14">
<pre class="example">
inline static const std::string WORKPLACE_ID ="bea6d293-4009-4855-8def-2e591360444d";
</pre>


<p>
What is this good for?
</p>

<p>
If you wanted to initialize a const static member variable in the past, you had to do this:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">S</span> {
  <span class="org-keyword">const</span> <span class="org-keyword">static</span> <span class="org-constant">std</span>::string PATH;
};

<span class="org-comment-delimiter">// </span><span class="org-comment">here (e.g. another file) it's initialized and stored</span>
<span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-constant">S</span>::<span class="org-variable-name">PATH</span> = <span class="org-string">"../../myPath/"</span>;
</pre>
</div>

<p>
With inline variables we don't even have to instantiate the class.
There is a certain cost for this, because static initialization since C++17 has to be
thread safe.
</p>

<p>
See: <a href="https://www.youtube.com/watch?v=m7hwL0gHuP4">https://www.youtube.com/watch?v=m7hwL0gHuP4</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org2c1e3e8" class="outline-5">
<h5 id="org2c1e3e8">C++ 20</h5>
<div class="outline-text-5" id="text-org2c1e3e8">
</div>
<div id="outline-container-orga88b2b4" class="outline-6">
<h6 id="orga88b2b4">Coroutines</h6>
<div class="outline-text-6" id="text-orga88b2b4">
<p>
Functions that can be suspended and resumed.
Keywords: <code>co_await</code>, <code>co_yield</code>, <code>co_return</code>.
</p>

<p>
With <code>co_yield</code> you can return a generator. Or in other words a coroutine
immediatly returns but saves it's state. When it is called a second time
it will continue with that state.
</p>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org2411e7d" class="outline-3">
<h3 id="org2411e7d">Bit Fiddling</h3>
<div class="outline-text-3" id="text-org2411e7d">
<pre class="example">
bit twiddling, bit manipulations
</pre>

<ul class="org-ul">
<li><a href="https://graphics.stanford.edu/~seander/bithacks.html">https://graphics.stanford.edu/~seander/bithacks.html</a></li>
<li><a href="http://realtimecollisiondetection.net/blog/?p=78">http://realtimecollisiondetection.net/blog/?p=78</a></li>
</ul>

<p>
Note that the smallest unit of data is a byte.
</p>

<ul class="org-ul">
<li><p>
Elementary operations: set, clear, check, flip bits
</p>
<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">set bits    |=</span>
var |= 0x08;              <span class="org-comment-delimiter">// </span><span class="org-comment">turn on bit 1000</span>
var |= 1 &lt;&lt; 3;            <span class="org-comment-delimiter">// </span><span class="org-comment">i.e. the 3rd bit from the right</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">(xxxxxxxx OR 00001000 = xxxx1xxx)</span>
var |= (0x10 | 0x01);     <span class="org-comment-delimiter">// </span><span class="org-comment">turn on multiple bits</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">(xxxxxxxx OR 00010000 OR 00000001 = xxx1xxx1)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">clear bits   &amp;=~</span>
var &amp;= ~(1 &lt;&lt; n);
<span class="org-comment-delimiter">// </span><span class="org-comment">(xx1xxxxx AND 11011111 = xx0xxxxx)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">check bits   &amp;</span>
var &amp; (1 &lt;&lt; n)            <span class="org-comment-delimiter">// </span><span class="org-comment">check if n-th bit is set</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">(xx1xxxxx AND 00100000 = 00100000 which is true)</span>
var &amp; 4 == 0              <span class="org-comment-delimiter">// </span><span class="org-comment">check if 3ed bit (100) is not set</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">(xxxxx1xx AND 00000100 = 00000100)</span>
var &amp; (0x80 | 0x01)       <span class="org-comment-delimiter">// </span><span class="org-comment">check for multiple bits</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">(xxxxxxxx AND (10000000 OR 00000001) = 1xxxxxx1 AND 10000001 = 1xxxxxx1)</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">flip bits   ^=</span>
var ^= (0x80 | 0x01);
<span class="org-comment-delimiter">// </span><span class="org-comment">1xxxxxx0 XOR (10000000 OR 00000001) = 1xxxxxx0 XOR 10000001 = 0xxxxxx1</span>

</pre>
</div></li>
<li><p>
Only pointer casts leave the data in memory as is.
</p>

<p>
Compare float bitwise:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">float32</span> *<span class="org-variable-name">fp</span> = &amp;value;
<span class="org-type">uint32</span> <span class="org-variable-name">v</span> = *((<span class="org-type">uint32</span> *)fp);

<span class="org-keyword">if</span> (v == 0x7f800000)
   <span class="org-keyword">return</span> <span class="org-constant">true</span>;
</pre>
</div></li>
</ul>
</div>

<div id="outline-container-orgbc1b617" class="outline-4">
<h4 id="orgbc1b617">Bit Flags, Masks</h4>
<div class="outline-text-4" id="text-orgbc1b617">
<ul class="org-ul">
<li>Bit flags: values for individual bits, e.g. const unsigned char option1 = 0x01;
typically set like: option1 | option2 | option3</li>
<li><p>
Bundle bits together: Bit mask
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">const</span> <span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">lowMask</span> = 0x0F;
num &amp;= lowMask; <span class="org-comment-delimiter">// </span><span class="org-comment">mask out higher bits</span>
</pre>
</div></li>
<li>std::bitset&lt;8&gt; bits;</li>
</ul>
</div>
</div>

<div id="outline-container-orgeced604" class="outline-4">
<h4 id="orgeced604">Bit Manipulations</h4>
<div class="outline-text-4" id="text-orgeced604">
</div>
<div id="outline-container-orgd875488" class="outline-5">
<h5 id="orgd875488">Clear least significant bit set</h5>
<div class="outline-text-5" id="text-orgd875488">
<pre class="example">
num &amp; (num-1)
</pre>


<p>
How does it work?
Either the LSB is the \(2^0\) - bit or all lower bits flip.
</p>

<p>
Examples:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">num</th>
<th scope="col" class="org-right">num &amp;(num-1)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">111000 &amp; 110111</td>
<td class="org-right">110000</td>
</tr>

<tr>
<td class="org-left">10001  &amp; 10000</td>
<td class="org-right">10000</td>
</tr>
</tbody>
</table>

<p>
The general pattern:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#x2026;0</td>
<td class="org-left">&#x2026;10</td>
<td class="org-left">&#x2026;100</td>
</tr>

<tr>
<td class="org-left">&#x2026;1</td>
<td class="org-left">&#x2026;01</td>
<td class="org-left">&#x2026;011</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org201d899" class="outline-4">
<h4 id="org201d899">Modulo-Arithmetic</h4>
<div class="outline-text-4" id="text-org201d899">
<p>
Modulo arithmetic can be implemented for numbers up to \(2^n\) (n bits) with a bitwise
AND operation.
</p>

<p>
Let's see a simple example with 2 bits: <code>x &amp; 0x03</code> gives a sequence: 0 1 2 3 0 1 2 &#x2026;
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">00 &amp; 11 = 00</td>
</tr>

<tr>
<td class="org-left">01 &amp; 11 = 01</td>
</tr>

<tr>
<td class="org-left">10 &amp; 11 = 10</td>
</tr>

<tr>
<td class="org-left">11 &amp; 11 = 11</td>
</tr>

<tr>
<td class="org-left">100 &amp; 11 = 00</td>
</tr>

<tr>
<td class="org-left">101 &amp; 11 = 01</td>
</tr>

<tr>
<td class="org-left">110 &amp; 11 = 10</td>
</tr>
</tbody>
</table>

<p>
So <code>x mod n</code> can be done with <code>x &amp; (n-1)</code>.
</p>
</div>
</div>

<div id="outline-container-org48b4e94" class="outline-4">
<h4 id="org48b4e94">Counting bits etc.</h4>
<div class="outline-text-4" id="text-org48b4e94">
</div>
<div id="outline-container-orgb5525e7" class="outline-5">
<h5 id="orgb5525e7">Calculate parity</h5>
<div class="outline-text-5" id="text-orgb5525e7">
<dl class="org-dl">
<dt>O(log(n))</dt><dd>Have to go through the loop log(n) (nr. of bits) times.</dd>
</dl>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">v</span>;       <span class="org-comment-delimiter">// </span><span class="org-comment">word value to compute the parity of</span>
<span class="org-type">bool</span> <span class="org-variable-name">parity</span> = <span class="org-constant">false</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">parity will be the parity of v</span>

<span class="org-keyword">while</span> (v)
{
  parity = <span class="org-negation-char">!</span>parity;
  v = v &amp; (v - 1);    <span class="org-comment-delimiter">// </span><span class="org-comment">clear the least significant bit</span>
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge3c1fa6" class="outline-5">
<h5 id="orge3c1fa6">Counting bits set</h5>
<div class="outline-text-5" id="text-orge3c1fa6">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">v</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">count the number of bits set in v</span>
<span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">c</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">c accumulates the total bits set in v</span>
<span class="org-keyword">for</span> (c = 0; v; c++)
{
  v &amp;= v - 1; <span class="org-comment-delimiter">// </span><span class="org-comment">clear the least significant bit set</span>
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc45c46d" class="outline-3">
<h3 id="orgc45c46d">C/C++ Differences</h3>
<div class="outline-text-3" id="text-orgc45c46d">
<p>
Those differences might be compiler dependent.
</p>

<ul class="org-ul">
<li>no reference parameters: doesnt_work(int &amp;a)</li>
<li>variable declarations at beginning of function</li>
<li>no boolean type</li>
<li>void myFun(void)</li>
</ul>
</div>
<div id="outline-container-orgcaee58a" class="outline-4">
<h4 id="orgcaee58a">Differences regarding keyword <code>const</code></h4>
<div class="outline-text-4" id="text-orgcaee58a">
<!-- This HTML table template is generated by emacs 29.1 -->
<table border="1">
  <tr>
    <td align="left" valign="top">
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;C++&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
		&nbsp;Linkage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;external&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;internal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
		&nbsp;Initialization&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;optional&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;mandatory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
		&nbsp;Use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;restricted&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;(e.g.&nbsp;not&nbsp;allowed&nbsp;as&nbsp;size&nbsp;in&nbsp;array&nbsp;decl.)&nbsp;
    </td>
    <td align="left" valign="top">
		&nbsp;everywhere&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;(like&nbsp;a&nbsp;define)&nbsp;
    </td>
  </tr>
</table>

<p>
In C <code>const</code> doesn't mean something is constant in C, only that the variable is read only. So it's not
like a literal and cannot be use like one. In most cases it doesn't compile.
</p>
<div class="org-src-container">
<pre class="src src-c">
<span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">v</span> = 10;
<span class="org-type">int</span> <span class="org-variable-name">a</span>[v] = {0};                     <span class="org-comment-delimiter">// </span><span class="org-comment">C - NOT OK  / C++ - OK</span>

<span class="org-type">int</span>* <span class="org-variable-name">p</span> = &amp;v;
*p = 20;                            <span class="org-comment-delimiter">// </span><span class="org-comment">C - OK  / C++ - NOT OK</span>

<span class="org-keyword">static</span> <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">var</span> = 666;
<span class="org-keyword">static</span> <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">var2</span> = var * 2;    <span class="org-comment-delimiter">// </span><span class="org-comment">C - NOT OK  / C++ - OK</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org34bd3d5" class="outline-4">
<h4 id="org34bd3d5">Object oriented programming in C</h4>
<div class="outline-text-4" id="text-org34bd3d5">
<p>
<a href="http://ooc-coding.sourceforge.net/docs/ooc.html/index.html#SEC_Contents">Object Oriented C toolkit</a>
</p>

<p>
<b>How to do class instantiation?</b>
</p>

<p>
Use a struct to hold the individual object data and pass it to functions with a
pointer (this-pointer). The struct plus the functions define the class. The same
functions are used for all the objects, the differences are stored in the struct
variables.
</p>

<p>
<b>How to do inheritance?</b>
</p>

<p>
<b>How to do polymorphism?</b>
</p>

<p>
vtable
</p>

<p>
Person.h
</p>
<div class="org-src-container">
<pre class="src src-c">
<span class="org-comment-delimiter">//</span><span class="org-comment">declaration of pointers to functions</span>
<span class="org-keyword">typedef</span> <span class="org-type">void</span>    (*<span class="org-type">fptrWriteToFile</span>)( <span class="org-type">Person</span>*, <span class="org-keyword">const</span> <span class="org-type">char</span>*);
<span class="org-keyword">typedef</span> <span class="org-type">void</span>    (*<span class="org-type">fptrDelete</span>)( <span class="org-type">Person</span> *) ;

<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span>
{
    <span class="org-type">char</span>* <span class="org-variable-name">pFirstName</span>;
    <span class="org-type">char</span>* <span class="org-variable-name">pLastName</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">interface for function</span>
    <span class="org-type">fptrDisplayInfo</span>   <span class="org-variable-name">Display</span>;
    <span class="org-type">fptrWriteToFile</span>   <span class="org-variable-name">WriteToFile</span>;
    <span class="org-type">fptrDelete</span>        <span class="org-variable-name">Delete</span>;
}<span class="org-type">Person_t</span>;

<span class="org-type">Person_t</span>* <span class="org-function-name">new_Person</span>(<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pFirstName</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pLastName</span>);    <span class="org-comment-delimiter">//</span><span class="org-comment">constructor</span>
<span class="org-type">void</span> <span class="org-function-name">delete_Person</span>(<span class="org-type">Person</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pPersonObj</span>);    <span class="org-comment-delimiter">//</span><span class="org-comment">destructor</span>

<span class="org-type">void</span> <span class="org-function-name">Person_WriteToFile</span>(<span class="org-type">Person_t</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pPersonObj</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pFileName</span>);
</pre>
</div>

<p>
We derive an Employee now.
</p>

<p>
Employee.h
</p>
<div class="org-src-container">
<pre class="src src-c">
<span class="org-comment-delimiter">// </span><span class="org-comment">notice that new_Employee returns Person_t*</span>

<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span>
{
    <span class="org-type">Person_t</span>* <span class="org-variable-name">pBaseObj</span>;
    <span class="org-type">char</span>* <span class="org-variable-name">pDepartment</span>;
    <span class="org-type">char</span>* <span class="org-variable-name">pCompany</span>;
    <span class="org-type">int</span> <span class="org-variable-name">nSalary</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">If there is any employee specific functions; add interface here.</span>
}<span class="org-type">Employee_t</span>;

<span class="org-type">Person_t</span>* <span class="org-function-name">new_Employee</span>(<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pFirstName</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pLastName</span>,
        <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pDepartment</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pCompany</span>,
        <span class="org-type">int</span> <span class="org-variable-name">nSalary</span>);    <span class="org-comment-delimiter">//</span><span class="org-comment">constructor</span>
<span class="org-type">void</span> <span class="org-function-name">delete_Employee</span>(<span class="org-type">Person_t</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pPersonObj</span>);    <span class="org-comment-delimiter">//</span><span class="org-comment">destructor</span>

<span class="org-type">void</span> <span class="org-function-name">Employee_WriteToFile</span>(<span class="org-type">Person_t</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pPersonObj</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pFileName</span>);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org351e453" class="outline-3">
<h3 id="org351e453">Calling Conventions</h3>
<div class="outline-text-3" id="text-org351e453">
<p>
Calling Conventions determine:
</p>
<ul class="org-ul">
<li>Parameter passing
<ul class="org-ul">
<li>order</li>
<li>how parameters are passed (push to stack, registers, both)</li>
</ul></li>
<li>stack handling</li>

<li id="<code>__fastcall</code>">first 3 arguments are passed to registers, nr. of parameters fixed</li>
<li id="<code>__cdecl</code>">parameters pushed from right to left, nr. of parameters variable,
underscores are generated, name case is preserved</li>
<li id="<code>__stdcall</code>">parameters pushed from left to right, nr. of parameters fixed,
underscores are not generated, name case is preserved, callee has to clean the stack</li>
<li id="<code>__pascal</code>">parameters pushed from left to right, nr. of parameters fixed,
underscores are not generated, names are uppercase, caller has to clean the stack</li>
</ul>
</div>
</div>

<div id="outline-container-org48d05f2" class="outline-3">
<h3 id="org48d05f2">Classes and Objects</h3>
<div class="outline-text-3" id="text-org48d05f2">
<p>
A class exists only in source code; it doesn't exist at runtime.
</p>
</div>
<div id="outline-container-org0ad0a49" class="outline-4">
<h4 id="org0ad0a49">Creation</h4>
<div class="outline-text-4" id="text-org0ad0a49">
</div>
<div id="outline-container-org48fa8c3" class="outline-5">
<h5 id="org48fa8c3">Default Constructor</h5>
<div class="outline-text-5" id="text-org48fa8c3">
<p>
A constructor that takes no parameters. If a class has no constructor definitions
a public default constructor will be generated automatically (so to avoid construction
you need to define a private constructor).
</p>
</div>
</div>
<div id="outline-container-orged7cfcc" class="outline-5">
<h5 id="orged7cfcc">Copy Constructor and overloading =</h5>
<div class="outline-text-5" id="text-orged7cfcc">
<pre class="example">
MyType(const MyType&amp; obj_MyType)
</pre>


<p>
The CC will be called whenever an object is to be created from an existing one.
Essential to control passing and returning of userdefined types by value during function calls.
Prevent the compiler from doing a bitcopy.
</p>

<pre class="example">
MyType operator=()
</pre>


<p>
You can explicitly call = for the base class:
</p>
<pre class="example">
child.Base::operator=(base);
</pre>
</div>
</div>

<div id="outline-container-org37b12ee" class="outline-5">
<h5 id="org37b12ee">Initialization</h5>
<div class="outline-text-5" id="text-org37b12ee">
<p>
How to initialize members of an object?
</p>

<p>
Maybe we should first ask when?
</p>
<ol class="org-ol">
<li>When the object is created</li>
<li>Later, i.e. the object exists already and we set parameters.</li>
</ol>

<p>
If we stick to 1 we might use an <i>initializer list</i> or create the object with <code>new</code>.
In the second case we need a <i>setter</i> function (the object has to exist, or needs a default
constructor).
</p>

<ul class="org-ul">
<li><p>
A declaration is only a declaration.
Initialization ALWAYS takes place in the constructors Initializer list.
Also for Aggregation &amp; Composition.
</p>
<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-preprocessor">#include</span> <span class="org-string">"A.h"</span>
<span class="org-keyword">class</span> <span class="org-type">B</span>
{
<span class="org-keyword">public</span>:
  <span class="org-function-name">B</span>();
<span class="org-keyword">private</span>:
  <span class="org-type">A</span> <span class="org-variable-name">a</span>;
};

<span class="org-constant">B</span>::<span class="org-function-name">B</span>() :
  a(2,2)
{
}

</pre>
</div></li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li><code>const</code> members can only be set via initializer list (assignment not possible)</li>
</ul>
</div>

<div id="outline-container-orgebb6429" class="outline-6">
<h6 id="orgebb6429">Initializer List</h6>
<div class="outline-text-6" id="text-orgebb6429">
<p>
What do we need it for?
</p>

<p>
To initialize:
</p>
<ul class="org-ul">
<li>non-static const members</li>
<li>reference members  &amp;member</li>
<li>member objects which dont have a default constructor</li>
<li>base class members</li>
</ul>

<p>
Pitfall: Initialization is done in the order of declaration.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">MyClass</span>
{
<span class="org-keyword">public</span>:
   <span class="org-function-name">MyClass</span>(<span class="org-type">int</span> <span class="org-variable-name">i</span>)
      : a(++i), c(++i), b(++i)
<span class="org-keyword">private</span>:
   <span class="org-type">int</span> <span class="org-variable-name">a</span>;
   <span class="org-type">int</span> <span class="org-variable-name">b</span>;
   <span class="org-type">int</span> <span class="org-variable-name">c</span>;
};

<span class="org-type">MyClass</span> <span class="org-variable-name">obj</span>(0);  <span class="org-comment-delimiter">// </span><span class="org-comment">Whats the value of b? it's 1!</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org40f1407" class="outline-5">
<h5 id="org40f1407">Order of Construction and Destruction</h5>
<div class="outline-text-5" id="text-org40f1407">
<p>
Constructors don't actually create the object.
</p>

<p>
Constructors have two purposes:
</p>
<ol class="org-ol">
<li>Determine who is allowed to create an object.</li>
<li>Initialization of objects.</li>
</ol>

<p>
Destructors are always called in the reverse order of the constructors.
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Don't call constructors. It will result in a temp object.</li>
</ul>
</div>

<div id="outline-container-orgd72820b" class="outline-6">
<h6 id="orgd72820b">Inheritance</h6>
<div class="outline-text-6" id="text-orgd72820b">
<p>
<b>Constructor</b> : From base to derived.
</p>

<p>
I.e. the most base class constructor is called fist, etc. until the most derived class
constructor is called.
</p>

<pre class="example">
Shepard myDog;
Animal::Animal(), then Dog::Dog(), then Shepard::Shepard()
</pre>


<p>
This does make sense, because the child class may call functions or use data from the base class while
the base class doesn't care about the derived class.
</p>

<p>
Pass parameters from derived constructor to base constructor:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">TJavaIDE</span> : <span class="org-keyword">private</span> <span class="org-type">TJavaIDEFrame</span>{}

<span class="org-type">__fastcall</span> <span class="org-constant">TJavaIDE</span>::
      <span class="org-function-name">TJavaIDE</span>       (
                        <span class="org-type">TComponent</span>              *<span class="org-variable-name">owner</span>,
                        <span class="org-type">TWinControl</span>             *<span class="org-variable-name">parent</span>,
                        <span class="org-type">TLMDDockSite</span>            *<span class="org-variable-name">dock_site</span>,
                        <span class="org-type">TLMDDockManager</span>         *<span class="org-variable-name">dock_manager</span>,
                        <span class="org-type">TAdvToolBarPager</span>        *<span class="org-variable-name">adv_toolbar_pager</span>,
                        <span class="org-type">TActionManager</span>          *<span class="org-variable-name">action_manager</span>,
                        <span class="org-type">TAdvMenuOfficeStyler</span>    *<span class="org-variable-name">popup_styler</span>,
                        <span class="org-type">int</span>                     <span class="org-variable-name">ribbon_index</span>
                     )

    : TJavaIDEFrame  (
                        owner,
                        parent,
                        dock_site,
                        dock_manager,
                        adv_toolbar_pager,
                        action_manager,
                        popup_styler,
                        ribbon_index
                     )

{}
</pre>
</div>

<p>
<b>Destructor</b> : From derived to base.
</p>

<p>
It is the other way round for destructors, i.e. the most derived destructor is called first and so on
till the base class destructor is called last. This is not true when using delete and a base pointer.
See <a href="#orgdef2b37">Virtual Destructor</a>.
</p>
</div>
</div>

<div id="outline-container-org4cf195a" class="outline-6">
<h6 id="org4cf195a">Composition</h6>
<div class="outline-text-6" id="text-org4cf195a">
<p>
Note that the member objects (parts) are constructed before the containing class (whole) constructor is called (the
initializer list is also <i>before</i> the body of the constructor in the source code).
</p>

<p>
This makes sense because whole's constructor may want to use the member object.
so it should better be initialized first!
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>If the order in the Initializer List doesn't match the declaration order, there are undefined values.</li>
</ul>

<p>
Example
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">x</span>,<span class="org-variable-name">y</span>,<span class="org-variable-name">z</span>;
<span class="org-function-name">MyClass</span>(<span class="org-type">int</span> <span class="org-variable-name">_x</span>) : z(y), y(x), x(_x)  {} <span class="org-comment-delimiter">// </span><span class="org-comment">z and y are initalized to undefined values.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdef2b37" class="outline-5">
<h5 id="orgdef2b37">Virtual Destructor</h5>
<div class="outline-text-5" id="text-orgdef2b37">
<p>
Base destructors should be declared <code>virtual</code> or be <code>protected</code> when using Inheritance.
See: <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c35-a-base-class-destructor-should-be-either-public-and-virtual-or-protected-and-non-virtual">C.35: A base class destructor should be either public and virtual, or protected and non-virtual</a>
</p>
</div>
</div>

<div id="outline-container-orgffcbd07" class="outline-5">
<h5 id="orgffcbd07">The rule of three/five/zero</h5>
<div class="outline-text-5" id="text-orgffcbd07">
<p>
6 operations relating to the lifecycle of an object:
</p>
<div class="org-src-container">
<pre class="src src-cpp">X();                   <span class="org-comment-delimiter">// </span><span class="org-comment">default constructor</span>
X(<span class="org-keyword">const</span> <span class="org-type">X</span>&amp;);           <span class="org-comment-delimiter">// </span><span class="org-comment">copy constructor</span>
<span class="org-type">X</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span>(<span class="org-keyword">const</span> <span class="org-type">X</span>&amp;);   <span class="org-comment-delimiter">// </span><span class="org-comment">copy assignment</span>
<span class="org-function-name">X</span>(<span class="org-type">X</span>&amp;&amp;);                <span class="org-comment-delimiter">// </span><span class="org-comment">move constructor</span>
<span class="org-type">X</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span>(<span class="org-type">X</span>&amp;&amp;);        <span class="org-comment-delimiter">// </span><span class="org-comment">move assignment</span>
~<span class="org-function-name">X</span>();                  <span class="org-comment-delimiter">// </span><span class="org-comment">destructor</span>
</pre>
</div>
<p>
When a class is a <b>resource handle</b>, i.e. when it manages data through a pointer (reference, handle, etc).
Make sure that assignment, and passing by value works and moving data works without exception.
</p>

<p>
<b>Rule of Zero</b>
C.20: If you can avoid defining default operations, do.
</p>

<p>
In other words: Don't write any of the 6 operations above, if you don't have to.
And if you have to, look at the Rules below.
</p>

<p>
<b>Rule of Three</b> <br />
If a class defines any of the following, then it should define all three:
</p>
<ol class="org-ol">
<li>Destructor <code>~MyClass()</code></li>
<li>Copy Constructor <code>MyClass(const MyClass&amp; other)</code></li>
<li>Copy Assignment Operator <code>MyClass&amp; operator=(MyClass other)</code></li>
</ol>

<p>
With the implementation of move semantics things get more complicated.
</p>

<p>
<b>Rule of Five</b>
</p>
<ol class="org-ol">
<li>Destructor <code>~MyClass()</code></li>
<li>Copy Constructor <code>MyClass(const MyClass&amp; other)</code></li>
<li>Copy Assignment Operator <code>MyClass&amp; operator=(MyClass other)</code></li>
<li>Move Constructor <code>MyClass(MyClass&amp;&amp; other)</code></li>
<li>Move Assignment Operator <code>MyClass&amp; operator=(MyClass&amp;&amp; other)</code></li>
</ol>
</div>
</div>

<div id="outline-container-org78005e6" class="outline-5">
<h5 id="org78005e6">Constructor Delegation</h5>
<div class="outline-text-5" id="text-org78005e6">
<p>
Call another constructor of the same class.
</p>
</div>
</div>
</div>
<div id="outline-container-org00c8ff3" class="outline-4">
<h4 id="org00c8ff3">Relations between Classes</h4>
<div class="outline-text-4" id="text-org00c8ff3">

<div id="org00b4d67" class="figure">
<p><img src="resources/Composition_Aggregation_UML.PNG" alt="Composition_Aggregation_UML.PNG" />
</p>
</div>

<ul class="org-ul">
<li>"has a" - relationship (strong, weak)</li>
<li>Multiplicity:</li>
</ul>
</div>

<div id="outline-container-orgc3f1a9a" class="outline-5">
<h5 id="orgc3f1a9a">Composition</h5>
<div class="outline-text-5" id="text-orgc3f1a9a">
<p>
<a href="http://www.learncpp.com/cpp-tutorial/102-composition/">http://www.learncpp.com/cpp-tutorial/102-composition/</a>
Building a class out of other classes, i.e. building a complex object
out of simpler objects. (Whole and Part-Relation)
</p>

<p>
When the object of a composed Class is destroyed, the subobjects are
destroyed too, i.e. the composite object is responsible for the destruction
of the component parts.
</p>
</div>

<div id="outline-container-org9c80d66" class="outline-6">
<h6 id="org9c80d66">Example</h6>
<div class="outline-text-6" id="text-org9c80d66">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Composition</span>
<span class="org-keyword">class</span> <span class="org-type">Car</span>
{
<span class="org-keyword">private</span>:

  <span class="org-comment-delimiter">// </span><span class="org-comment">Car is the owner of carburetor.</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">carburetor is created when Car is created,</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">it is destroyed when Car is destroyed.</span>
  <span class="org-type">Carburetor</span> <span class="org-variable-name">carburetor</span>;

};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdbbd748" class="outline-5">
<h5 id="orgdbbd748">Aggregation</h5>
<div class="outline-text-5" id="text-orgdbbd748">
<p>
Parts still exist when the whole is destroyed (e.g. Company - Employee).
</p>

<p>
-&gt; Use a pointer to an object that exists outside the class scope.
</p>
</div>

<div id="outline-container-org67e1f2b" class="outline-6">
<h6 id="org67e1f2b">Example</h6>
<div class="outline-text-6" id="text-org67e1f2b">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Aggregation</span>
<span class="org-keyword">class</span> <span class="org-type">Pond</span>
{
<span class="org-keyword">private</span>:

  <span class="org-comment-delimiter">// </span><span class="org-comment">Pond is not the owner of ducks,</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">it has references on other ducks managed somewhere else</span>
  <span class="org-constant">std</span>::<span class="org-type">vector</span>&lt;<span class="org-type">Duck</span>*&gt; <span class="org-variable-name">ducks</span>;
};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6202c77" class="outline-5">
<h5 id="org6202c77">Inheritance</h5>
<div class="outline-text-5" id="text-org6202c77">
</div>
<div id="outline-container-org194f417" class="outline-6">
<h6 id="org194f417">Access Types Overview</h6>
<div class="outline-text-6" id="text-org194f417">
<pre class="example">
class derived_class_name: public | protected | private base_class_name
</pre>


<ul class="org-ul">
<li>public: public-&gt;public, protected-&gt;protected</li>
<li>protected: public-&gt;protected, protected-&gt;protected</li>
<li>private: everything becomes private</li>
</ul>

<p>
A base class's private members are never accessible directly from a derived class.
</p>


<div id="org8b2c85f" class="figure">
<p><img src="resources/C++Access Types.PNG" alt="C++Access Types.PNG" />
</p>
</div>

<p>
Note: Private Members are private on class level, not on object level.
      So one object can peek inside another one of the same class.
</p>
</div>
</div>

<div id="outline-container-org51821ae" class="outline-6">
<h6 id="org51821ae">Polymorphism</h6>
<div class="outline-text-6" id="text-org51821ae">
<p>
This would be nice:
</p>
<ul class="org-ul">
<li>Change the implementation of a function without changing (or recompiling) the code that calls the function.</li>
</ul>

<p>
Can be achieved in C++ by defining an interface via an abstract class. The calling code only depends on the
interface.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;iostream&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string">&lt;string&gt;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Animal interface</span>
<span class="org-keyword">class</span> <span class="org-type">Animal</span> {
 <span class="org-keyword">public</span>:
  <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">Eat</span>() = 0;
};

<span class="org-keyword">class</span> <span class="org-type">Dog</span> : <span class="org-keyword">public</span> <span class="org-type">Animal</span> {
 <span class="org-keyword">public</span>:
  <span class="org-function-name">Dog</span>() = <span class="org-keyword">default</span>;

 <span class="org-keyword">private</span>:
  <span class="org-type">void</span> <span class="org-function-name">Eat</span>() <span class="org-keyword">override</span> {
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Dog eats\n"</span>;
  }
};

<span class="org-keyword">class</span> <span class="org-type">Donkey</span> : <span class="org-keyword">public</span> <span class="org-type">Animal</span> {
 <span class="org-keyword">public</span>:
  <span class="org-function-name">Donkey</span>() = <span class="org-keyword">default</span>;

 <span class="org-keyword">private</span>:
  <span class="org-type">void</span> <span class="org-function-name">Eat</span>() <span class="org-keyword">override</span> {
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Donkey eats\n"</span>;
  }
};

<span class="org-comment-delimiter">// </span><span class="org-comment">actual Eat() is selected based on the runtime type of animal</span>
<span class="org-type">void</span> <span class="org-function-name">UseTheInterface</span>(<span class="org-type">Animal</span>&amp; <span class="org-variable-name">animal</span>) {
  animal.Eat();
}

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------------------------------------------</span>
<span class="org-type">int</span> <span class="org-function-name">main</span>(<span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">argv</span>[]) {
  <span class="org-type">Dog</span> <span class="org-variable-name">dog</span>;
  <span class="org-type">Donkey</span> <span class="org-variable-name">donkey</span>;

  UseTheInterface(dog);
  UseTheInterface(donkey);

  <span class="org-keyword">return</span> 0;
}
</pre>
</div>


<p>
Comment on runtime polymorphism:
</p>
<ul class="org-ul">
<li>Multiple dispatch: select the function matching the multiple runtime types
in the function call.</li>
<li>Single dispatch (runtime polymorphism): There is an object with a
member function. Selecting the function is done based on a single
special parameter (this), i.e. the runtime type of "this".</li>
</ul>

<p>
Good article: <a href="https://www.fluentcpp.com/2020/05/22/how-to-assign-derived-classes-in-cpp/">https://www.fluentcpp.com/2020/05/22/how-to-assign-derived-classes-in-cpp/</a>
</p>
</div>
</div>

<div id="outline-container-orge82b6df" class="outline-6">
<h6 id="orge82b6df">Abstract Class</h6>
<div class="outline-text-6" id="text-orge82b6df">
<p>
Has min. one purly virtual Member (=0)
virtual int area () =0;
</p>
</div>
</div>
<div id="outline-container-org0312189" class="outline-6">
<h6 id="org0312189">Virtual Inheritance</h6>
<div class="outline-text-6" id="text-org0312189">
<pre class="example">
Multiple inheritance, diamond problem
</pre>


<p>
Example: Class Hierarchy
</p>
<ul class="org-ul">
<li>Mammal is derived from Animal</li>
<li>WingedAnimal is derived from Animal</li>
<li>Bat is derived from Mammal AND WingedAnimal</li>
</ul>

<p>
Now the problem is that Bat derives from two classes, that derive from the same class (diamond of death).
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Animal</span> {
<span class="org-keyword">public</span>:
   <span class="org-type">int</span> <span class="org-variable-name">age</span> = 42;
};

<span class="org-keyword">class</span> <span class="org-type">Mammal</span> : <span class="org-keyword">virtual</span> <span class="org-keyword">public</span> <span class="org-type">Animal</span> {
<span class="org-keyword">public</span>:
   <span class="org-type">int</span> <span class="org-variable-name">i</span> = 1;

};

<span class="org-keyword">class</span> <span class="org-type">WingedAnimal</span> : <span class="org-keyword">virtual</span> <span class="org-keyword">public</span> <span class="org-type">Animal</span> {
<span class="org-keyword">public</span>:
   <span class="org-type">int</span> <span class="org-variable-name">i</span> = 2;
};

<span class="org-comment-delimiter">// </span><span class="org-comment">A bat is a winged mammal</span>
<span class="org-keyword">class</span> <span class="org-type">Bat</span> : <span class="org-keyword">public</span> <span class="org-type">Mammal</span>, <span class="org-keyword">public</span> <span class="org-type">WingedAnimal</span> {
};

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
   <span class="org-type">Bat</span> <span class="org-variable-name">bat</span>;

   ++<span class="org-constant">bat</span>::Mammal.i;               <span class="org-comment-delimiter">// </span><span class="org-comment">access subclass</span>
   ++<span class="org-constant">bat</span>::WingedAnimal.i;         <span class="org-comment-delimiter">// </span><span class="org-comment">access subclass</span>

   ++<span class="org-constant">bat</span>::Animal.age;             <span class="org-comment-delimiter">// </span><span class="org-comment">this would be a problem without virtual inheritance because there would be</span>
                                  <span class="org-comment-delimiter">// </span><span class="org-comment">2 Animal objects inside bat</span>

   ++<span class="org-constant">bat</span>::<span class="org-constant">Mammal</span>::Animal.age;     <span class="org-comment-delimiter">// </span><span class="org-comment">those 2 would be different without virtual inheritance</span>
   --<span class="org-constant">bat</span>::<span class="org-constant">Mammal</span>::Animal.age;

   <span class="org-keyword">return</span> 0;
}
</pre>
</div>

<p>
A bat object contains two different Animal subobjects. To avoid that use virtual Inheritance in the
declaration of Mammal and WingedAnimal (e.g. <code>virtual public Animal</code>).
</p>
</div>
</div>

<div id="outline-container-orgb969a06" class="outline-6">
<h6 id="orgb969a06">Late Binding, Early Binding</h6>
<div class="outline-text-6" id="text-orgb969a06">
<dl class="org-dl">
<dt>Binding</dt><dd>How identifiers (function names in this case) are converted into addresses.</dd>
<dt>Early (static) binding</dt><dd>direct mapping function name - address
function calls are simply jumps to that address</dd>
<dt>Late (dynamic) binding</dt><dd>sometimes the address of a function call (indirect function call) is only known at runtime
e.g.
<ul class="org-ul">
<li>function pointer</li>
</ul></dd>
</dl>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc1fe7c4" class="outline-4">
<h4 id="orgc1fe7c4">Struct vs. Class</h4>
<div class="outline-text-4" id="text-orgc1fe7c4">
<p>
A structure is a class defined with the struct keyword. Its members and bases are public by default.
<a href="#org83040be">typedef</a>
</p>
</div>
</div>

<div id="outline-container-orgd019175" class="outline-4">
<h4 id="orgd019175">Memory Layout</h4>
<div class="outline-text-4" id="text-orgd019175">
<p>
<a href="D:\Joe\Dropbox\Zero\Technik\Informatik\Programmiersprachen\C++\Memory Model">D:\Joe\Dropbox\Zero\Technik\Informatik\Programmiersprachen\C++\Memory Model</a>
</p>

<ul class="org-ul">
<li>data members in the order of declaration</li>

<li>Runtime type information</li>
<li>Non-Virtual base objects and their data (probably in order of declaration).</li>
<li>Member variables</li>
<li>Virtual base objects and their data (Probably in some DFS tree search order).</li>
</ul>

<p>
dynamic_cast&lt;&gt;			- compiler dependent, use runtime type info
reinterpret_cast&lt;&gt;	- only change the pointer type
</p>
</div>
</div>
</div>
<div id="outline-container-orgeef078c" class="outline-3">
<h3 id="orgeef078c">Thread Support Library</h3>
<div class="outline-text-3" id="text-orgeef078c">
<p>
see also: <a href="Computer Science.html#orgc2737b4">Computer Science.org::Concurrency</a>
</p>
</div>

<div id="outline-container-org7ab7ae9" class="outline-4">
<h4 id="org7ab7ae9">General</h4>
<div class="outline-text-4" id="text-org7ab7ae9">
<ul class="org-ul">
<li>Every thread has it's own stack.</li>
</ul>

<p>
<b>Why does C++ have to care about concurrency?</b>
</p>
<ul class="org-ul">
<li>Compiler optimization: What is allowed?</li>
<li>Hardware might reorder memory accesses (Caches).</li>
</ul>
</div>
</div>

<div id="outline-container-org25d0ce1" class="outline-4">
<h4 id="org25d0ce1">Create a thread</h4>
<div class="outline-text-4" id="text-org25d0ce1">
<p>
Constructing a <code>std::thread</code> object automatically starts a thread. The constructor
receives a <i>callable type</i> (e.g. a void function) who's object is copied into
the storage belonging to the new thread.
</p>

<p>
Once the thread is started you need to decide whether to wait for it (<code>thr.join()</code>)
or leave it running on its own (<code>thr.detatch()</code>).
</p>

<p>
Note that you can <code>join()</code> only once for a given thread, calling <code>joinable()</code> then will
return false.
</p>
</div>

<div id="outline-container-org816066d" class="outline-5">
<h5 id="org816066d">Passing arguments to a thread function</h5>
<div class="outline-text-5" id="text-org816066d">
<p>
It's important to bear in mind that by default the arguments are copied into
internal storage, even if the corresponding parameter is a reference.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">my_fun</span>(<span class="org-type">int</span> <span class="org-variable-name">i</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">str</span>);
<span class="org-constant">std</span>::<span class="org-type">thread</span> <span class="org-variable-name">thr</span>(my_fun, 3, <span class="org-string">"hello"</span>);
<span class="org-comment-delimiter">// </span><span class="org-comment">this will call my_fun(3, "hello");</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf3ecda2" class="outline-5">
<h5 id="orgf3ecda2">Terminate a thread</h5>
<div class="outline-text-5" id="text-orgf3ecda2">
<p>
Note that terminating threads (in contrast to terminating processes) is problematic because
nobody knows what system resources the thread might hold.
Because of that there is no real support for shutting down a thread in C++.
</p>

<p>
So you should:
</p>
<ul class="org-ul">
<li>Synchronously shut down threads (communicate with the thread).</li>
</ul>
<p>
or
</p>
<ul class="org-ul">
<li>Terminate the whole process (<code>std::terminate()</code>).</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org6f8c1df" class="outline-4">
<h4 id="org6f8c1df">Using Mutexes</h4>
<div class="outline-text-4" id="text-org6f8c1df">
<p>
Don't call member functions of <code>std::mutex</code> directly, use <code>std::lock_guard</code>,
so you don't have to unlock the mutex manually (RAII: lock and unlock on
construction and destruction).
</p>

<p>
This is for example important for thread safety, i.e.
if you lock a mutex and the protected code throws an exception you might end up
with a locked mutex that is never unlocked.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Token</span> <span class="org-function-name">getToken</span>(){
   <span class="org-constant">std</span>::<span class="org-type">lock_guard</span>&lt;<span class="org-constant">std</span>::mutex&gt; <span class="org-variable-name">lk</span>(mutex);
   <span class="org-keyword">if</span> (tokens.empty())
      tokens.push_back(<span class="org-constant">Token</span>::create());
   <span class="org-type">Token</span> <span class="org-variable-name">t</span> = <span class="org-constant">std</span>::move(tokens.back());
   tokens.pop_back();
   <span class="org-keyword">return</span> t;
}

<span class="org-type">size_t</span> <span class="org-function-name">getNumberOfTokens</span>() <span class="org-keyword">const</span> {
   <span class="org-constant">std</span>::<span class="org-type">lock_guard</span> <span class="org-variable-name">lk</span>(mutex);
   <span class="org-keyword">return</span> tokens.size();
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org9eb4a21" class="outline-4">
<h4 id="org9eb4a21">Synchronization Primitives</h4>
<div class="outline-text-4" id="text-org9eb4a21">
<ul class="org-ul">
<li><code>std::condition_variable</code></li>
<li><code>std::mutex</code></li>
</ul>

<p>
Mutex Wrappers
</p>
<ul class="org-ul">
<li><code>std::unique_lock&lt;Mutex&gt;</code></li>
<li><code>std::lock_guard&lt;Mutex&gt;</code></li>
<li><code>std::scoped_lock&lt;Mutex&gt;</code></li>

<li><code>std::thread</code></li>
</ul>
</div>
<div id="outline-container-orgc00c649" class="outline-5">
<h5 id="orgc00c649">Condition Variable</h5>
</div>
<div id="outline-container-org598e6f3" class="outline-5">
<h5 id="org598e6f3">Mutex</h5>
</div>
<div id="outline-container-org2c81c6b" class="outline-5">
<h5 id="org2c81c6b">Lock Guard</h5>
<div class="outline-text-5" id="text-org2c81c6b">
<ul class="org-ul">
<li>Mutex wrapper.</li>
<li>RAII for handling ownership of a mutex.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc5b6279" class="outline-5">
<h5 id="orgc5b6279">Unique Lock</h5>
</div>
<div id="outline-container-org7a5c4ac" class="outline-5">
<h5 id="org7a5c4ac">Scoped Lock</h5>
<div class="outline-text-5" id="text-org7a5c4ac">
<p>
std::scoped_lock offers a replacement for lock_guard
that provides the ability to lock multiple mutexes using a deadlock avoidance algorithm.
</p>
</div>
</div>
<div id="outline-container-org2b44d8f" class="outline-5">
<h5 id="org2b44d8f">Semaphores</h5>
</div>
</div>
<div id="outline-container-orga2829cc" class="outline-4">
<h4 id="orga2829cc">Futures</h4>
</div>
</div>

<div id="outline-container-org17a9691" class="outline-3">
<h3 id="org17a9691">Core Guidelines</h3>
<div class="outline-text-3" id="text-org17a9691">
</div>
<div id="outline-container-org837e927" class="outline-4">
<h4 id="org837e927">I: Interfaces</h4>
<div class="outline-text-4" id="text-org837e927">
</div>
<div id="outline-container-orgf99a974" class="outline-5">
<h5 id="orgf99a974">I.13: Do not pass an array as a single pointer</h5>
</div>

<div id="outline-container-orgf73c339" class="outline-5">
<h5 id="orgf73c339">I.23: Keep the number of function arguments low</h5>
</div>
</div>
<div id="outline-container-orgde09e77" class="outline-4">
<h4 id="orgde09e77">F: Functions</h4>
</div>
<div id="outline-container-org5ecf622" class="outline-4">
<h4 id="org5ecf622">ES: Expressions and statements</h4>
<div class="outline-text-4" id="text-org5ecf622">
</div>
<div id="outline-container-orge4e46dc" class="outline-5">
<h5 id="orge4e46dc">ES.23: Prefer the {}-initializer syntax</h5>
<div class="outline-text-5" id="text-orge4e46dc">
<p>
Narrowing should cause a compile error.
</p>
<ul class="org-ul">
<li>Use <code>-Werror=narrowing</code> flag with GCC</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgedbe260" class="outline-3">
<h3 id="orgedbe260">Data Structures</h3>
<div class="outline-text-3" id="text-orgedbe260">
<p>
STL Container Performance O()
<a href="https://users.cs.northwestern.edu/~riesbeck/programming/c++/stl-summary.html">https://users.cs.northwestern.edu/~riesbeck/programming/c++/stl-summary.html</a>
</p>

<div class="picture" id="orgb15c7d2">

<div id="org7299409" class="figure">
<p><img src="resources/STL Container Performance.PNG" alt="STL Container Performance.PNG" />
</p>
</div>

</div>

<p>
sequential Containers: Deque, List, Forward List
</p>
</div>
<div id="outline-container-org54a0cd9" class="outline-4">
<h4 id="org54a0cd9">STL General Comments</h4>
<div class="outline-text-4" id="text-org54a0cd9">
<p>
Provides 4 components
</p>
<ul class="org-ul">
<li>algorithms</li>
<li>containers</li>
<li>functions</li>
<li>iterators</li>
</ul>

<p>
STL algorithms are independent of containers.
</p>
</div>
</div>

<div id="outline-container-orgb13a629" class="outline-4">
<h4 id="orgb13a629">Vector</h4>
<div class="outline-text-4" id="text-orgb13a629">
<ul class="org-ul">
<li>no reallocation in order to free unused memory</li>
<li>no auto-resize on changes (need to use resize() explicitly)</li>
<li>no reallocation on deletion (to avoid invalidating iterators?)</li>
<li>elements get copied on <code>push_back()</code></li>

<li>index
<dl class="org-dl">
<dt>Iterator to int  </dt><dd>int idx = it-DebugLineObjects.begin();</dd>
<dt>int to Iterator  </dt><dd>it = FRowsSelected.begin() + int;</dd>
</dl></li>
</ul>
</div>
</div>
<div id="outline-container-orgf227ec9" class="outline-4">
<h4 id="orgf227ec9">List</h4>
</div>
<div id="outline-container-org31bbaec" class="outline-4">
<h4 id="org31bbaec">Set</h4>
</div>
<div id="outline-container-org670e1b2" class="outline-4">
<h4 id="org670e1b2">Map</h4>
<div class="outline-text-4" id="text-org670e1b2">
</div>
<div id="outline-container-orgfce3596" class="outline-5">
<h5 id="orgfce3596">std::map</h5>
<div class="outline-text-5" id="text-orgfce3596">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;map&gt;</span>
<span class="org-constant">std</span>::<span class="org-type">map</span>&lt;<span class="org-type">char</span>, <span class="org-type">int</span>&gt; <span class="org-variable-name">ascii_map</span>;

ascii_map[<span class="org-string">'a'</span>] = 61;
ascii_map[<span class="org-string">'b'</span>] = 62;

ascii_map.clear();
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1501d13" class="outline-4">
<h4 id="org1501d13">Deque</h4>
<div class="outline-text-4" id="text-org1501d13">
<ul class="org-ul">
<li>double ended queue: can be extended at both ends</li>
</ul>
</div>
</div>
<div id="outline-container-org7538ce6" class="outline-4">
<h4 id="org7538ce6">Stack</h4>
</div>
<div id="outline-container-org7de72cb" class="outline-4">
<h4 id="org7de72cb">Queue</h4>
</div>

<div id="outline-container-org698e215" class="outline-4">
<h4 id="org698e215">Buffer</h4>
<div class="outline-text-4" id="text-org698e215">
<p>
There are two operations: <i>read()</i> and <i>write()</i>.
For implementing a buffer we need a <i>head</i>- and a <i>tail</i>-pointer, pointing
to:
</p>

<dl class="org-dl">
<dt><i>head</i></dt><dd>next position for <i>write()</i></dd>
<dt><i>tail</i></dt><dd>next position for <i>read()</i></dd>
</dl>

<p>
Special version: ring buffer:<br />
When the buffer is full we jump back and overwrite the first entry with the next
<i>write()</i> operation (instead of returning an overflow error).
</p>

<p>
Important buffer states:<br />
Distinguishing those two states is the tricky part!
</p>
<dl class="org-dl">
<dt>empty</dt><dd><i>head</i> == <i>tail</i></dd>
<dt>full </dt><dd><i>head</i> + 1 == <i>tail</i>
A buffer overflow can be handled in two ways: Either an additional <i>write()</i>
does nothing (returns overflow error) or we overwrite the oldest elements (ring buffer).</dd>
</dl>

<p>
With the following implementation we don't need a counter variable to distinguish
between states empty and full.
</p>

<p>
The disadvantage is that the oldest element cannot be read, reducing the total
buffer size by one element.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">1</th>
<th scope="col" class="org-right">2</th>
<th scope="col" class="org-right">3</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">H</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-right">T</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Here 3 elements have been written, for the next <i>write()</i> - operation the
full condition holds: H+1 == T.
</p>

<p>
When we continue to write now, we need to move the T pointer in order to not
get into the empty-state:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">1</th>
<th scope="col" class="org-right">2</th>
<th scope="col" class="org-right">3</th>
<th scope="col" class="org-right">4</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">H</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">T</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Now, when we start to read out all the elements we get: 2,3,4 and we miss
element 1.
</p>

<p>
C-Code implementation from <a href="https://www.mikrocontroller.net/articles/FIFO">https://www.mikrocontroller.net/articles/FIFO</a>
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-variable-name">BUFFER_FAIL</span>     0
<span class="org-preprocessor">#define</span> <span class="org-variable-name">BUFFER_SUCCESS</span>  1

<span class="org-preprocessor">#define</span> <span class="org-variable-name">BUFFER_SIZE</span> 16 <span class="org-comment-delimiter">// </span><span class="org-comment">muss 2^n betragen (8, 16, 32, 64 ...)</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">BUFFER_MASK</span> (BUFFER_SIZE-1) <span class="org-comment-delimiter">// </span><span class="org-comment">Klammern auf keinen Fall vergessen</span>

<span class="org-keyword">struct</span> <span class="org-type">Buffer</span> {
  <span class="org-type">uint8_t</span> <span class="org-variable-name">data</span>[BUFFER_SIZE];
  <span class="org-type">uint8_t</span> <span class="org-variable-name">read</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">zeigt auf das Feld mit dem &#228;ltesten Inhalt</span>
  <span class="org-type">uint8_t</span> <span class="org-variable-name">write</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">zeigt immer auf leeres Feld</span>
} <span class="org-variable-name">buffer</span> = {{}, 0, 0};

<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Stellt 1 Byte in den Ringbuffer</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Returns:</span>
<span class="org-comment-delimiter">//     </span><span class="org-comment">BUFFER_FAIL       der Ringbuffer ist voll. Es kann kein weiteres</span>
<span class="org-comment-delimiter">//                       </span><span class="org-comment">Byte gespeichert werden</span>
<span class="org-comment-delimiter">//     </span><span class="org-comment">BUFFER_SUCCESS    das Byte wurde gespeichert</span>
<span class="org-comment-delimiter">//</span>
<span class="org-type">uint8_t</span> <span class="org-function-name">BufferIn</span>(<span class="org-type">uint8_t</span> <span class="org-variable-name">byte</span>)
{
  <span class="org-type">uint8_t</span> <span class="org-variable-name">next</span> = ((buffer.write + 1) &amp; BUFFER_MASK);

  <span class="org-keyword">if</span> (buffer.read == next)
    <span class="org-keyword">return</span> BUFFER_FAIL; <span class="org-comment-delimiter">// </span><span class="org-comment">voll</span>

  buffer.data[buffer.write] = byte;
  <span class="org-comment-delimiter">// </span><span class="org-comment">buffer.data[buffer.write &amp; BUFFER_MASK] = byte; // absolut Sicher</span>
  buffer.write = next;

  <span class="org-keyword">return</span> BUFFER_SUCCESS;
}

<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Holt 1 Byte aus dem Ringbuffer, sofern mindestens eines abholbereit ist</span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Returns:</span>
<span class="org-comment-delimiter">//     </span><span class="org-comment">BUFFER_FAIL       der Ringbuffer ist leer. Es kann kein Byte</span>
<span class="org-comment-delimiter">//                       </span><span class="org-comment">geliefert werden.</span>
<span class="org-comment-delimiter">//     </span><span class="org-comment">BUFFER_SUCCESS    1 Byte wurde geliefert</span>
<span class="org-comment-delimiter">//</span>
<span class="org-type">uint8_t</span> <span class="org-function-name">BufferOut</span>(<span class="org-type">uint8_t</span> *<span class="org-variable-name">pByte</span>)
{
  <span class="org-keyword">if</span> (buffer.read == buffer.write)
    <span class="org-keyword">return</span> BUFFER_FAIL;

  *pByte = buffer.data[buffer.read];

  buffer.read = (buffer.read+1) &amp; BUFFER_MASK;

  <span class="org-keyword">return</span> BUFFER_SUCCESS;
}
</pre>
</div>

<p>
See <a href="#org201d899">Modulo-Arithmetic</a> for index correction when index &gt; buffer.size.
</p>
</div>
</div>

<div id="outline-container-org1a0574b" class="outline-4">
<h4 id="org1a0574b">Choose right container</h4>
<div class="outline-text-4" id="text-org1a0574b">

<div id="org8cb407d" class="figure">
<p><img src="resources//ContainerFlowChart.png" alt="ContainerFlowChart.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgc62919d" class="outline-4">
<h4 id="orgc62919d">Iterators</h4>
<div class="outline-text-4" id="text-orgc62919d">
<p>
Has the ability to iterate through the elements of a range object (array, container).
The most obvious form of iterator is a pointer: A pointer can point to elements in an array,
and can iterate through them using the increment operator (++).
</p>

<p>
Operations:
begin, end, prev, next, etc.
</p>

<ul class="org-ul">
<li><p>
persistent Iterators
reallocation (e.g. push_back()) might invalidate an iterator
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">vector</span>&lt;<span class="org-type">int</span>&gt; <span class="org-variable-name">v</span>(100);
<span class="org-keyword">auto</span> <span class="org-variable-name">i</span> = v.begin();
v.push_back(10);       <span class="org-comment-delimiter">// </span><span class="org-comment">reallocation</span>
*i = 20;               <span class="org-comment-delimiter">// </span><span class="org-comment">bug</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb9321d5" class="outline-3">
<h3 id="orgb9321d5">Data Types</h3>
<div class="outline-text-3" id="text-orgb9321d5">
</div>
<div id="outline-container-org95deb5f" class="outline-4">
<h4 id="org95deb5f">Storage Class Specifiers</h4>
<div class="outline-text-4" id="text-org95deb5f">
<p>
C storage classes define the scope and lifetime of variables and functions.
</p>

<p>
There are:
</p>
<dl class="org-dl">
<dt><code>auto</code>                 </dt><dd>local variables (stack - RAM) (don't confuse with <code>auto</code> keyword)</dd>
<dt><code>register</code>             </dt><dd>local variables to be stored in a register (max size = register size)</dd>
<dt><code>static</code>               </dt><dd>lifetime = program, scope = object file (variables and functions)</dd>
<dt><code>extern</code>               </dt><dd>lifetime = program, scope = global, initialized somewhere else (<a href="#org491d8fd">The <code>extern</code> Keyword</a>)</dd>
<dt><code>mutable</code> (only C++)   </dt><dd>only for class objects, A mutable member can be modified by a const member function
(remember, const member functions are not allowed to change members).</dd>
</dl>
</div>

<div id="outline-container-org7674446" class="outline-5">
<h5 id="org7674446">Storage Duration</h5>
<div class="outline-text-5" id="text-org7674446">
<p>
How long does an object exist?
</p>

<ul class="org-ul">
<li>static : From begin to end of program.</li>
<li>automatic : From begin to end of code block (local variables).</li>
<li>dynamic : Heap allocation.</li>
<li>thread : From begin to end of thread.</li>
</ul>
</div>
</div>

<div id="outline-container-orgd9b43ca" class="outline-5">
<h5 id="orgd9b43ca">Linkage</h5>
<div class="outline-text-5" id="text-orgd9b43ca">
<p>
A Name can denote: object, function, reference, type, template, namespace or value. Those things have <i>linkage</i>
(just think of variable or function).
</p>

<p>
A name can be referred to
</p>
<ul class="org-ul">
<li>no linkage : from the scope it is in (block, local classes, etc.).</li>
<li>internal linkage : only from the same translation unit.</li>
<li>external linkage : from other translation units.</li>
</ul>
</div>
</div>

<div id="outline-container-org491d8fd" class="outline-5">
<h5 id="org491d8fd">The <code>extern</code> Keyword</h5>
<div class="outline-text-5" id="text-org491d8fd">
<p>
Force a declaration only. It's the means of using global variables visible in all files.
The <code>extern</code> keyword means "declare without defining". No memory is allocated.
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-type">double</span> <span class="org-variable-name">val</span>[MAXVAL];    <span class="org-comment-delimiter">// </span><span class="org-comment">memory is allocated</span>

<span class="org-keyword">extern</span> <span class="org-type">double</span> <span class="org-variable-name">val</span>[];   <span class="org-comment-delimiter">// </span><span class="org-comment">only type and size are specified, no memory allocation</span>
</pre>
</div>

<p>
When a variable is defined, the compiler allocates memory for that variable and possibly also initializes its contents to some value.
When a variable is declared, the compiler requires that the variable be defined elsewhere. The names are then resolved at link time.
You have to be careful here because the linker has very limited type information and some compilers might not give an error.
</p>

<p>
So if you want to use the same variable (in memory) in multiple modules (c-files) it must be defined (memory allocated)
only once. All the other declarations should use <code>=extern</code>.
</p>

<p>
Typical use:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">A.h</span>
<span class="org-keyword">extern</span> <span class="org-type">bool</span> <span class="org-variable-name">myFlag</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">declaration</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">A.c</span>
<span class="org-type">bool</span> <span class="org-variable-name">myFlag</span> = <span class="org-constant">false</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">definition, needs to exist exactly once, outside any function</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">B.h, C.h, D.h, ...</span>
<span class="org-preprocessor">#include</span> <span class="org-string">"A.h"</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">myFlag can now be used in this module</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">B.c</span>
<span class="org-type">bool</span> <span class="org-variable-name">myFlag</span> = <span class="org-constant">true</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">not possible, compile error: multiple definitions</span>
</pre>
</div>

<p>
Notes:
</p>
<ul class="org-ul">
<li>A variable/function can be declared multiple times but defined only once.</li>
<li>When a variable/function is defined it's also declared. You can't define without declaration.</li>
<li>extern int var = 0;  //possible, but not in a header who is included in multiple modules (error: defined multiple times)</li>
</ul>

<p>
What about extern functions?
By default, the declaration and definition of a C function have extern prepended with them.
</p>
</div>
</div>

<div id="outline-container-org5f1c3b9" class="outline-5">
<h5 id="org5f1c3b9">The <code>volatile</code> Keyword</h5>
<div class="outline-text-5" id="text-org5f1c3b9">
<pre class="example">
Short: Declare a variable volatile to tell the compiler that it might change somewhere else (ISR, external register).
</pre>


<p>
<code>volatile</code> tells the compiler that the value of the declared variable may change at any time, independent of the
executed code. This can for example happen when you access an external register via a variable (e.g. a hardware counter).
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">volatile</span> <span class="org-type">uint16_t</span> <span class="org-variable-name">reg</span>;
<span class="org-keyword">volatile</span> <span class="org-type">uint16_t</span>* <span class="org-variable-name">ptr_reg</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">pointer to volatile register (Note: same as with const ptrs)</span>
<span class="org-type">uint16_t</span>* <span class="org-keyword">volatile</span> <span class="org-variable-name">ptr_reg</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">volatile pointer to non-volatile data (not very likely to be used)</span>
</pre>
</div>

<p>
You can also apply volatile to <code>struct</code> and <code>union</code>.
</p>

<p>
What do you use it for:
</p>
<ul class="org-ul">
<li>memory mapped peripheral registers (register of an external hardware that is mapped into the address space of the cpu)</li>
<li>global variables modified by an interrupt handler</li>
<li>global variables accessed by multiple threads</li>
</ul>

<p>
Examples: Problems arise especially when compiler optimization is turned on.
</p>

<p>
Reading an external status register:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-type">uint8_t</span>* <span class="org-variable-name">status_register</span> = (<span class="org-type">uint8_t</span>*) STATUS_REGISTER_ADDRESS;            <span class="org-comment-delimiter">// </span><span class="org-comment">WRONG -&gt; data read only once</span>
<span class="org-keyword">volatile</span> <span class="org-type">uint8_t</span>* <span class="org-variable-name">status_register</span> = (<span class="org-type">uint8_t</span>*) STATUS_REGISTER_ADDRESS;   <span class="org-comment-delimiter">// </span><span class="org-comment">RIGHT -&gt; data read</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">wait for non-zero value</span>
<span class="org-keyword">while</span>(*status_register == 0){}
</pre>
</div>

<p>
This will result in an endless loop because the compiler will generate code that reads the data only once.
</p>

<p>
Interrupt Handler setting a global flag:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-type">bool</span> <span class="org-variable-name">end_of_message</span> = <span class="org-constant">false</span>;           <span class="org-comment-delimiter">// </span><span class="org-comment">WRONG</span>
<span class="org-keyword">volatile</span> <span class="org-type">bool</span> <span class="org-variable-name">end_of_message</span> = <span class="org-constant">false</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">RIGHT</span>

<span class="org-type">void</span> <span class="org-function-name">main</span>()
{
   <span class="org-keyword">while</span>(<span class="org-negation-char">!</span>end_of_message){<span class="org-comment-delimiter">/*</span><span class="org-comment">wait</span><span class="org-comment-delimiter">*/</span>}  <span class="org-comment-delimiter">// </span><span class="org-comment">the compiler doesn't know that end_of_message might change! it will assume that it doesn't</span>
}

<span class="org-type">void</span> <span class="org-function-name">RX_Handler</span>(<span class="org-type">void</span>)
{
   <span class="org-keyword">if</span>(rx_char == END_OF_MESSAGE)
      end_of_message = <span class="org-constant">true</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5662380" class="outline-4">
<h4 id="org5662380">Scope</h4>
<div class="outline-text-4" id="text-org5662380">
</div>
<div id="outline-container-orgdc6ea79" class="outline-5">
<h5 id="orgdc6ea79">The <code>auto</code> keyword (C++ 11), automatic type deduction</h5>
<div class="outline-text-5" id="text-orgdc6ea79">
<p>
Initialize variable automatically with the right type:
</p>
<pre class="example">
auto d = 5.0;     -&gt; d will be a double
auto result = myfun();
</pre>
</div>
</div>
</div>
<div id="outline-container-orgada4323" class="outline-4">
<h4 id="orgada4323">Const correctness</h4>
<div class="outline-text-4" id="text-orgada4323">
<p>
Prevent objects from getting mutated. Prevent things that shouldn't change
from getting changed.
</p>

<ul class="org-ul">
<li><a href="http://www.cplusplus.com/articles/y8hv0pDG/">Article</a></li>
<li><a href="http://www.cprogramming.com/tutorial/const_correctness.html">http://www.cprogramming.com/tutorial/const_correctness.html</a></li>
<li><a href="http://www.possibility.com/Cpp/const.html">http://www.possibility.com/Cpp/const.html</a></li>
</ul>

<p>
Why use this?
</p>
<ul class="org-ul">
<li>Compile time error prevention.</li>
<li>Performance optimization: <br />
Use const pointer reference (<code>const MyType&amp; var</code>) instead of by value parameter. Then there is no copy made.</li>
<li>Documentation: <br />
<code>const</code> allows you to make it clear to yourself and others that something should not be changed.
Users of a function with const parameters can be sure that their data will not be changed.</li>
</ul>

<p>
What can be const?
</p>
<ul class="org-ul">
<li><p>
Variables
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">i</span> = 4; <span class="org-keyword">or</span> <span class="org-type">int</span> <span class="org-keyword">const</span> i = 4;
</pre>
</div>

<p>
Same thing, the value has to be in the declaration.
</p></li>
<li><p>
<b>References</b>
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">myfun</span>(<span class="org-keyword">const</span> <span class="org-type">myObj</span>&amp; <span class="org-variable-name">obj</span>);
</pre>
</div>

<p>
The object refered to will be const. A reference cannot be changed anyway.
</p></li>
<li><p>
<b>Pointers</b> <br />
Other than with references, you can change the data pointed to, or change the pointer itself.
</p>

<p>
To figure out which is which read from right to left (<a href="#org3197505">The Clockwise Spiral Rule</a>).
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-keyword">const</span>* <span class="org-variable-name">pint</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">Data pointed to is constant. read: pint is a pinter to a constant int.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">this is the same as</span>
<span class="org-keyword">const</span> <span class="org-type">int</span>* <span class="org-variable-name">pint</span>;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span>* <span class="org-keyword">const</span> <span class="org-variable-name">pint</span> = &amp;x; <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer is constant. Has to be initialized when declared. read: pint is a constant pointer to int.</span>
</pre>
</div>

<p>
Another aspect:
There is a small clause in the C++ standard that says that non-const
references cannot bind to temporary objects. A temporary object is an
instance of an object that does not have a variable name.
For example: string( "Hello world" );
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">bad declaration, has to be const</span>
<span class="org-type">void</span> <span class="org-function-name">print_me_bad</span>( <span class="org-type">string</span>&amp; <span class="org-variable-name">s</span> )          <span class="org-comment-delimiter">//</span><span class="org-comment">-&gt; compile error</span>
<span class="org-type">void</span> <span class="org-function-name">print_me_good</span>( <span class="org-keyword">const</span> <span class="org-type">string</span>&amp; <span class="org-variable-name">s</span> )   <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
</pre>
</div>
<p>
Compile Error: E2357 Reference initialized with 'const char *', needs lvalue of type 'string'
</p></li>
<li><p>
<b>Member functions</b>
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-constant">MyClass</span>::<span class="org-function-name">myMemberFun</span>() <span class="org-keyword">const</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">const in the above is necessary when we want to use const references like this:</span>
<span class="org-type">void</span> <span class="org-function-name">printMyClass</span>(<span class="org-keyword">const</span> <span class="org-type">MyClass</span>&amp; <span class="org-variable-name">obj</span>){};
</pre>
</div>

<p>
The function cannot change any members.
Internally const methods receive a const this pointer.
Note that this can be undone by declaring a member variable <b>mutable</b> (might be
useful with std::mutex).
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org8db7c16" class="outline-4">
<h4 id="org8db7c16">Type Conversion</h4>
<div class="outline-text-4" id="text-org8db7c16">
<ul class="org-ul">
<li>dynamic_cast
For Polymorphism!
Cast down or across an inheritance hierarchy.</li>
<li>static_cast: static_cast &lt;type-id&gt; ( expression )
int to double, etc.</li>
<li>reinterpret_cast
Most dangerous cast.
When nothing else works, allows to cast completely different types.</li>
<li>const_cast
const or volatile</li>
</ul>
</div>

<div id="outline-container-org967995b" class="outline-5">
<h5 id="org967995b">Implicit conversion</h5>
<div class="outline-text-5" id="text-org967995b">
<p>
If two types of operands differ, the operand with the lower type
will be converted to the higher type according to this order:
</p>
<pre class="example">
higest - lowest
long double, double, float, unsigned long int, long int, unsigned int, int
</pre>


<p>
Example:
</p>
<pre class="example" id="orgb452790">
25u (unsigned int) - 50 (int)
will result in 4294967271 (assuming 32 bit int)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9e9735e" class="outline-4">
<h4 id="org9e9735e">Literals</h4>
<div class="outline-text-4" id="text-org9e9735e">
<ul class="org-ul">
<li>int
<img src="resources//int_literals.PNG" alt="int_literals.PNG" /></li>
<li>char</li>
<li>floating point</li>
</ul>
</div>
</div>

<div id="outline-container-org889111c" class="outline-4">
<h4 id="org889111c">Pointers</h4>
<div class="outline-text-4" id="text-org889111c">
</div>
<div id="outline-container-org90c0717" class="outline-5">
<h5 id="org90c0717">General Comments</h5>
<div class="outline-text-5" id="text-org90c0717">
<p>
What do we need pointers for?
</p>
<ul class="org-ul">
<li>Observing other objects
<ul class="org-ul">
<li>Is the address we point to still valid?</li>
</ul></li>
<li>Dynamic memory allocation (new)</li>
<li>Polymorphism
<ul class="org-ul">
<li>Can be done with references and smart pointers.</li>
</ul></li>
<li>Avoid copying
<ul class="org-ul">
<li>passing objects to functions</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org2b45913" class="outline-6">
<h6 id="org2b45913">Problems with raw pointers</h6>
<div class="outline-text-6" id="text-org2b45913">
<ul class="org-ul">
<li>Dangling Pointer: The object pointed to doesn't exist anymore.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd0cc47b" class="outline-5">
<h5 id="orgd0cc47b">Const Pointer</h5>
<div class="outline-text-5" id="text-orgd0cc47b">
<p>
Same syntax as <code>volatile</code>.
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">const</span> <span class="org-type">char</span> <span class="org-variable-name">const_c</span> = <span class="org-string">'c'</span>;
<span class="org-type">char</span> <span class="org-variable-name">non_const_c</span> = <span class="org-string">'n'</span>;

<span class="org-type">char</span>* <span class="org-variable-name">ptr</span> = &amp;const_c;              <span class="org-comment-delimiter">// </span><span class="org-comment">NOK - compile error: cannot convert const char* to char*</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">(const char)* pointer to constant char, so you cannot change the value pointed to.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">its not: const (char *)</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">ptr</span> = &amp;const_c;        <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
<span class="org-type">char</span> <span class="org-keyword">const</span>* <span class="org-variable-name">ptr</span>;                   <span class="org-comment-delimiter">// </span><span class="org-comment">equivalent to the above</span>
ptr = &amp;non_const_c;                <span class="org-comment-delimiter">// </span><span class="org-comment">OK ptr is not const, so it can point somwhere else, also to non const data</span>
*ptr = <span class="org-string">'a'</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">NOK because the non-const char is accessed via a ptr to const data</span>

<span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">ptr</span> = &amp;const_c;        <span class="org-comment-delimiter">// </span><span class="org-comment">constant pointer to a (non constant) char, so you cannot change where ptr points to</span>
*ptr = <span class="org-string">'a'</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">OK</span>
ptr = &amp;non_const_c;                <span class="org-comment-delimiter">// </span><span class="org-comment">NOK, pointer is const</span>

<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-keyword">const</span> <span class="org-variable-name">ptr</span> = &amp;const_c;  <span class="org-comment-delimiter">// </span><span class="org-comment">both are constant</span>
*ptr = <span class="org-string">'a'</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">NOK</span>
ptr = &amp;non_const_c;                <span class="org-comment-delimiter">// </span><span class="org-comment">NOK, pointer is const</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf8c5ff0" class="outline-5">
<h5 id="orgf8c5ff0">reference, dereference values pointed at</h5>
<div class="outline-text-5" id="text-orgf8c5ff0">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">value</span> = 5;
<span class="org-type">int</span>* <span class="org-variable-name">ptr</span> = &amp;value; <span class="org-comment-delimiter">// </span><span class="org-comment">assign address of value</span>
<span class="org-type">int</span> <span class="org-variable-name">a</span> = *ptr;      <span class="org-comment-delimiter">//</span><span class="org-comment">dereference value</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Adresse auf die die Zeigervariable a verweist:</span>
(<span class="org-type">void</span> *)<span class="org-type">a</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Adresse der Zeigervariable a:</span>
&amp;<span class="org-variable-name">a</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcddac56" class="outline-5">
<h5 id="orgcddac56">Pointers to structs</h5>
<div class="outline-text-5" id="text-orgcddac56">
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">my_struct_t</span>
{
   <span class="org-type">char</span> <span class="org-variable-name">member</span>;
};
<span class="org-type">my_struct_t</span> <span class="org-variable-name">my_struct</span>;

<span class="org-type">void</span>* <span class="org-variable-name">ptr_member</span> = &amp;my_struct.member;   <span class="org-comment-delimiter">// </span><span class="org-comment">&amp;(my_struct.member), "." has higher precedence than "&amp;"</span>
<span class="org-type">my_struct_t</span>* <span class="org-variable-name">ptr</span> = &amp;my_struct;
<span class="org-type">void</span>* <span class="org-variable-name">ptr_ptr_member</span> = &amp;ptr-&gt;member;    <span class="org-comment-delimiter">// </span><span class="org-comment">same as &amp;(ptr-&gt;member), "-&gt;" has higher precedence than "&amp;"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2974736" class="outline-5">
<h5 id="org2974736">pointers vs. references</h5>
<div class="outline-text-5" id="text-org2974736">
<dl class="org-dl">
<dt>Memory location</dt><dd>A reference doesn't have it's own address.</dd>
<dt>Reassignment</dt><dd>References cannot be reassigned: <code>int&amp; r = i;</code> r and i are bound together forever,
there is also no NULL value for references.</dd>
<dt>Pointer Arithmetic</dt><dd>That also implies that there is no pointer arithmetic with references.</dd>
<dt>Indirection</dt><dd>A pointer can point to another pointer who can point to &#x2026;, references offer only one level.</dd>
</dl>
</div>
</div>

<div id="outline-container-org6458093" class="outline-5">
<h5 id="org6458093">Void Pointer</h5>
<div class="outline-text-5" id="text-org6458093">
<pre class="example">
void *pVoid;
</pre>


<ul class="org-ul">
<li>can point to any datatype</li>
<li>needs to be cast to another pointer before dereferencing</li>
</ul>
<pre class="example">
 int *pInt = static_cast&lt;int*&gt;(pVoid); // cast from void* to int*
(char *)pVoid = "asdf";
</pre>
</div>
</div>

<div id="outline-container-orgc923575" class="outline-5">
<h5 id="orgc923575"><a href="#orge5736aa">Function Pointers</a></h5>
</div>
</div>

<div id="outline-container-orgbd93a76" class="outline-4">
<h4 id="orgbd93a76">Smart Pointers</h4>
<div class="outline-text-4" id="text-orgbd93a76">
<ul class="org-ul">
<li><b>RAII</b> (ressource allocation is initialization) : Allocate memory in the <i>constructor</i> and release it in the <i>destructor</i>.</li>
</ul>

<p>
This is a good thing because the destructor is called automatically.
A smart pointer is a class that holds a pointer to an object and deletes
it in the destructor.
</p>

<p>
Use <code>std::unique_ptr</code> and <code>std::shared_ptr</code> (don't use <code>std::auto_ptr</code>).
</p>
</div>
<div id="outline-container-orgb908f47" class="outline-5">
<h5 id="orgb908f47">std::unique_ptr</h5>
<div class="outline-text-5" id="text-orgb908f47">
<p>
Wraps a raw pointer to a heap allocated object with RAII (Resource Acquisition Is Initialization) Semantics.
This means the resource (th object pointed to) is destroyed with the unique_ptr, i.e. when the unique_ptr goes
out of scope.
</p>

<ul class="org-ul">
<li>std::unique_ptr&lt;T&gt; myptr = std::unique_ptr&lt;T&gt;(new T());</li>
</ul>

<p>
Alternative with <code>make_unique</code> :
</p>
<ul class="org-ul">
<li>auto myptr = std::make_unique&lt;T&gt;();</li>
</ul>

<p>
Destroying the object early can be triggered by calling reset().
</p>
</div>
</div>

<div id="outline-container-org318dd1c" class="outline-5">
<h5 id="org318dd1c">Why you shouldn't use auto_ptr</h5>
<div class="outline-text-5" id="text-org318dd1c">
<p>
An <code>auto_ptr</code> is an object that wraps around a raw pointer and deletes any resource the raw pointer points to.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span>&lt;<span class="org-keyword">class</span> <span class="org-type">T</span>&gt;
<span class="org-keyword">class</span> <span class="org-type">Auto_ptr1</span>
{
   <span class="org-type">T</span>* <span class="org-variable-name">m_ptr</span>;
<span class="org-keyword">public</span>:
   <span class="org-comment-delimiter">// </span><span class="org-comment">Pass in a pointer to "own" via the constructor</span>
   <span class="org-function-name">Auto_ptr1</span>(<span class="org-type">T</span>* <span class="org-variable-name">ptr</span>=<span class="org-constant">nullptr</span>)
      :m_ptr(ptr)
   {
   }

   <span class="org-comment-delimiter">// </span><span class="org-comment">The destructor will make sure it gets deallocated</span>
   ~<span class="org-function-name">Auto_ptr1</span>()
   {
      <span class="org-keyword">delete</span> m_ptr;
   }

   <span class="org-comment-delimiter">// </span><span class="org-comment">Overload dereference and operator-&gt; so we can use Auto_ptr1 like m_ptr.</span>
   <span class="org-type">T</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">*</span>() <span class="org-keyword">const</span> { <span class="org-keyword">return</span> *m_ptr; }
   <span class="org-type">T</span>* <span class="org-keyword">operator</span><span class="org-function-name">-&gt;</span>() <span class="org-keyword">const</span> { <span class="org-keyword">return</span> m_ptr; }
};
</pre>
</div>

<p>
Note that there is no copy or assignment operator. So if we make an assignment we'll end up with 2 raw pointers pointing to the
resource. When the first auto_ptr goes out of scope it deletes the resource. When the second goes out of scope there will
probably be a crash because we try to delete an already deleted object.
</p>

<p>
Now we could solve this problem providing assignment and copy constructors that forbid copying the inside raw pointer.
</p>

<p>
But how do we now return an auto_ptr from a function?
</p>
<ul class="org-ul">
<li>Returning a reference creates a dangling pointer.</li>
<li>We need a copy (in this case it's ok) but just in this (r-value) case.</li>
</ul>

<p>
Let's try again:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span>&lt;<span class="org-keyword">class</span> <span class="org-type">T</span>&gt;
<span class="org-keyword">class</span> <span class="org-type">Auto_ptr2</span>
{
   <span class="org-type">T</span>* <span class="org-variable-name">m_ptr</span>;
<span class="org-keyword">public</span>:
   <span class="org-function-name">Auto_ptr2</span>(<span class="org-type">T</span>* <span class="org-variable-name">ptr</span>=<span class="org-constant">nullptr</span>)
      :m_ptr(ptr)
   {
   }

   ~<span class="org-function-name">Auto_ptr2</span>()
   {
      <span class="org-keyword">delete</span> m_ptr;
   }

   <span class="org-comment-delimiter">// </span><span class="org-comment">A copy constructor that implements move semantics</span>
   <span class="org-function-name">Auto_ptr2</span>(<span class="org-type">Auto_ptr2</span>&amp; <span class="org-variable-name">a</span>) <span class="org-comment-delimiter">// </span><span class="org-comment">note: not const</span>
   {
      m_ptr = a.m_ptr; <span class="org-comment-delimiter">// </span><span class="org-comment">transfer our dumb pointer from the source to our local object</span>
      a.m_ptr = <span class="org-constant">nullptr</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">make sure the source no longer owns the pointer</span>
   }

   <span class="org-comment-delimiter">// </span><span class="org-comment">An assignment operator that implements move semantics</span>
   <span class="org-type">Auto_ptr2</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span>(<span class="org-type">Auto_ptr2</span>&amp; <span class="org-variable-name">a</span>) <span class="org-comment-delimiter">// </span><span class="org-comment">note: not const</span>
   {
      <span class="org-keyword">if</span> (&amp;a == <span class="org-keyword">this</span>)
         <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;

      <span class="org-keyword">delete</span> m_ptr; <span class="org-comment-delimiter">// </span><span class="org-comment">make sure we deallocate any pointer the destination is already holding first</span>
      m_ptr = a.m_ptr; <span class="org-comment-delimiter">// </span><span class="org-comment">then transfer our dumb pointer from the source to the local object</span>
      a.m_ptr = <span class="org-constant">nullptr</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">make sure the source no longer owns the pointer</span>
      <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
   }

   <span class="org-type">T</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">*</span>() <span class="org-keyword">const</span> { <span class="org-keyword">return</span> *m_ptr; }
   <span class="org-type">T</span>* <span class="org-keyword">operator</span><span class="org-function-name">-&gt;</span>() <span class="org-keyword">const</span> { <span class="org-keyword">return</span> m_ptr; }
   <span class="org-type">bool</span> <span class="org-function-name">isNull</span>() <span class="org-keyword">const</span> { <span class="org-keyword">return</span> m_ptr == <span class="org-constant">nullptr</span>;  }
};
</pre>
</div>

<ul class="org-ul">
<li>This solution (like <code>std::auto_ptr</code>) implements move semantics through copy and assignment operator.</li>
<li>Passing this auto ptr by value doesn't create a copy but moves the pointer, that doesn't play well with the STL.</li>
<li>An STL element must be "copy-constructible" and "assignable".</li>
</ul>

<p>
The problem is:
</p>
<ul class="org-ul">
<li>Without proper move semantic implementation you can either copy or move but not both.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org92051c1" class="outline-4">
<h4 id="org92051c1">Namespaces</h4>
<div class="outline-text-4" id="text-org92051c1">
<p>
"::" in front of a class name specifies the global namespace, i.e. the root of namespace tree.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">x</span>;
<span class="org-type">void</span> <span class="org-function-name">f2</span>()
{
   <span class="org-type">int</span> <span class="org-variable-name">x</span> = 1; <span class="org-comment-delimiter">// </span><span class="org-comment">hide global x</span>
   ::x = 2;   <span class="org-comment-delimiter">// </span><span class="org-comment">assign to global x</span>
   x = 2;     <span class="org-comment-delimiter">// </span><span class="org-comment">assign to local x</span>
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org83040be" class="outline-4">
<h4 id="org83040be">typedef</h4>
<div class="outline-text-4" id="text-org83040be">
<p>
<code>typedef</code> is always used to make an alias for another type.
</p>

<p>
Syntax:
</p>
<pre class="example">
typedef typedeclaration;
</pre>


<ul class="org-ul">
<li>typedef's cannot be forward declared.</li>
</ul>

<p>
typdef enum vs. enum (only relevant for C: you'll have to declare)
</p>
<ul class="org-ul">
<li>enum Type {};</li>
<li>enum Type foo;</li>
<li>typdef Type {&#x2026;};</li>
<li>Type foo;</li>
</ul>

<p>
In C++ there is no difference.
</p>

<pre class="example">
1. typedef struct {...} Foo;
2. typedef struct Foo {...};
3. struct Foo {...} myFoo;
</pre>


<ol class="org-ol">
<li>The first is an alias for an unnamed struct. Forward declaration not possible.</li>
<li>The second introduces a new type.</li>
<li>The third declares a variable of type Foo.</li>
</ol>

<p>
You can also do typdef struct Foo{} Foo2; // alias to Foo, so 2 identical types have been defined
</p>

<p>
 <a href="http://tpcg.io/0VwdSiTn" target="_blank">typedef</a>
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;stdio.h&gt;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Type: struct account</span>
<span class="org-keyword">struct</span> <span class="org-type">account</span> {
     <span class="org-type">int</span> <span class="org-variable-name">account_number</span>;
     <span class="org-type">char</span> <span class="org-variable-name">first_name</span>[50];
     <span class="org-type">char</span> <span class="org-variable-name">last_name</span>[50];
     <span class="org-type">float</span> <span class="org-variable-name">balance</span>;
};

<span class="org-comment-delimiter">// </span><span class="org-comment">if you don't want to write "struct"</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">make an alias for type "struct account"</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> <span class="org-type">account</span> <span class="org-type">account_t</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">here we define a new type "account2"</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> <span class="org-type">_account2_t</span> {    <span class="org-comment-delimiter">// </span><span class="org-comment">_account2_t is not needed, but nice for very long structs</span>
     <span class="org-type">int</span> <span class="org-variable-name">account_number</span>;
     <span class="org-type">char</span> <span class="org-variable-name">first_name</span>[50];
     <span class="org-type">char</span> <span class="org-variable-name">last_name</span>[50];
     <span class="org-type">float</span> <span class="org-variable-name">balance</span>;
} <span class="org-type">account2_t</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">alias for an unnamed type (no forward declaration)</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> {
     <span class="org-type">int</span> <span class="org-variable-name">account_number</span>;
     <span class="org-type">char</span> <span class="org-variable-name">first_name</span>[50];
     <span class="org-type">char</span> <span class="org-variable-name">last_name</span>[50];
     <span class="org-type">float</span> <span class="org-variable-name">balance</span>;
} <span class="org-type">account3_t</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
    <span class="org-keyword">struct</span> <span class="org-type">account</span> <span class="org-variable-name">my_account</span> = {666, <span class="org-string">"Giovanni"</span>, <span class="org-string">"San Marzano"</span>, 0.3};
    printf(<span class="org-string">"%s\n"</span>, my_account.last_name);

    <span class="org-type">account_t</span> <span class="org-variable-name">my_other_account</span> = {666, <span class="org-string">"Franz"</span>, <span class="org-string">"Feingeist"</span>, 0.3};
    printf(<span class="org-string">"%s\n"</span>, my_account.last_name);

    <span class="org-type">account2_t</span> <span class="org-variable-name">my_account2</span> = {666, <span class="org-string">"Sepp"</span>, <span class="org-string">"Wuxacher"</span>, 0.3};
    printf(<span class="org-string">"%s\n"</span>, my_account2.last_name);

    <span class="org-type">account3_t</span> <span class="org-variable-name">my_account3</span> = {666, <span class="org-string">"Federico"</span>, <span class="org-string">"Malbona"</span>, 0.3};
    printf(<span class="org-string">"%s\n"</span>, my_account3.last_name);
}
</pre>
</div>

<p>
Usage:
</p>
<ul class="org-ul">
<li>indicate meaning of a type
typedef int km_per_hour;</li>
<li>making aliases</li>
</ul>
</div>
</div>
<div id="outline-container-orgf77d809" class="outline-4">
<h4 id="orgf77d809">struct</h4>
<div class="outline-text-4" id="text-orgf77d809">
<ul class="org-ul">
<li><p>
Using typedef with struct
Create a variable <code>struct account</code>:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">struct</span> <span class="org-type">account</span> {
   <span class="org-type">int</span> <span class="org-variable-name">account_number</span>;
   <span class="org-type">char</span> <span class="org-variable-name">first_name</span>[50];
   <span class="org-type">char</span> <span class="org-variable-name">last_name</span>[50];
   <span class="org-type">float</span> <span class="org-variable-name">balance</span>;
};

<span class="org-keyword">struct</span> <span class="org-type">account</span> <span class="org-variable-name">my_account</span> = {666, <span class="org-string">"Giovanni"</span>, <span class="org-string">"San Marzano"</span>, 0.3};
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> <span class="org-type">account</span> <span class="org-type">account_t</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">this is just an alias for "struct account"</span>
</pre>
</div>
<p>
If you put <code>typedef</code> in front you can save "struct" when declaring a new variable.
</p></li>
<li><p>
get size of struct member without variable
</p>
<pre class="example">
sizeof(((TEEProm::java_bytecode_t*)0)-&gt;signature));
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orge453c5e" class="outline-4">
<h4 id="orge453c5e">Strings</h4>
<div class="outline-text-4" id="text-orge453c5e">
</div>
<div id="outline-container-org2d3f444" class="outline-5">
<h5 id="org2d3f444">printf, sprintf</h5>
<div class="outline-text-5" id="text-org2d3f444">
<pre class="example">
printf 		outputs to the standard output stream (stdout)
fprintf 	   goes to a file handle (FILE*)
sprintf 	   goes to a buffer you allocated. (char*)
</pre>


<p>
Usage
</p>
<pre class="example">
%-/+&lt;width_of_string&gt;                 (-: left aligned, +: right aligned)
</pre>


<p>
Types of format specifiers:
</p>
<dl class="org-dl">
<dt><code>%X</code>    </dt><dd>hex number (uppercase)</dd>
<dt><code>%d</code>    </dt><dd>integer, decimal</dd>
<dt><code>%f</code>    </dt><dd>float</dd>
<dt><code>%s</code>    </dt><dd>string</dd>
</dl>

<p>
Examples:
</p>
<pre class="example" id="org510ac75">
%10s                '     Hello'
%-10s               'Hello     '
</pre>
</div>
</div>
</div>
<div id="outline-container-org3197505" class="outline-4">
<h4 id="org3197505">The Clockwise Spiral Rule</h4>
<div class="outline-text-4" id="text-org3197505">
<p>
Translate a declaration into English.
See: <a href="https://cdecl.org/">https://cdecl.org/</a>
</p>

<p>
What is text?
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">char</span> *<span class="org-variable-name">text</span>[10];

<span class="org-comment-delimiter">/*</span>
<span class="org-comment">                     +----3---+</span>
<span class="org-comment">                     |  +-1-+ |</span>
<span class="org-comment">                     |  ^   | |</span>
<span class="org-comment">                char *text[10];</span>
<span class="org-comment">                 ^   ^      | |</span>
<span class="org-comment">                 |   +--2---+ |</span>
<span class="org-comment">                 +------4-----+</span>

<span class="org-comment">1: text is</span>
<span class="org-comment">2: an array 10</span>
<span class="org-comment">3: of pointers</span>
<span class="org-comment">4: to char</span>

<span class="org-comment-delimiter">*/</span>

</pre>
</div>

<p>
What is fp?
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">char</span> *(*<span class="org-function-name">fp</span>)(<span class="org-type">int</span>, <span class="org-type">float</span>*);

<span class="org-comment-delimiter">/*</span>
<span class="org-comment">                     + ...</span>
<span class="org-comment">                     . +--3---+</span>
<span class="org-comment">                     . |+1+   |</span>
<span class="org-comment">                     . |^ |   |</span>
<span class="org-comment">                char *(*fp)(int, float*);</span>
<span class="org-comment">                     ^ ^  |   |</span>
<span class="org-comment">                     | +2-+   |</span>
<span class="org-comment">                     +4-------+</span>

<span class="org-comment">1: fp is</span>
<span class="org-comment">2: a pointer</span>
<span class="org-comment">3: to a function with int, float* parameters</span>
<span class="org-comment">4: returning a pointer to char</span>

<span class="org-comment-delimiter">*/</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfe5343c" class="outline-3">
<h3 id="orgfe5343c">Exception Handling</h3>
<div class="outline-text-3" id="text-orgfe5343c">
<dl class="org-dl">
<dt>__finally</dt><dd>executed in any way, regardless of try-block.</dd>
</dl>
</div>
<div id="outline-container-orgd8931a6" class="outline-4">
<h4 id="orgd8931a6">Exception Safety</h4>
<div class="outline-text-4" id="text-orgd8931a6">
<p>
Decreasing levels of safety:
</p>
<ul class="org-ul">
<li><code>No-throw guarantee</code> : Exceptions are handled internally and not visible outside.</li>
<li><code>Strong ES</code> : Failing operations have no side effects, i.e. they preserve the original state.</li>
<li><code>Basic ES</code> : There can be side effects, but all invariants are preserved and there are no resource leaks.</li>
<li><code>No ES</code> : No guarantees.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org864e44e" class="outline-3">
<h3 id="org864e44e">Functions</h3>
<div class="outline-text-3" id="text-org864e44e">
</div>
<div id="outline-container-orgea254c8" class="outline-4">
<h4 id="orgea254c8">Passing parameters in and out of functions</h4>
<div class="outline-text-4" id="text-orgea254c8">
<p>
Parameters to functions
</p>
<dl class="org-dl">
<dt>Pass By Reference</dt><dd><code>fun(int&amp; param)</code>    call: <code>fun(param)</code>
This gives a compile error when called with an rvalue: <code>myFun(3)</code>.</dd>
<dt>Pass By const Reference</dt><dd><code>fun(const int&amp; param)</code>
Allows to pass rvalues <code>myFun(3)</code> and lvalues <code>myFun(x)</code>, so we don't have to think
so hard when calling the function.</dd>
<dt>Pass By Address</dt><dd><code>fun(int* param)</code></dd>
<dt>Pass By Value</dt><dd><code>fun(int param)</code></dd>
<dt>Default Parameters</dt><dd><code>fun(int i=0)</code></dd>
</dl>

<p>
Return values:<br />
</p>

<p>
Objects can be returned by value of by reference.
</p>
<ul class="org-ul">
<li>Return By Value<br />
Inside the function a temp-object is created on the Stack.
When returning it this temp object is copied to the outside
object in the calling function.</li>
<li>Return By Reference<br />
The object is created on the Heap with <code>new</code> and a pointer is
returned to the calling function. The calling function has to
take care of destroying the object.</li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li>you cannot return (native) arrays by reference</li>
<li>return by value is slow for structs and large classes</li>
</ul>
</div>
<div id="outline-container-org1bb077f" class="outline-6">
<h6 id="org1bb077f">void as parameter</h6>
<div class="outline-text-6" id="text-org1bb077f">
<p>
void foo(void);
That is the correct way to say "no parameters" in C, and it also works in C++.
</p>

<p>
But:
</p>

<p>
void foo();
Means different things in C and C++! In C it means "could take any number of parameters of unknown types", and in C++ it means the same as foo(void).
</p>
</div>
</div>
</div>
<div id="outline-container-org78cb310" class="outline-4">
<h4 id="org78cb310">Callback Functions</h4>
<div class="outline-text-4" id="text-org78cb310">
<p>
Pass a function pointer and let the called function call you back via the pointer.
</p>
</div>
</div>

<div id="outline-container-orge5736aa" class="outline-4">
<h4 id="orge5736aa">Function Pointers</h4>
<div class="outline-text-4" id="text-orge5736aa">
</div>
<div id="outline-container-org617796f" class="outline-5">
<h5 id="org617796f">Classic function pointers</h5>
<div class="outline-text-5" id="text-org617796f">
<p>
<a href="http://www.newty.de/fpt/fpt.html">http://www.newty.de/fpt/fpt.html</a>
</p>

<p>
Declaration of a function pointer:
</p>
<ul class="org-ul">
<li>Write the normal function declaration and then put (* &#x2026;) around the function name.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">The point: The function name is already the variable name !</span>

<span class="org-keyword">typedef</span> <span class="org-type">int</span> (*<span class="org-type">myFunPtr_t</span>)(<span class="org-type">int</span> <span class="org-variable-name">i</span>);      <span class="org-comment-delimiter">// </span><span class="org-comment">this declares a function pointer Type</span>

<span class="org-type">myFunPtr_t</span> <span class="org-variable-name">ptr</span> = myActualFun;
ptr(1);

<span class="org-type">int</span> (*<span class="org-function-name">ptr2</span>)(<span class="org-type">int</span> <span class="org-variable-name">i</span>) = myActualFun;      <span class="org-comment-delimiter">// </span><span class="org-comment">without typedef</span>
ptr2(2);

</pre>
</div>

<p>
Purpose: Calling a function that will be determined at runtime.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">myFun</span>(){}
<span class="org-type">void</span> <span class="org-function-name">CallBackFun</span>(<span class="org-type">void</span> (*<span class="org-function-name">fun_ptr</span>)())
{
   fun_ptr();
}
<span class="org-type">void</span> (*<span class="org-function-name">fun_ptr</span>)() = myFun; <span class="org-comment-delimiter">// </span><span class="org-comment">assign</span>
fun_ptr();                 <span class="org-comment-delimiter">// </span><span class="org-comment">call</span>
CallBackFun(fun_ptr);

<span class="org-type">int</span> (*<span class="org-function-name">pt2Function</span>)(<span class="org-type">float</span>, <span class="org-type">char</span>, <span class="org-type">char</span>) = <span class="org-constant">NULL</span>;                        <span class="org-comment-delimiter">// </span><span class="org-comment">C</span>
<span class="org-type">int</span> (<span class="org-constant">TMyClass</span>::<span class="org-function-name">*pt2Member</span>)(<span class="org-type">float</span>, <span class="org-type">char</span>, <span class="org-type">char</span>) = <span class="org-constant">NULL</span>;                <span class="org-comment-delimiter">// </span><span class="org-comment">C++</span>
<span class="org-type">int</span> (<span class="org-constant">TMyClass</span>::<span class="org-function-name">*pt2ConstMember</span>)(<span class="org-type">float</span>, <span class="org-type">char</span>, <span class="org-type">char</span>) <span class="org-keyword">const</span> = <span class="org-constant">NULL</span>;     <span class="org-comment-delimiter">// </span><span class="org-comment">C++</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">define a new type</span>
<span class="org-keyword">typedef</span> <span class="org-type">void</span> (*<span class="org-type">myFun</span>)();  <span class="org-comment-delimiter">// </span><span class="org-comment">new type myFun</span>

<span class="org-type">myFun</span> <span class="org-variable-name">thisIsTheFunctionPointer</span>;
<span class="org-type">void</span> <span class="org-function-name">thisIsTheFunction</span>(){}

thisIsTheFunctionPointer = thisIsTheFunction();


</pre>
</div>

<p>
A function pointer is nothing else than a variable. Assign the address of a function to the pointer by assigning
the name of the function (fct_ptr = fct;).
</p>

<pre class="example">
int DoIt  (float a, char b, char c){ printf("DoIt\n");   return a+b+c; }
pt2Function = DoIt;  // can also use &amp; here
</pre>


<p>
read inside-out (Clockwise spiral rule):
</p>
<pre class="example">
void * (*foo)(int *); Translation: foo is a pointer to a function taking an int* argument and returning a void*
</pre>


<p>
Calling functions pointed to
</p>
<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-type">int</span> <span class="org-variable-name">result1</span> = pt2Function    (12, <span class="org-string">'a'</span>, <span class="org-string">'b'</span>);          <span class="org-comment-delimiter">// </span><span class="org-comment">C short way</span>
<span class="org-type">int</span> <span class="org-variable-name">result2</span> = (*pt2Function) (12, <span class="org-string">'a'</span>, <span class="org-string">'b'</span>);          <span class="org-comment-delimiter">// </span><span class="org-comment">C</span>

<span class="org-type">TMyClass</span> <span class="org-variable-name">instance1</span>;
<span class="org-type">int</span> <span class="org-variable-name">result3</span> = (instance1.*pt2Member)(12, <span class="org-string">'a'</span>, <span class="org-string">'b'</span>);   <span class="org-comment-delimiter">// </span><span class="org-comment">C++</span>
<span class="org-type">int</span> <span class="org-variable-name">result4</span> = (*<span class="org-keyword">this</span>.*pt2Member)(12, <span class="org-string">'a'</span>, <span class="org-string">'b'</span>);       <span class="org-comment-delimiter">// </span><span class="org-comment">C++ if this-pointer can be used</span>

<span class="org-type">TMyClass</span>* <span class="org-variable-name">instance2</span> = <span class="org-keyword">new</span> <span class="org-type">TMyClass</span>;
<span class="org-type">int</span> <span class="org-variable-name">result4</span> = (instance2-&gt;*pt2Member)(12, <span class="org-string">'a'</span>, <span class="org-string">'b'</span>);  <span class="org-comment-delimiter">// </span><span class="org-comment">C++, instance2 is a pointer</span>
<span class="org-keyword">delete</span> instance2;

</pre>
</div>

<p>
Array of function pointers:
</p>
<pre class="example">
void (* const g_pfnVectors[])(void) = {...};
</pre>


<p>
Note that the "[]" is always next to the name!
</p>

<p>
This is more readable when you declare an extra function pointer type:
</p>
<pre class="example">
typedef int16 (*native_func_ptr)(int32 param[], int32 *retval);
native_func_ptr sys_native_tbl[] = {};
</pre>
</div>
</div>

<div id="outline-container-org1f2a076" class="outline-5">
<h5 id="org1f2a076">Callable Objects</h5>
<div class="outline-text-5" id="text-org1f2a076">
<p>
Objects that can be called like functions.
</p>

<p>
Implementing <code>operator()</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-orgba33113" class="outline-4">
<h4 id="orgba33113">const</h4>
<div class="outline-text-4" id="text-orgba33113">
<ul class="org-ul">
<li>const at the end of a function declaration
means that the function is not allowed to
change any class members (except ones that are marked mutable).
So this use of const only makes sense, and is hence only allowed, for member functions.</li>
</ul>
</div>
</div>
<div id="outline-container-org121634c" class="outline-4">
<h4 id="org121634c">Lambdas, closures, functors</h4>
<div class="outline-text-4" id="text-org121634c">
</div>
<div id="outline-container-org6a0d321" class="outline-5">
<h5 id="org6a0d321">Functor</h5>
<div class="outline-text-5" id="text-org6a0d321">
<p>
An object that can be called like a function by overloading operator ().
Note that this is not the correct technical term, which doesn't exist in C++.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------------------------------------------------------</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment">   When does this make sense?</span>
<span class="org-comment">   - wannado somthing multiple times in a function, and only there (no namespace pollution)</span>
<span class="org-comment-delimiter">*/</span>
<span class="org-type">void</span> <span class="org-function-name">myfun</span>()
{
   <span class="org-keyword">struct</span> <span class="org-type">MyStruct</span>
   {
      <span class="org-function-name">MyStruct</span>(){}
      <span class="org-function-name">MyStruct</span>(<span class="org-type">int</span> <span class="org-variable-name">a</span>)
      {
         <span class="org-type">int</span> <span class="org-variable-name">i</span> = a;
         i = i;

      }
      <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">myfun</span>(<span class="org-type">int</span> <span class="org-variable-name">a</span>)
      {
         <span class="org-type">int</span> <span class="org-variable-name">i</span> = a;
         i = i;
      }
      <span class="org-type">void</span> <span class="org-keyword">operator</span> <span class="org-function-name">()</span>(<span class="org-type">int</span> <span class="org-variable-name">a</span>)
      {
         <span class="org-type">int</span> <span class="org-variable-name">i</span> = a;
         i = i;
      }
   };
   MyStruct(2);
   <span class="org-constant">MyStruct</span>::myfun(3);
   <span class="org-type">MyStruct</span> <span class="org-variable-name">f</span>;
   f(4);

}
</pre>
</div>
</div>
</div>
<div id="outline-container-org8f2b0ca" class="outline-5">
<h5 id="org8f2b0ca">Lambda and closure</h5>
<div class="outline-text-5" id="text-org8f2b0ca">
<p>
Function without name, i.e. write a function <code>void myfun(int i){return i;}</code> and replace the name with <code>[]</code>
</p>
<pre class="example">
[](int i){return i;}
</pre>


<p>
Notes:
</p>
<ul class="org-ul">
<li>The return value will be determined automatically (as long as the compiler can deduce it).</li>
<li>If multiple return statements occur, the return type must be specified (<code>[] myfun() -&gt; double {}</code>).</li>
</ul>

<p>
A <b>lambda expression</b> is an expression which evaluates to a function object.
</p>
</div>

<div id="outline-container-org48ed13d" class="outline-6">
<h6 id="org48ed13d">Capture clause</h6>
<div class="outline-text-6" id="text-org48ed13d">
<p>
Inside the brackets <code>[capture clause]</code> you can capture variables from the outer context. A <b>closure</b> us a record storing
the function plus it's environment.
</p>

<p>
A <b>closure</b> is any function object returned from evaluating a lambda expression.
</p>

<ul class="org-ul">
<li><code>[=]</code> : by value all</li>
<li><code>[&amp;]</code> : by reference all</li>
</ul>

<p>
A value can be captured
</p>
<ul class="org-ul">
<li>by const value <code>[x]</code>, <code>[=]</code></li>
<li>by value : <code>[x] mutable { return ++x; }</code></li>
<li>by (lvalue) reference: <code>[&amp;x]</code>, <code>[&amp;]</code></li>
</ul>

<p>
Generalized capture (C++14):
</p>
<ul class="org-ul">
<li><code>[var = 10]</code> : value init</li>
<li><code>[var = x]</code> : at evaluation time of the lambda expression</li>
<li><code>[&amp;var = x]</code> : reference init</li>
<li><code>[var = std::move(x)]</code> : after evaluation of the lambda expression the value of x is gone</li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li>There is no reason to capture global variables, they are visible anyway.</li>
</ul>
</div>
</div>
<div id="outline-container-org0cb8779" class="outline-6">
<h6 id="org0cb8779">Inside Classes</h6>
<div class="outline-text-6" id="text-org0cb8779">
<p>
Capture <code>this</code> to get access to the current object.
</p>
<ul class="org-ul">
<li><code>[this]</code> : (C++ 11), captures the this pointer by value, <code>this-&gt;m</code> will change the original value.</li>
<li><code>[self = *this]</code> : (C++14), capture the object by value, copy the current object, <code>self-&gt;m</code> will change the copy.</li>
<li><code>[*this]</code> : (C++ 17), capture the object by value, same as above but no new name needed.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org2e91e23" class="outline-4">
<h4 id="org2e91e23">Inline functions</h4>
<div class="outline-text-4" id="text-org2e91e23">
<p>
<a href="https://www.greenend.org.uk/rjk/tech/inline.html">https://www.greenend.org.uk/rjk/tech/inline.html</a>
</p>

<p>
<code>inline</code> is a somewhat misleading name.
It tells the linker to allow multiple definitions a function. It doesn't necessarily mean the function will
really be inlined (that's up to the compiler to decide), i.e. the function call is replaced by the actual code. Inline function code
can be placed in header files and there won't be a linker error.
</p>

<p>
Comments
</p>
<ul class="org-ul">
<li>It's a linkage directive like <code>extern</code> or <code>static</code> (See <a href="#org95deb5f">Storage Class Specifiers</a>).
<ul class="org-ul">
<li><code>static</code> : The linker makes sure a variable / function cannot be used in another translation unit.</li>
<li><code>extern</code> : The variable / function is used in this translation unit but it can be defined somewhere else.</li>
<li><code>inline</code> : The function will be defined in multiple translation units. The linker takes care that only one
definition is uses per translation unit.</li>
</ul></li>
<li>Templates are already <code>inline</code>. No point in declaring them inline.</li>
<li>The <code>inline</code> specifier for classes and variables has a different meaning (see <a href="#orgd2e6f14">Inline Variables</a>).</li>
</ul>
</div>

<div id="outline-container-org58b218e" class="outline-5">
<h5 id="org58b218e">Comments on inline in C</h5>
<div class="outline-text-5" id="text-org58b218e">
<p>
With the <code>C99</code>-standard inline functions are also available in <code>C</code>.
</p>

<p>
They should be used instead of Makro Definitions.
It is up to the compiler to ignore the inline specifier (e.g. when the function is too big).
An inline function is usually small, i.e. register writes and reads.
</p>

<p>
This is actually not that easy when having an inline function in different translation units.
The compiler compiles each module separately. So it doesn't really know about the code in the
other module where the actual code of the inline function is. The definition of the function
has to be duplicated in the modules where it is called.
</p>

<p>
You'll find 2 versions:
</p>
<ul class="org-ul">
<li><code>static inline fun();</code> for using the function in the same translation unit.</li>
<li><code>extern fun();</code> in .h file together with <code>inline fun();</code> in on .c file.</li>
</ul>

<p>
The definition of an inline function (i.e. the implementation) has to be in the same
module (translation unit). You might get a "undefined reference to" error from the linker if that's
not the case. That's why inline functions are often declared with storage class <code>static</code> forcing
internal linkage.
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">declared in a header file</span>
<span class="org-keyword">static</span> <span class="org-keyword">inline</span> <span class="org-type">void</span> <span class="org-function-name">LPSPI_WriteData</span>(<span class="org-type">LPSPI_Type</span> *<span class="org-variable-name">base</span>, <span class="org-type">uint32_t</span> <span class="org-variable-name">data</span>)
{
    base-&gt;TDR = data;
}
</pre>
</div>

<p>
Note:
</p>
<ul class="org-ul">
<li>The function definition will be imported via the header file.</li>
</ul>

<p>
If you declare the inline function <code>extern</code> in a header file you can use it like an ordinary function.
The storage class <code>extern</code> forces the function symbol to be visible globally.
</p>

<div class="org-src-container">
<pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">in the .h file</span>
<span class="org-keyword">extern</span> <span class="org-type">void</span> <span class="org-function-name">spi_WriteTxData</span>(<span class="org-type">byte</span> <span class="org-variable-name">data</span>);

<span class="org-comment-delimiter">// </span><span class="org-comment">in one .c file</span>
<span class="org-keyword">inline</span> <span class="org-type">void</span> <span class="org-function-name">spi_WriteTxData</span>(<span class="org-type">byte</span> <span class="org-variable-name">data</span>){}
</pre>
</div>

<p>
Notes:
</p>
<ul class="org-ul">
<li>GCC: with the option <code>finline-functions</code> you can motivate GCC to make all simple enough functions inline.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge8cb51e" class="outline-4">
<h4 id="orge8cb51e">Virtual Functions</h4>
<div class="outline-text-4" id="text-orge8cb51e">
<p>
With the virtual - Keyword you can choose to execute the child function in a polymorphic context,
i.e. the objects version of the method is called although it's called via a base class pointer.
In other words you can use functionality of a lower abstraction level.
</p>

<p>
Note: In Java all methods are by default virtual.
</p>

<p>
Why are C++ functions not virtual by default?
</p>
<ul class="org-ul">
<li>virtual function calls are slower</li>
<li>class objects need more storage</li>
<li>unlike Java inheritance in C++ is the exception, not the rule</li>
</ul>

<p>
When would you need virtual functions?
</p>

<p>
For the following classes you might wanna write code on the abstraction level of Shape
but of course draw the individual figures (Draw() in Shape should be purely virtual).
</p>

<p>
The Shape-level code is independent of the implementation in Line, etc., i.e. it doesn't
have to be changed if something changes on the Line-level.
</p>
<div class="PICTURE" id="orge709e7a">

<div id="org3bf0b88" class="figure">
<p><img src="resources/c++ virtual funtion.PNG" alt="c++ virtual funtion.PNG" />
</p>
</div>

</div>

<p>
also see <a href="#org146971e">The virtual method table</a>
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span>
{
  <span class="org-keyword">public</span>:
            <span class="org-type">void</span> <span class="org-function-name">Method1</span> ()  {  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Base::Method1"</span> &lt;&lt; <span class="org-constant">std</span>::endl;  }
    <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">Method2</span> ()  {  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Base::Method2"</span> &lt;&lt; <span class="org-constant">std</span>::endl;  }
};

<span class="org-keyword">class</span> <span class="org-type">Derived</span> : <span class="org-keyword">public</span> <span class="org-type">Base</span>
{
  <span class="org-keyword">public</span>:
    <span class="org-type">void</span> <span class="org-function-name">Method1</span> ()  {  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Derived::Method1"</span> &lt;&lt; <span class="org-constant">std</span>::endl;  }
    <span class="org-type">void</span> <span class="org-function-name">Method2</span> ()  {  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Derived::Method2"</span> &lt;&lt; <span class="org-constant">std</span>::endl;  }
};

<span class="org-comment-delimiter">// </span><span class="org-comment">now use polymorphy</span>
<span class="org-type">void</span> <span class="org-function-name">some_func</span>(<span class="org-type">Base</span> *<span class="org-variable-name">obj</span>)
{
  obj-&gt;Method1();
  obj-&gt;Method2();
}

<span class="org-comment-delimiter">// </span><span class="org-comment">call it in main</span>
<span class="org-type">Base</span> <span class="org-variable-name">obj1</span>;
<span class="org-type">Derived</span> <span class="org-variable-name">obj2</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">this is clear</span>
obj1.Method1();  <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Base::Method1</span>
obj1.Method2();  <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Base::Method2</span>
obj2.Method1();  <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Derived::Method1</span>
obj2.Method2();  <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Derived::Method2</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">now it gets interesting</span>
some_func(obj1); <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Base::Method1</span>
                 <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Base::Method2</span>
some_func(obj2); <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Base::Method1</span>
                 <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Derived::Method2 !!!</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">the same can be achieved with</span>
<span class="org-type">Base</span>* <span class="org-variable-name">obj</span> = <span class="org-keyword">new</span> <span class="org-type">Derived</span>();
obj.Method1(); <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Base::Method1</span>
obj.Method2(); <span class="org-comment-delimiter">// </span><span class="org-comment">prints: Derived::Method2</span>

</pre>
</div>
</div>

<div id="outline-container-org87df4f9" class="outline-5">
<h5 id="org87df4f9">Calling a virtual method in the base class.</h5>
<div class="outline-text-5" id="text-org87df4f9">
<p>
Normally with virtual the most derived version of the method is called.
</p>

<p>
~&gt; scope resolution operator <code>base.Base::Method();</code>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span>
{
<span class="org-keyword">public</span>:
   <span class="org-keyword">virtual</span> <span class="org-type">Print</span> {cout &lt;&lt; <span class="org-string">"Base"</span>;}
};

<span class="org-keyword">class</span> <span class="org-type">Child</span>
{
<span class="org-keyword">public</span>:
   <span class="org-keyword">virtual</span> <span class="org-type">Print</span> {cout &lt;&lt; <span class="org-string">"Child"</span>;}
};

<span class="org-type">Child</span> <span class="org-variable-name">child</span>;
<span class="org-type">Base</span> *<span class="org-variable-name">base</span> = child;

base.<span class="org-constant">Base</span>::Print();

<span class="org-comment-delimiter">// </span><span class="org-comment">how</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org146971e" class="outline-5">
<h5 id="org146971e">The virtual method table</h5>
<div class="outline-text-5" id="text-org146971e">
<p>
Links
</p>
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=Eaz0P_gJ9FE">https://www.youtube.com/watch?v=Eaz0P_gJ9FE</a></li>
</ul>

<p>
Lookup table for resolving function calls. For every class containing virtual methods (somewhere in the
inheritance path the compiler creates a virtual table at compile time. Each entry is a function pointer that points to the most
derived method.
</p>

<p>
The compiler also adds a hidden pointer <code>vt_ptr</code> to the virtual table. When an object is created <code>vt_ptr</code> points
to the virtual table of the class, e.g. TChild.
</p>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span>
{
<span class="org-keyword">public</span>:
    <span class="org-type">FunctionPointer</span> *<span class="org-variable-name">__vptr</span>;              <span class="org-comment-delimiter">// </span><span class="org-comment">normally hidden</span>
    <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">function1</span>() {};
    <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">function2</span>() {};
};

<span class="org-keyword">class</span> <span class="org-type">D1</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span>
{
<span class="org-keyword">public</span>:
    <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">function1</span>() {};       <span class="org-comment-delimiter">// </span><span class="org-comment">overwrites base version</span>
};

<span class="org-keyword">class</span> <span class="org-type">D2</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span>
{
<span class="org-keyword">public</span>:
    <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">function2</span>() {};       <span class="org-comment-delimiter">// </span><span class="org-comment">overwrites base version</span>
};
</pre>
</div>


<div id="org7c3eca2" class="figure">
<p><img src="resources/virtual method table.PNG" alt="virtual method table.PNG" />
</p>
</div>

<p>
Lets say we create a base pointer that points to an object of class D1 and call function1.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">D1</span> <span class="org-variable-name">objD1</span>;
<span class="org-type">Base</span> <span class="org-variable-name">objBase</span>;
<span class="org-type">Base</span> *<span class="org-variable-name">bptr</span>

bptr = &amp;objD1;
bptr-&gt;function1();   <span class="org-comment-delimiter">// </span><span class="org-comment">calls D1 version of function1</span>

bptr = &amp;objBase;
bptr-&gt;function1();   <span class="org-comment-delimiter">// </span><span class="org-comment">calls Base version of function1</span>

</pre>
</div>
</div>

<div id="outline-container-org3ecbb4a" class="outline-6">
<h6 id="org3ecbb4a">Recreate a vtable in C</h6>
<div class="outline-text-6" id="text-org3ecbb4a">
<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;stdio.h&gt;</span>

<span class="org-type">void</span> <span class="org-function-name">fun</span>(<span class="org-type">TheClass</span>* <span class="org-variable-name">this</span>, <span class="org-type">int</span> <span class="org-variable-name">i</span>)
{
   printf(<span class="org-string">"%s"</span>, this-&gt;name);
   printf(<span class="org-string">"%d"</span>, i);
}

<span class="org-type">void</span> <span class="org-function-name">moreFun</span>(<span class="org-type">TheClass</span>* <span class="org-variable-name">this</span>, <span class="org-type">char</span>* <span class="org-variable-name">c</span>)
{
   printf(<span class="org-string">"%s"</span>, this-&gt;name);
   printf(<span class="org-string">"%s"</span>, c);
}

<span class="org-comment-delimiter">// </span><span class="org-comment">------------------------------------------------------</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span>
{
   <span class="org-type">int</span> (*<span class="org-function-name">fun</span>)(<span class="org-type">TheClass</span>* <span class="org-variable-name">this</span>, <span class="org-type">int</span> <span class="org-variable-name">i</span>);
   <span class="org-type">void</span> (*<span class="org-function-name">moreFun</span>)(<span class="org-type">TheClass</span>* <span class="org-variable-name">this</span>, <span class="org-type">char</span>* <span class="org-variable-name">c</span>);
} <span class="org-type">VTable</span>;

<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span>
{
   <span class="org-type">VTable</span>* <span class="org-variable-name">pVTable</span>;
   <span class="org-type">int</span> <span class="org-variable-name">member</span>;

} <span class="org-type">BaseClass</span>;

<span class="org-type">void</span> <span class="org-function-name">init_BaseClass</span>(<span class="org-type">BaseClass</span>* <span class="org-variable-name">this</span>, <span class="org-type">int</span> <span class="org-variable-name">member</span>)
{
    this-&gt;pVTable-&gt;fun = &amp;fun;
    this-&gt;pVTable-&gt;moreFun = &amp;moreFun;
    this-&gt;member = member;
}
<span class="org-comment-delimiter">// </span><span class="org-comment">------------------------------------------------------</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span>
{
   <span class="org-type">BaseClass</span>* <span class="org-variable-name">base</span>;
   <span class="org-type">VTable</span>* <span class="org-variable-name">pVTable</span>;

   <span class="org-type">int</span> <span class="org-variable-name">myMember</span>;
} <span class="org-type">DerivedClass</span>;

<span class="org-type">void</span> <span class="org-function-name">init_DerivedClass</span>(<span class="org-type">DerivedClass</span>* <span class="org-variable-name">this</span>, <span class="org-type">int</span> <span class="org-variable-name">member</span>)
{
    this-&gt;pVTable-&gt;fun = &amp;fun;
    this-&gt;pVTable-&gt;moreFun = &amp;moreFun;
    this-&gt;member = member;
}
<span class="org-comment-delimiter">// </span><span class="org-comment">------------------------------------------------------</span>
<span class="org-type">int</span> <span class="org-function-name">main</span>(<span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> **<span class="org-variable-name">argv</span>)
{
    <span class="org-type">BaseClass</span> <span class="org-variable-name">object</span>;
    init_BaseClass(&amp;object, 66);

    (object.pVTable-&gt;fun)(&amp;object, i);

    <span class="org-keyword">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org3a0e0a6" class="outline-3">
<h3 id="org3a0e0a6">Idioms</h3>
<div class="outline-text-3" id="text-org3a0e0a6">
</div>
<div id="outline-container-orgbe0c95b" class="outline-4">
<h4 id="orgbe0c95b">Iterators</h4>
<div class="outline-text-4" id="text-orgbe0c95b">
<ul class="org-ul">
<li><p>
For-Loop
note the preincrement for optimization
</p>
<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-constant">std</span>::<span class="org-type">set</span>&lt;<span class="org-constant">std</span>::string&gt; <span class="org-variable-name">S</span>;
<span class="org-constant">std</span>::<span class="org-constant">set</span>&lt;<span class="org-constant">std</span>::string&gt;::<span class="org-type">iterator</span> <span class="org-variable-name">i</span>;

<span class="org-keyword">for</span> (i = S.begin(); i != S.end(); ++i)
    <span class="org-constant">std</span>::cout &lt;&lt; *i &lt;&lt; <span class="org-constant">std</span>::endl;

</pre>
</div></li>
</ul>

<p>
A note on pre-increment loop counters:
Let's implement <code>x++</code> and <code>++x</code> in C++: with a template:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span>&lt;<span class="org-keyword">class</span> <span class="org-type">T</span>&gt; <span class="org-type">T</span> <span class="org-function-name">pre</span>( <span class="org-type">T</span> &amp;<span class="org-variable-name">x</span> )
{
    <span class="org-keyword">return</span>  x = x + 1;
}

<span class="org-keyword">template</span>&lt;<span class="org-keyword">class</span> <span class="org-type">T</span>&gt; <span class="org-type">T</span> <span class="org-function-name">post</span>( <span class="org-type">T</span> &amp;<span class="org-variable-name">x</span> )
{
    <span class="org-type">T</span> <span class="org-variable-name">temp</span> = x;
    x = x + 1;
    <span class="org-keyword">return</span>  temp;
}

<span class="org-type">int</span> <span class="org-variable-name">a</span> = post (4);  <span class="org-comment-delimiter">// </span><span class="org-comment">a is 4</span>
<span class="org-type">int</span> <span class="org-variable-name">b</span> = pre (4);   <span class="org-comment-delimiter">// </span><span class="org-comment">a is 5</span>
</pre>
</div>

<p>
Post increment needs an additional temporary variable and an assignment.
If the post- and pre-increment operator is overloaded you cannot be sure
that the compiler will do the necessary optimization. So that is why the
above pre-increment loops are still used.
</p>
</div>
</div>
</div>

<div id="outline-container-org953754b" class="outline-3">
<h3 id="org953754b">Language</h3>
<div class="outline-text-3" id="text-org953754b">
<dl class="org-dl">
<dt>Expressions</dt><dd>Sequence of operators and operands (literals, variables, etc.) that can be evaluated.
<ul class="org-ul">
<li>Belong to a value category (lvalue, rvalue, glvalue, prvalue, xvalue) (e.g. for checking assignments).</li>
<li>Have a type (for type checking).</li>
</ul></dd>
</dl>
</div>

<div id="outline-container-org2eb9df5" class="outline-4">
<h4 id="org2eb9df5">Context Sensitivity</h4>
<div class="outline-text-4" id="text-org2eb9df5">
<p>
See also <a href="#org65258f9">Most vexing parse</a>.
</p>

<p>
C/C++ is not context free, i.e. doesn't have a context free grammar.
</p>
<ul class="org-ul">
<li><a href="https://eli.thegreenplace.net/2007/11/24/the-context-sensitivity-of-cs-grammar">https://eli.thegreenplace.net/2007/11/24/the-context-sensitivity-of-cs-grammar</a></li>
</ul>

<p>
This means a C expression cannot be parsed correctly without additional context information.
</p>

<p>
Task for the Lexer:<br />
How to figure out if an expression is an identifier or an alias?
typedef vs. identifier
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">What is this?</span>
<span class="org-type">T</span> * <span class="org-variable-name">x</span>;            <span class="org-comment-delimiter">// </span><span class="org-comment">a declaration of a T-pointer OR a void multiplication of T and x</span>

<span class="org-type">int</span> <span class="org-variable-name">foo</span>;          <span class="org-comment-delimiter">// </span><span class="org-comment">identifier</span>
typdef <span class="org-type">int</span> <span class="org-variable-name">foo</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">typedef name</span>

<span class="org-type">foo</span> <span class="org-variable-name">x</span>;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org75f6925" class="outline-3">
<h3 id="org75f6925">Libraries</h3>
<div class="outline-text-3" id="text-org75f6925">
</div>
<div id="outline-container-org8e0e44c" class="outline-4">
<h4 id="org8e0e44c">Dynamic Libraries</h4>
<div class="outline-text-4" id="text-org8e0e44c">
</div>
<div id="outline-container-org036257d" class="outline-5">
<h5 id="org036257d">DLL functions</h5>
<div class="outline-text-5" id="text-org036257d">
<ul class="org-ul">
<li>Declare function for dll export: __declspec(dllexport)</li>
<li>Declare function for dll import: __declspec(dllimport)</li>
</ul>

<p>
__declspec is a compiler specific attribute for specifying storage class information.
storage classes are e.g.: dllexport, dllimport
</p>

<p>
What does it tell the compiler?
function, object or data type
dllimport: It tells the compiler that a function, object or data type is defined in an external DLL.
dllexport: likewise
</p>
</div>
</div>
</div>
<div id="outline-container-org2f4842e" class="outline-4">
<h4 id="org2f4842e">Static Libraries</h4>
</div>
<div id="outline-container-orgc7fa875" class="outline-4">
<h4 id="orgc7fa875">Asio</h4>
<div class="outline-text-4" id="text-orgc7fa875">
<p>
Provides basic blocks for Networking, concurrency and other kinds of I/O.
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>header only framework</li>
<li>Boost and non-Boost versions</li>
</ul>
<pre class="example">
sudo apt install libboost-dev
sudo apt install libboost-system-dev
</pre>


<p>
All asio programs need an IO execution context: <code>io_context</code> or <code>thread_pool</code>.
Think of it as a platform specific interface.
The core asio classes always take a reference to an <code>io_context</code> as their first constructor argument.
Asio's asynchronous functionality means having a callback function that will be called when an
asynchronous operation completes.
</p>
</div>
</div>
</div>

<div id="outline-container-org7163f6d" class="outline-3">
<h3 id="org7163f6d">Mindmap</h3>
<div class="outline-text-3" id="text-org7163f6d">
<p>
<a href="https://app.wisemapping.com/c/maps/917723/public">https://app.wisemapping.com/c/maps/917723/public</a>
</p>
<iframe style="width:1200px;height:800px;border: 1px
solid black" src="https://app.wisemapping.com/c/maps/917723/embed?zoom=0.5"> </iframe>
</div>
</div>

<div id="outline-container-org90e0e1d" class="outline-3">
<h3 id="org90e0e1d">Operators</h3>
<div class="outline-text-3" id="text-org90e0e1d">
<ul class="org-ul">
<li><p>
a ? b : c
if expression a is true, evaluate expression b
if expression a is false, evaluate expression c
</p>

<p>
can be useful for conditional assignment, when if-else is not possible
ostream &amp;sout = name.empty() ? cout : fout;
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org25f0edd" class="outline-3">
<h3 id="org25f0edd">Preprocessor</h3>
<div class="outline-text-3" id="text-org25f0edd">
<dl class="org-dl">
<dt>##</dt><dd>token concatenation</dd>
<dt># stringizing</dt><dd><code>#define str(s) #s</code> convert argument to string constant, str(foo) will become "foo"</dd>
<dt>"string literals"</dt><dd>inside "" string literals there is no replacement</dd>

<dt>variadic macros</dt><dd><code>#define myprintf(...) printf(__VA_ARGS__)</code></dd>
</dl>
</div>
</div>

<div id="outline-container-orga85e2f2" class="outline-3">
<h3 id="orga85e2f2">Templates</h3>
<div class="outline-text-3" id="text-orga85e2f2">
<p>
Form without content.
Just put "template &lt;&#x2026;&gt;" in front of a function or class to make it more abstract.
</p>
</div>

<div id="outline-container-org927da51" class="outline-4">
<h4 id="org927da51">Function Templates</h4>
<div class="outline-text-4" id="text-org927da51">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span> &lt;<span class="org-keyword">typename</span> <span class="org-type">T</span>, <span class="org-keyword">typename</span> <span class="org-type">T1</span>, <span class="org-keyword">typename</span> <span class="org-type">T2</span>&gt;
<span class="org-type">T</span> <span class="org-function-name">myFunction</span>(<span class="org-type">T1</span> <span class="org-variable-name">a</span>, <span class="org-type">T2</span> <span class="org-variable-name">b</span>) {}
</pre>
</div>

<p>
Note: You can also use "class" instead of "typename", it doesn't really matter
(class might be misleading).
</p>
</div>
</div>

<div id="outline-container-org6b6d90b" class="outline-4">
<h4 id="org6b6d90b">Class Templates</h4>
<div class="outline-text-4" id="text-org6b6d90b">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span>&lt;<span class="org-keyword">typename</span> <span class="org-type">T</span>&gt;
<span class="org-keyword">class</span> <span class="org-type">Array</span>{...}
</pre>
</div>

<p>
T substitution parameter (similar to define macro)
</p>

<p>
Use: Type T is specified:
</p>
<ul class="org-ul">
<li>Array&lt;int&gt;</li>
<li>Array&lt;float&gt;</li>
</ul>
</div>
</div>

<div id="outline-container-org3b34ba0" class="outline-4">
<h4 id="org3b34ba0">Instantiation and Specialization</h4>
<div class="outline-text-4" id="text-org3b34ba0">
<p>
Replacing template parameters with concrete types is called <i>instantiation</i>.
</p>

<ul class="org-ul">
<li>Implicit Instantiation</li>
<li>Explicit Instantiation</li>
</ul>


<p>
Notes:
</p>
<ul class="org-ul">
<li>void is a valid template argument.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org044d084" class="outline-2">
<h2 id="org044d084">Libraries</h2>
<div class="outline-text-2" id="text-org044d084">
</div>
<div id="outline-container-orgce5f8e4" class="outline-3">
<h3 id="orgce5f8e4">Apache Qpid Proton</h3>
<div class="outline-text-3" id="text-orgce5f8e4">
<p>
AMQP messaging library.
</p>
</div>
</div>
<div id="outline-container-org5baac7e" class="outline-3">
<h3 id="org5baac7e">ZeroMQ</h3>
</div>
<div id="outline-container-orgf82149b" class="outline-3">
<h3 id="orgf82149b">gstreamer</h3>
</div>
<div id="outline-container-orge8168a7" class="outline-3">
<h3 id="orge8168a7">asio</h3>
</div>
<div id="outline-container-org3024cf2" class="outline-3">
<h3 id="org3024cf2">Freedesktop</h3>
<div class="outline-text-3" id="text-org3024cf2">
<ul class="org-ul">
<li><a href="https://www.freedesktop.org/wiki/Software/">https://www.freedesktop.org/wiki/Software/</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgaab6b5c" class="outline-3">
<h3 id="orgaab6b5c">nlohmann json</h3>
<div class="outline-text-3" id="text-orgaab6b5c">
<ul class="org-ul">
<li><a href="https://app.quicktype.io/">Quicktype Code Generator</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">json</span> <span class="org-variable-name">obj</span> = <span class="org-constant">json</span>::parse(msg-&gt;get_payload());

<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------------------------------------------</span>
<span class="org-keyword">inline</span> <span class="org-type">void</span> <span class="org-function-name">from_json</span>(<span class="org-keyword">const</span> <span class="org-type">json</span> &amp; <span class="org-variable-name">j</span>, <span class="org-constant">WCEP</span>::<span class="org-type">MessageHeader</span>&amp; <span class="org-variable-name">x</span>) {
    x.MessageType = j.at(<span class="org-string">"messageType"</span>).get&lt;<span class="org-constant">std</span>::string&gt;();
    x.MessageVersion = j.at(<span class="org-string">"messageVersion"</span>).get&lt;<span class="org-constant">std</span>::string&gt;();
    x.MessageId = j.at(<span class="org-string">"messageId"</span>).get&lt;<span class="org-constant">std</span>::string&gt;();
    x.CreatedAt = j.at(<span class="org-string">"createdAt"</span>).get&lt;<span class="org-constant">std</span>::string&gt;();
}
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------------------------------------------</span>
<span class="org-keyword">inline</span> <span class="org-type">void</span> <span class="org-function-name">to_json</span>(<span class="org-type">json</span> &amp; <span class="org-variable-name">j</span>, <span class="org-keyword">const</span> <span class="org-constant">WCEP</span>::<span class="org-type">MessageHeader</span> &amp; <span class="org-variable-name">x</span>) {
    j = <span class="org-constant">json</span>::object();
    j[<span class="org-string">"messageType"</span>] = x.MessageType;
    j[<span class="org-string">"messageVersion"</span>] = x.MessageVersion;
    j[<span class="org-string">"messageId"</span>] = x.MessageId;
    j[<span class="org-string">"createdAt"</span>] = x.CreatedAt;
}

<span class="org-comment-delimiter">// </span><span class="org-comment">if you provide to_json and from_json in the same namespace, this is possible:</span>
<span class="org-type">MessageHeader</span> <span class="org-variable-name">msg_header</span>{<span class="org-string">"type"</span>, <span class="org-string">"version"</span>, <span class="org-string">"id"</span>, <span class="org-string">"created_at"</span>};
<span class="org-type">json</span> <span class="org-variable-name">j</span> = msg_header;
<span class="org-keyword">auto</span> <span class="org-variable-name">header</span> = j.get&lt;<span class="org-type">MessageHeader</span>&gt;();

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge1bc95f" class="outline-2">
<h2 id="orge1bc95f">Database</h2>
<div class="outline-text-2" id="text-orge1bc95f">
<p>
Relational Database Management Systems (RDBMS).
</p>
</div>

<div id="outline-container-org25c3226" class="outline-3">
<h3 id="org25c3226">Relational Database</h3>
<div class="outline-text-3" id="text-org25c3226">
<p>
Divided into tables. Those tables are related to each other.
</p>

<p>
Examples:
Music Collection:
</p>
<ul class="org-ul">
<li>Interpret Table</li>
<li>Album Table</li>
<li>Songs Table</li>
<li>Genre Table</li>
</ul>

<p>
Customer Database:
Stock Database:
</p>
<ul class="org-ul">
<li></li>
</ul>
</div>
</div>

<div id="outline-container-org12306b8" class="outline-3">
<h3 id="org12306b8">MySQL</h3>
<div class="outline-text-3" id="text-org12306b8">
<p>
Installation:
</p>
<pre class="example">
sudo apt-get install mysql-server
</pre>


<p>
Access MySQL:
</p>
<pre class="example">
mysql -u root -p
</pre>


<p>
Now you can type SQL-commands (don't forget ";"), e.g.
</p>

<pre class="example">
SHOW DATABASES;
CREATE DATABASE database name;
USE nextcloud;
SHOW TABLES;
SELECT * FROM oc_users;
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8b3978" class="outline-2">
<h2 id="orga8b3978">Eclipse IDE</h2>
<div class="outline-text-2" id="text-orga8b3978">
</div>
<div id="outline-container-org09dff97" class="outline-3">
<h3 id="org09dff97">ARM Toolchain</h3>
<div class="outline-text-3" id="text-org09dff97">
<p>
Compiler: <code>arm-none-eabi-gcc</code>
</p>
</div>
</div>
<div id="outline-container-org809369a" class="outline-3">
<h3 id="org809369a">MCUXpresso IDE</h3>
<div class="outline-text-3" id="text-org809369a">
<p>
Extension of Eclipse CDT (C/C++ Development Tooling).
</p>

<ul class="org-ul">
<li>compiler location: <code>C:\nxp\MCUXpressoIDE_10.3.1_2233\ide\plugins\com.nxp.mcuxpresso.tools.win32_10.3.0.201811011841\tools\bin\arm-none-eabi-gcc.exe</code></li>
<li>SDK dependent data is in the <code>packages_support</code> folder.</li>
<li>project file <code>.cproject</code></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgfda7d49" class="outline-2">
<h2 id="orgfda7d49">Embarcadero</h2>
<div class="outline-text-2" id="text-orgfda7d49">
</div>
<div id="outline-container-org5e9a380" class="outline-3">
<h3 id="org5e9a380">General Things</h3>
<div class="outline-text-3" id="text-org5e9a380">
<p>
A component is any object that descends from the TComponent class within the Visual Component Library. Most components are
visual user interface controls.
</p>

<p>
Ownership is propagated throughout the VCL. There are two properties that support ownership: Owner (up) and Components (down).
Owned components are destroyed when the owner is destroyed.
</p>

<p>
Parenthood takes care of component visibility.
</p>

<p>
Notification
</p>

<ul class="org-ul">
<li>All objects are created on the heap. Not static instances.<br />
You cannot create VCL-Objects locally!</li>
<li>You are not responsible for allocating or destroying memory.<br />
The owner of the control destroys the object (automatically, but objects can be on their own)</li>
</ul>
</div>

<div id="outline-container-org2b7363e" class="outline-4">
<h4 id="org2b7363e">How does it stick together?</h4>
<div class="outline-text-4" id="text-org2b7363e">
<p>
Forms are created and related to Application in <a href="#org5f34c7e">_tWinMain</a>
</p>
</div>

<div id="outline-container-orgf41941e" class="outline-5">
<h5 id="orgf41941e">Parents and Children (and Owners)</h5>
<div class="outline-text-5" id="text-orgf41941e">
<ul class="org-ul">
<li>Owner: memory allocation</li>
<li>Parent: where to draw it</li>
</ul>

<p>
When you create a component you assign the owner:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">TJavaSourceFrame</span>* <span class="org-variable-name">JavaSourceFrame</span> = <span class="org-keyword">new</span> <span class="org-type">TJavaSourceFrame</span>(NewTab); <span class="org-comment-delimiter">//</span><span class="org-comment">NewTab is the owner of JavaSourceFrame</span>
</pre>
</div>

<p>
MainFrame is the ultimate parent.<br />
Child-&gt;Parent = Papa;   this connects Object Child with Objcet Papa
</p>
</div>
</div>


<div id="outline-container-org5f34c7e" class="outline-5">
<h5 id="org5f34c7e">_tWinMain</h5>
<div class="outline-text-5" id="text-org5f34c7e">
<p>
tell the App, which Forms there are:
</p>

<p>
give it access with &amp;MForm
Application-&gt;CreateForm(__classid(TMForm), &amp;MForm);
</p>

<p>
__classid() operator: tell App which Class corresponds to MForm
</p>

<p>
USEFORM (NS) Macro  : specify the source file
</p>



<p>
Main Form: class TMForm -&gt; TAdvToolBarForm
</p>

<p>
Application-&gt;MainForm
</p>
</div>
</div>
<div id="outline-container-orgcc83040" class="outline-5">
<h5 id="orgcc83040">Modal Form</h5>
<div class="outline-text-5" id="text-orgcc83040">
<p>
child form, subordinate to main form
main window can't be used
</p>
</div>
</div>
</div>

<div id="outline-container-org4d23ee9" class="outline-4">
<h4 id="org4d23ee9">VCL Class Hierarchy</h4>
<div class="outline-text-4" id="text-org4d23ee9">
<p>
TObject (highest Class)
</p>
<ul class="org-ul">
<li>Mathods
<ul class="org-ul">
<li>Destroy()</li>
<li>Free()</li>
</ul></li>
</ul>

<p>
TComponent (&lt;- TPersistent &lt;- TObject)
</p>
<ul class="org-ul">
<li>Properties
<ul class="org-ul">
<li>Name</li>
</ul></li>
</ul>

<p>
TControl (&lt;- TComponent &lt;- TPersistent &lt;- TObject)
</p>
<ul class="org-ul">
<li>Properties
<ul class="org-ul">
<li>Enabled: Controls whether the control responds to mouse, keyboard, and timer events.</li>
<li>Visible</li>
<li>Parent</li>
<li>Owner</li>
<li>Tag: int for custom use</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org7a06957" class="outline-5">
<h5 id="org7a06957">System</h5>
<div class="outline-text-5" id="text-org7a06957">
</div>
<div id="outline-container-orgb7caf90" class="outline-6">
<h6 id="orgb7caf90">Sets</h6>
<div class="outline-text-6" id="text-orgb7caf90">
<p>
add elements 			&lt;&lt;
remove elements 		&gt;&gt;
</p>

<p>
element of relation
</p>
<pre class="example">
myset.contains();
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org860c94c" class="outline-4">
<h4 id="org860c94c">Exceptions</h4>
<div class="outline-text-4" id="text-org860c94c">
<p>
Application.OnException - Handler
</p>
</div>
</div>
<div id="outline-container-org57f8f80" class="outline-4">
<h4 id="org57f8f80">Messages</h4>
<div class="outline-text-4" id="text-org57f8f80">
<p>
The VCL provides a message loop inside the application object. The loop is started with Application.Run.
</p>

<p>
Constantly called is:
</p>
<pre class="example">
TApplication.WndProc
</pre>


<p>
OnMessage Event of the application<br />
The Application.OnMessage event is the first opportunity for a programmer to intercept a key message.
</p>

<pre class="example">
TApplication.Run -&gt; HandleMessage -&gt; ProcessMessage -&gt; DispatchMessageW
</pre>
</div>

<div id="outline-container-org5d253f4" class="outline-5">
<h5 id="org5d253f4">Keyboard Messages</h5>
<div class="outline-text-5" id="text-org5d253f4">
<p>
The keystroke messages are WM_KEYDOWN, WM_KEYUP, WM_SYSKEYDOWN, and WM_SYSKEYUP.
The virtual-key code is in the message's wParam parameter.
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">case</span> WM_KEYDOWN:
    <span class="org-keyword">switch</span> (wParam)
    {
        <span class="org-keyword">case</span> VK_LEFT:
            <span class="org-comment-delimiter">// </span><span class="org-comment">Process the LEFT ARROW key.</span>
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> VK_HOME:
            <span class="org-comment-delimiter">// </span><span class="org-comment">Process the HOME key.</span>
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> VK_END:
            <span class="org-comment-delimiter">// </span><span class="org-comment">Process the END key.</span>
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> VK_INSERT:
            <span class="org-comment-delimiter">// </span><span class="org-comment">Process the INS key.</span>
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> VK_DELETE:
            <span class="org-comment-delimiter">// </span><span class="org-comment">Process the DEL key.</span>
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> VK_F2:
            <span class="org-comment-delimiter">// </span><span class="org-comment">Process the F2 key.</span>
            <span class="org-keyword">break</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Process other non-character keystrokes.</span>
        <span class="org-keyword">default</span>:
            <span class="org-keyword">break</span>;
    }
</pre>
</div>

<p>
Check for key messages:
</p>
<pre class="example">
IsKeyMsg -&gt; SendMessageA -&gt; StdWndProc -&gt; CALL ... -&gt; TWinControl.MainWndProc -&gt; TWinControl.WndProc -&gt;
TControl.WndProc : Dispatch(Message) -&gt; CALL GetDynaMethod -&gt; TWinControl.CNKeyDown -&gt; TWinControl.IsMenuKey
-&gt; Form.IsShortCut(Message)
</pre>

<p>
StdWndProc is the common entry point for message dispatching from the API side into the VCL.
</p>

<div class="org-src-container">
<pre class="src src-pascal">
<span class="org-keyword">procedure</span> <span class="org-function-name">TWinControl</span>.MainWndProc(<span class="org-type">var</span> Message: TMessage);
<span class="org-keyword">begin</span>
  try
    try
      WindowProc(Message);
    finally
      FreeDeviceContexts;
      FreeMemoryContexts;
    <span class="org-keyword">end</span>;
  except
    Application.HandleException(Self);
  <span class="org-keyword">end</span>;
<span class="org-keyword">end</span>;

</pre>
</div>

<p>
The WindowProc property can be used for VCL-style subclassing of controls. Subclassing, in API lingo, is a method to tap
into a controls message flow by replacing its window function with one written by the programmer. This way one can change
a controls behavior without needing access to the controls source code.  It is of utmost importance to pass any messages
not processed by the replacement window function to the original it replaced.
IsKeyMsg sends the key down as a CN_KEYDOWN message to the control with focus.
</p>

<p>
VCL sends key notification messages (CN_*) to a control (not necessarily the one having the focus) before the actual key message (WM_*) is delivered.
</p>

<p>
DispatchShortCut passes Message to ActionList:
</p>
<pre class="example">
... -&gt; TWinControl.MainWndProc -&gt; TWinControl.IsMenuKey -&gt; (Vcl.Forms) TCustomForm.IsShortCut : DispatchShortCut(Component) -&gt; TContainedAction.HandleShortCut
-&gt; TCustomAction.Execute -&gt; OnExecutAction - Event Handler
</pre>


<p>
Quick way to <b>IsShortCut</b>
</p>
<pre class="example">
Application-&gt;Run(); -&gt; (Vcl.Forms) TCustomForm.IsShortCut
</pre>
</div>
</div>

<div id="outline-container-orgc823d55" class="outline-5">
<h5 id="orgc823d55">Notes</h5>
<div class="outline-text-5" id="text-orgc823d55">
<ul class="org-ul">
<li>WM_&#x2026; Messages are defined in winuser.h</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org148d0bf" class="outline-4">
<h4 id="org148d0bf">IDE System</h4>
<div class="outline-text-4" id="text-org148d0bf">
<ul class="org-ul">
<li><code>C:\Users\Public\Documents\RAD Studio\12.0</code>
Contains bpl-library files etc. Installed packages go here.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgda1739d" class="outline-3">
<h3 id="orgda1739d">Strings</h3>
<div class="outline-text-3" id="text-orgda1739d">
</div>
<div id="outline-container-org60d194d" class="outline-4">
<h4 id="org60d194d">TStrings</h4>
<div class="outline-text-4" id="text-org60d194d">
<p>
TStrings is abstract, use TStringList:
FSelectedFiles = new TStringList;
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">TStrings</span> *<span class="org-variable-name">files</span> = DockSiteJavaJDF-&gt;DroppedFiles;
<span class="org-type">TStringList</span> *<span class="org-variable-name">files_copy</span> = <span class="org-keyword">new</span> <span class="org-type">TStringList</span>();

<span class="org-comment-delimiter">// </span><span class="org-comment">loop though files to add</span>
<span class="org-keyword">for</span> (<span class="org-type">int</span> <span class="org-variable-name">new_file_idx</span> = 0; new_file_idx &lt; files-&gt;Count; new_file_idx++)
{
   AddJavaFile(files-&gt;Strings[new_file_idx]);
   files_copy-&gt;Add(files-&gt;Strings[new_file_idx]);
}

files-&gt;Add(unicode_string);
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf3a1a9b" class="outline-4">
<h4 id="orgf3a1a9b">some useful string functions</h4>
<div class="outline-text-4" id="text-orgf3a1a9b">
<ul class="org-ul">
<li>str.length()</li>
<li>str.substring(begin, end)</li>
</ul>
</div>

<div id="outline-container-org6317dbb" class="outline-5">
<h5 id="org6317dbb">Unicode</h5>
<div class="outline-text-5" id="text-org6317dbb">
<ul class="org-ul">
<li>str.SubString(index, count)</li>
<li>str.pos("UnicodeString")
 Returns character index at which specified substring begins. Starts with 1
useful as InStr-Fct.</li>
<li>str.IsEmpty()</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb56f486" class="outline-4">
<h4 id="orgb56f486">String conversion</h4>
<div class="outline-text-4" id="text-orgb56f486">
</div>
<div id="outline-container-org66bf8cc" class="outline-5">
<h5 id="org66bf8cc">Convert wchar_t to char</h5>
<div class="outline-text-5" id="text-org66bf8cc">
<p>
?
</p>
</div>
</div>
<div id="outline-container-orga45a041" class="outline-5">
<h5 id="orga45a041">Convert char to wchar_t</h5>
<div class="outline-text-5" id="text-orga45a041">
<p>
size_t newsize = strlen(Temp) + 1;
wchar_t * wTemp = new wchar_t[newsize];
mbstowcs(wTemp, Temp, newsize);
</p>
</div>
</div>
<div id="outline-container-org7864c04" class="outline-5">
<h5 id="org7864c04">Convert Unicode - Ansistring</h5>
<div class="outline-text-5" id="text-org7864c04">
<p>
AnsiString(StartDate).c_str()        convert from UnicodeString to string
</p>

<p>
string s = "\"15.10.2014\"";
UnicodeString strDate;
strDate = UnicodeString(s.c_str());  convert from string to UnicodeString
</p>
</div>
</div>

<div id="outline-container-org0873daf" class="outline-5">
<h5 id="org0873daf">Convert std::string to/from UnicodeString</h5>
<div class="outline-text-5" id="text-org0873daf">
<p>
UnicodeString u_str;
std::wstring str;
str = u_str.c_str();
Note: std::string is std::basic_string&lt;char&gt;
</p>

<p>
UnicodeString str(str.c_str());
</p>
</div>
</div>
<div id="outline-container-org394fa96" class="outline-5">
<h5 id="org394fa96">Convert int to Unicode String</h5>
<div class="outline-text-5" id="text-org394fa96">
<p>
static_cast&lt;UnicodeString&gt;(dynamic_panel_count)
</p>
</div>
</div>
</div>
<div id="outline-container-org9cb12be" class="outline-4">
<h4 id="org9cb12be">Extract Substring</h4>
</div>
<div id="outline-container-org14f91c3" class="outline-4">
<h4 id="org14f91c3">Compare 2 Strings</h4>
<div class="outline-text-4" id="text-org14f91c3">
<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Function: compare_String_NoCase</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">String Comparison; not case sensitive.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">return: true: second ("b") &gt; first ("a"), false: first &lt; second</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Author: http://www.cplusplus.com/</span>
<span class="org-type">bool</span> <span class="org-function-name">compare_String_NoCase</span> (<span class="org-type">string</span> <span class="org-variable-name">first</span>, <span class="org-type">string</span> <span class="org-variable-name">second</span>)
{
  <span class="org-type">ULONG</span> <span class="org-variable-name">i</span>=0;
  <span class="org-keyword">while</span> ((i &lt; first.length()) &amp;&amp; (i &lt; second.length()))
  {
    <span class="org-keyword">if</span> (tolower (first[i]) &lt; tolower (second[i])) <span class="org-keyword">return</span> <span class="org-constant">true</span>;
    <span class="org-keyword">else</span> <span class="org-keyword">if</span> (tolower (first[i]) &gt; tolower (second[i])) <span class="org-keyword">return</span> <span class="org-constant">false</span>;
    i++;
  }

  <span class="org-keyword">if</span> (first.length() &lt; second.length()) <span class="org-keyword">return</span> <span class="org-constant">true</span>;
  <span class="org-keyword">else</span> <span class="org-keyword">return</span> <span class="org-constant">false</span>;
}

</pre>
</div>
</div>
</div>

<div id="outline-container-orgdd28479" class="outline-4">
<h4 id="orgdd28479">Split String</h4>
<div class="outline-text-4" id="text-orgdd28479">
<p>
no function, use mystring.Pos("_") and SubString for UnicodeString
</p>
</div>
</div>
</div>

<div id="outline-container-orgdb7e04f" class="outline-3">
<h3 id="orgdb7e04f">Get Size of Components</h3>
<div class="outline-text-3" id="text-orgdb7e04f">
<pre class="example">
int scrollbar_with = GetSystemMetrics(SM_CXVSCROLL);
</pre>
</div>
</div>

<div id="outline-container-org473bf0b" class="outline-3">
<h3 id="org473bf0b">Windows API</h3>
<div class="outline-text-3" id="text-org473bf0b">
</div>
<div id="outline-container-orgcba2c01" class="outline-4">
<h4 id="orgcba2c01">Windows Messages</h4>
<div class="outline-text-4" id="text-orgcba2c01">
<p>
WndProc method screens messages before passing them to the Dispatch method.
To handle messages yourself you can overwrite the virtual method WndProc.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-variable-name">__fastcall</span> <span class="org-constant">TMyControl</span>::WndProc(TMessage&amp; Message)
{
   <span class="org-comment-delimiter">// </span><span class="org-comment">tests to determine whether to continue processing</span>
<span class="org-keyword">if</span>(Message.Msg != WM_LBUTTONDOWN)

}
</pre>
</div>
</div>

<div id="outline-container-orgd8fe043" class="outline-5">
<h5 id="orgd8fe043">Message Dispatching System</h5>
<div class="outline-text-5" id="text-orgd8fe043">
<p>
Translates Windows messages into method calls. Messages can have OnMessage-Handlers (?).
</p>

<p>
Call Trace:
</p>
<pre class="example">
Application.Run() -&gt; Application.HandleMessage() -&gt; Application.ProcessMessage()
-&gt; TranslateMessage(Msg)
-&gt; DispatchMessageW(Msg) -&gt; StdWndProc
</pre>


<p>
(msdn):
You create a message loop by using the GetMessage and DispatchMessage functions. If your
application must obtain character input from the user, include the TranslateMessage function in the loop.
TranslateMessage translates virtual-key messages into character messages.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org117d550" class="outline-3">
<h3 id="org117d550">Compiler</h3>
<div class="outline-text-3" id="text-org117d550">
</div>
<div id="outline-container-orgfb2f3a7" class="outline-4">
<h4 id="orgfb2f3a7">Compiler Options</h4>
<div class="outline-text-4" id="text-orgfb2f3a7">
<p>
unselect C++ Linker Option: Link with Dynamic RTL
</p>
<ol class="org-ol">
<li>Project Options -&gt; C++ Linker  (All Configurations - All platforms)</li>
<li>Packages -&gt; Runtime Packages (Link &#x2026; = false)</li>
</ol>
</div>
</div>
<div id="outline-container-org65040c3" class="outline-4">
<h4 id="org65040c3">Keyword Extensions</h4>
<div class="outline-text-4" id="text-org65040c3">
<ul class="org-ul">
<li>__fastcall
<ul class="org-ul">
<li>parameters to be passed in registers</li>
<li>All VCL class member functions and form class member functions must use the __fastcall convention.</li>
</ul></li>
<li>__published</li>
<li><p>
__property
</p>

<p>
__property &lt;Type&gt; &lt;Name&gt;[index] = {&lt;property attributes list&gt;}
</p>

<p>
&lt;property attributes&gt; ::= read | write | implements | &#x2026;
</p>

<p>
What for?
</p>
<ul class="org-ul">
<li>Provides a public interface for a private variable, i. e. give access to data while still protecting it.</li>
<li>Properties are shown in the Object Inspector.</li>
</ul>

<p>
Example:
</p>
<pre class="example">
public: __property int  X = { read=readX, write=writeX };
</pre>


<p>
property X can be read or written through the member functions readX, writeX
</p>

<p>
declares an attribute of a class<br />
adds significantly more functionality beyond just examining and changing the value of the attribute<br />
there are no restrictions on how you implement the property within the class itself<br />
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org3849afc" class="outline-4">
<h4 id="org3849afc">Preprocessor: #pragma</h4>
<div class="outline-text-4" id="text-org3849afc">
<dl class="org-dl">
<dt>#pragma link</dt><dd>Instructs the linker to link the specified file into an executable file.</dd>
<dt>#pragma hdrstop</dt><dd>Terminates the list of header files for precompilation.
Headers after "hdrstop" will not be precompiled (save disc space),
Use common headers before pragma, specific ones after.
Can be used only in .cpp files (does nothing in .h files).</dd>
</dl>
</div>
</div>

<div id="outline-container-orgd648395" class="outline-4">
<h4 id="orgd648395">Java Source to C Code Translator</h4>
<div class="outline-text-4" id="text-orgd648395">
<p>
<a href="http://www.ivmaisoft.com/jcgo/demos.htm">http://www.ivmaisoft.com/jcgo/demos.htm</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orgadc6a64" class="outline-3">
<h3 id="orgadc6a64">RTTI (Run Time Type Information)</h3>
<div class="outline-text-3" id="text-orgadc6a64">
<p>
You can find out virtually anything you want about these published properties
of a class at runtime merely by asking through one or more of the functions in
the TypInfo unit.
</p>
</div>
</div>

<div id="outline-container-org1cb5f1c" class="outline-3">
<h3 id="org1cb5f1c">Data Structures</h3>
<div class="outline-text-3" id="text-org1cb5f1c">
</div>
<div id="outline-container-org620bdb2" class="outline-4">
<h4 id="org620bdb2">Sets</h4>
<div class="outline-text-4" id="text-org620bdb2">
<ul class="org-ul">
<li>myset.Contains();</li>
<li>myset &lt;&lt; 'a' &lt;&lt; 'b';</li>
<li>myset &gt;&gt; 'a';</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org3caeabc" class="outline-3">
<h3 id="org3caeabc">Callback Functions</h3>
<div class="outline-text-3" id="text-org3caeabc">
<p>
Function Pointer: (typical notify Event)
typedef void __fastcall (__closure <b>TNotifyEvent)(System::TObject</b> Sender);
</p>

<p>
e.g. font_items.h
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">declaration of function pointer</span>
<span class="org-keyword">typedef</span> <span class="org-type">void</span> <span class="org-type">__fastcall</span> (<span class="org-type">__closure</span> *<span class="org-variable-name">NotifyShowProgress</span>)(<span class="org-type">UnicodeString</span> <span class="org-variable-name">msg</span>, <span class="org-type">int</span> <span class="org-variable-name">total</span>, <span class="org-type">int</span> <span class="org-variable-name">processed</span>);

<span class="org-comment-delimiter">// </span><span class="org-comment">create the pointer</span>
<span class="org-type">NotifyShowProgress</span> <span class="org-variable-name">FOnShowProgress</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3be9216" class="outline-3">
<h3 id="org3be9216">Tipps and Tricks</h3>
<div class="outline-text-3" id="text-org3be9216">
</div>
<div id="outline-container-org1b2c9d1" class="outline-4">
<h4 id="org1b2c9d1">Application Icon MainForm &amp; Windows Taskbar</h4>
<div class="outline-text-4" id="text-org1b2c9d1">
<p>
Project-&gt;Options-&gt;Application
</p>

<p>
Taskbar icon not shown:
</p>
<ul class="org-ul">
<li>cd %userprofile%\appdata\local</li>
<li>del iconcache.db /a</li>
</ul>
</div>
</div>
<div id="outline-container-org6ac663c" class="outline-4">
<h4 id="org6ac663c">Align Control with alClient</h4>
</div>
<div id="outline-container-org4baa2a2" class="outline-4">
<h4 id="org4baa2a2">Add Units in Folders: Add Unit, then Save and select Folder</h4>
</div>
</div>
<div id="outline-container-org0ce9598" class="outline-3">
<h3 id="org0ce9598">Components etc.</h3>
<div class="outline-text-3" id="text-org0ce9598">
</div>
<div id="outline-container-orgd3c6e82" class="outline-4">
<h4 id="orgd3c6e82">Mouse, Keyboard, Shortcuts, Input</h4>
<div class="outline-text-4" id="text-orgd3c6e82">
<ul class="org-ul">
<li>Mouse    global Object (TMouse)</li>
</ul>
</div>

<div id="outline-container-orgb434240" class="outline-5">
<h5 id="orgb434240">Shortcuts</h5>
<div class="outline-text-5" id="text-orgb434240">
<ul class="org-ul">
<li>with Actions: use ActionManager <br />
This also works for Buttons.</li>

<li><p>
classic Method (only for Menu Items)
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">TMenuItem</span> *<span class="org-variable-name">Item</span>-&gt;ShortCut = ShortCut(Word(<span class="org-string">'C'</span>), TShiftState() &lt;&lt; ssCtrl); <span class="org-comment-delimiter">//</span><span class="org-comment">ctrl+c</span>
</pre>
</div></li>
</ul>



<p>
see: <a href="#orge77895c">Articles, Docu etc.</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgc8610ec" class="outline-4">
<h4 id="orgc8610ec">Components</h4>
<div class="outline-text-4" id="text-orgc8610ec">
</div>
<div id="outline-container-org5fb0e3c" class="outline-5">
<h5 id="org5fb0e3c">Finding Components</h5>
<div class="outline-text-5" id="text-org5fb0e3c">
<ul class="org-ul">
<li>FindItemByCaption</li>
<li>FindItemByAction</li>
<li>FindVCLWindow
TWinControl *control = FindVCLWindow(MousePos);
UnicodeString class_name = control-&gt;ClassName();</li>
<li>ControlAtPos
ControlAtPos(const System::Types::TPoint &amp;Pos, bool AllowDisabled, bool AllowWinControls = false, bool AllLevels = false);
TPoint tp(X,Y);
TControl *control = ControlAtPos(tp, false);</li>
</ul>
</div>
</div>
<div id="outline-container-org4dbc288" class="outline-5">
<h5 id="org4dbc288">Position</h5>
<div class="outline-text-5" id="text-org4dbc288">
<p>
.Left, .Top, &#x2026;
</p>
</div>
</div>
<div id="outline-container-org6cb4935" class="outline-5">
<h5 id="org6cb4935">Dynamically created components</h5>
<div class="outline-text-5" id="text-org6cb4935">
<ul class="org-ul">
<li>Event Handler assignment: Take care of the correct parameter declaration! (When assigned via Form Designer some magic is done&#x2026;)</li>
</ul>
</div>
</div>
<div id="outline-container-orgcc653c9" class="outline-5">
<h5 id="orgcc653c9">VCL Components</h5>
<div class="outline-text-5" id="text-orgcc653c9">
</div>
<div id="outline-container-org786441c" class="outline-6">
<h6 id="org786441c">Component List</h6>
<div class="outline-text-6" id="text-org786441c">
<p>
<a href="#org24b5e1b">Types of Controls</a>
</p>
</div>
</div>
</div>


<div id="outline-container-org58b6685" class="outline-5">
<h5 id="org58b6685">Components used in iLCD Manager XE</h5>
<div class="outline-text-5" id="text-org58b6685">
<p>
<code>D:\Docu\Manager_XE\Components Docu\Components used in iLCD Manager XE.docx</code>
</p>
</div>
</div>

<div id="outline-container-orgbb9ce0a" class="outline-5">
<h5 id="orgbb9ce0a">EControl</h5>
<div class="outline-text-5" id="text-orgbb9ce0a">
</div>
<div id="outline-container-orgfffdb65" class="outline-6">
<h6 id="orgfffdb65">AdvOfficeSyntMemo</h6>
<div class="outline-text-6" id="text-orgfffdb65">
<p>
(SyntEdit: <code>C:\dp\Components_XE\SyntEdit\Help\SyntEdit.pdf</code>)
   derived from TSyntaxMemo
</p>
<ul class="org-ul">
<li>EditFrame-&gt;SyntaxManager (TSyntaxManager)
Syntax Highlighting
	TSyntaxMemo-&gt;TSyntaxAnalyzer
	TSyntAnalyzer
		(containes Lexer Rules, Styles and Code Templates)</li>
<li><p>
Line, Position
TPoint  CaretPosition
</p>

<p>
Position           is of type   int
memo-&gt;CaretPos     is of type   TPoint
</p>

<ul class="org-ul">
<li>LineNr 2 Position
bm-&gt;Position = MemoAM-&gt;Lines-&gt;LineIndex(line);</li>
<li><p>
Position 2 LineNr
(don't use: MemoAM-&gt;LineAtPos(Pos);)
TPoint tp = memo-&gt;StrPosToCaretPos(memo-&gt;BookmarkObj-&gt;Items[i]-&gt;Position);
TPoint tp = memo-&gt;CaretPos;
</p>

<p>
int line = tp.y;
</p></li>
</ul></li>
<li>use text directly
memo-&gt;Lines-&gt;FText
!dont use memo-&gt;Text!
change Text:
FConsoleSM-&gt;Lines-&gt;Text = FConsoleSM-&gt;Lines-&gt;FText + FText;
 FConsoleSM-&gt;Refresh();</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5e0a33d" class="outline-5">
<h5 id="org5e0a33d">LMD Docking</h5>
<div class="outline-text-5" id="text-org5e0a33d">
</div>
<div id="outline-container-orgbf9e29a" class="outline-6">
<h6 id="orgbf9e29a">Overview</h6>
<div class="outline-text-6" id="text-orgbf9e29a">
<p>
The main control of the LMD-DockingPack is the TLMDDockSite. Generally, the application has only one
TLMDDockSite control placed on the whole client area (Align = alClient) of the main application form.
But multiple sites are possible.
</p>

<p>
Panels can be docked into DockSite.
</p>

<p>
At run-time the dock panel is not statically associated with its parent site and can be dragged
out to some another site, or become floating.
</p>
</div>
</div>

<div id="outline-container-org0b5397d" class="outline-6">
<h6 id="org0b5397d">Panels</h6>
<div class="outline-text-6" id="text-org0b5397d">
<ul class="org-ul">
<li>Document (ClientKind = dkDocument)</li>
<li>Tool     (ClientKind = dkTool)</li>
</ul>
</div>
</div>
<div id="outline-container-orga75ee9f" class="outline-6">
<h6 id="orga75ee9f">Zones</h6>
<div class="outline-text-6" id="text-orga75ee9f">
</div>
<ul class="org-ul">
<li><a id="orgdfde244" name="orgdfde244"></a>What are Zones?<br />
<div class="outline-text-7" id="text-orgdfde244">
<p>
Areas which contain panels. Zones can contain child zones.
</p>

<p>
Zones are arranged in a tree structure (see e.g. <a href="C:\Users\jh\AppData\Local\demmel products\iLCD\Macros_Docks.xml">Macros_Docks.xml</a> )
The highest node in the tree: DockSite-&gt;RootZone
</p>
</div>
</li>

<li><a id="orgb23cead" name="orgb23cead"></a>How can you place panels on the site (left, right, up, down, &#x2026;)?<br />
<div class="outline-text-7" id="text-orgb23cead">
<p>
You have to define DockZones.
</p>

<p>
 Zone Index ?
</p>
</div>

<ul class="org-ul">
<li><a id="orgb254b32" name="orgb254b32"></a>Zone Kind: DockZone-&gt;Kind<br />
<div class="outline-text-8" id="text-orgb254b32">
<ul class="org-ul">
<li>zkPanel (0)</li>
<li>zkHorz  (1)</li>
<li>zkVert  (2)</li>
<li>zkTabs  (3)(default?)</li>
</ul>

<p>
in the XML-File: &lt;zone kind="PANEL" size="176" dsize="0.230065359477124"/&gt;
Every Panel has its own Zone of Kind "PANEL" !
</p>
</div>
</li>
</ul>
</li>


<li><a id="org7227c12" name="org7227c12"></a>Parse Zone Tree<br />
<div class="outline-text-7" id="text-org7227c12">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">while</span> ((DockZone != 0) &amp;&amp; (DockZone-&gt;Kind != zkTabs) &amp;&amp; (DockZone-&gt;ZoneCount &gt; 0))
{
   <span class="org-comment-delimiter">// </span><span class="org-comment">step down the Zone Tree</span>
   DockZone = DockZone-&gt;Zones[0];
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span> (pnl-&gt;Zone != 0)
{
   pnl-&gt;Zone-&gt;Index = pnl-&gt;Zone-&gt;Parent-&gt;ZoneCount - 1;
   pnl-&gt;Show(); <span class="org-comment-delimiter">// </span><span class="org-comment">Activate.</span>
};
</pre>
</div>

<p>
Hot Spot Areas?
</p>
</div>
</li>

<li><a id="org2f0db06" name="org2f0db06"></a>Tabbed Documents<br />
<div class="outline-text-7" id="text-org2f0db06">
<p>
central tabbed zone
The feature is enabled by default, but can be disabled using
UseTabDocs property of TLMDDockManager component.
</p>

<p>
2 kinds of Panels: (Panel-&gt;ClientKind
</p>
<ul class="org-ul">
<li>Tools panels
can be docked everywhere</li>
<li>Document panels
document panels can be docked only into tabbed host zones</li>
</ul>

<p>
The Space Zone is the main host zone for tabbed documents.
</p>
</div>
</li>


<li><a id="orgb130a71" name="orgb130a71"></a>Special Zone, the Space Zone.<br />
<div class="outline-text-7" id="text-orgb130a71">
<p>
The Space Zone (DockSite-&gt;SpaceZone) is the central zone in the application.
Can be defined at Design Time (right click on a panel).
</p>

<p>
The Space Zone has highest priority for resizing.
The space zone  is the only zone (except root) that can exist empty.
</p>

<p>
Note:
</p>
<ul class="org-ul">
<li>one zone in .xml file has to be: isspace="1"</li>
</ul>
</div>
</li>
<li><a id="orgba766de" name="orgba766de"></a>How to access Panels in a Zone?<br /></li>
</ul>
</div>

<div id="outline-container-orga02ca83" class="outline-6">
<h6 id="orga02ca83">Dock Manager</h6>
<div class="outline-text-6" id="text-orga02ca83">
<p>
DockSite-&gt;Manager = DockManager;
</p>

<p>
DockManager-&gt;LoadFromFile("current.xml");
DockManager-&gt;SaveToFile("default.xml");
</p>

<p>
Note:
</p>
<ul class="org-ul">
<li>Dynamically created components have to be handled via the Events: OnGetCompId and OnGetComp.</li>
</ul>
</div>
</div>

<div id="outline-container-org59693e9" class="outline-6">
<h6 id="org59693e9">Component List</h6>
<div class="outline-text-6" id="text-org59693e9">
<p>
(all begin with TLMD&#x2026;)
</p>
<ul class="org-ul">
<li>DockSite
<ul class="org-ul">
<li>Methods:
<ul class="org-ul">
<li>DockControl(Vcl::Controls::TControl* AControl,
				TLMDDockZone* ADropOnZone = (TLMDDockZone*)(0x0),
				Vcl::Controls::TAlign AZoneSide = (Vcl::Controls::TAlign)(0x5));
Can be used to add a panel to a Dock Site. General: dock clients into DockSite relative to an
existing Zone.
Replaces the standard ManualDock method.</li>
</ul></li>
</ul></li>

<li>DockPanel
<ul class="org-ul">
<li>Properties
<ul class="org-ul">
<li>UseTabDocs: disable tabbed feature</li>
</ul></li>
</ul></li>
<li>DockManger
<ul class="org-ul">
<li>Properties
<ul class="org-ul">
<li>SiteCount</li>
<li>ScrollDocTabs</li>
</ul></li>
<li>Methods
<ul class="org-ul">
<li>SaveToFile("default.xml");</li>
<li>LoadFromFile("current.xml");</li>
</ul></li>
</ul></li>

<li>DockZone
<ul class="org-ul">
<li>Properties
<ul class="org-ul">
<li>AutoHide: Hide Panels when activating a different panel. That means you can auto hide a whole
zone, not only individual panels.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org5a27b45" class="outline-6">
<h6 id="org5a27b45">Styles</h6>
<div class="outline-text-6" id="text-org5a27b45">
<p>
<a href="C:\dp\Components_XE\LMD_DockingPack\tools\DockingStyleEditor.exe">Style Editor</a>
in folder:
<code>C:/dp/Components_XE/LMD_DockingPack/tools</code>
</p>

<p>
The style used in Manager XE is to be found in:
</p>
<ul class="org-ul">
<li>C:/dp/Manager_XE/DebugJava/Config</li>
<li>DockStyle.xml &amp; DockStyle.bmp</li>
</ul>

<p>
interesting settings:
</p>
<ul class="org-ul">
<li>DocZone (JavaTabs)
<ul class="org-ul">
<li>NormalTextColor</li>
<li>Tab Head
<ul class="org-ul">
<li>NormalTab (Stretch)</li>
<li>InactiveSelectedTab</li>
<li>ActiveSelectedTab</li>
</ul></li>
<li>Active/InactiveBack
Frame around the Dock Zone.</li>
</ul></li>
<li>Panel
PanelForm
<ul class="org-ul">
<li>FrameContent = 2 (pixel)</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0cbf2f8" class="outline-5">
<h5 id="org0cbf2f8">TMS Components</h5>
<div class="outline-text-5" id="text-org0cbf2f8">
<p>
Docu: <code>C:/dp/Components_XE/TMS_ComponentPack/Doc</code>
</p>

<p>
(all begin with TAdv&#x2026;)
</p>

<ul class="org-ul">
<li>GlowButton
Properties:
	DropDownButton
	Layout (Position of Text)
	Picture</li>
<li>OfficeEdit (Textbox)</li>
<li>OfficeSelector</li>
<li>OfficeSpinEdit</li>
<li>QuickAccessToolBar</li>
<li>ToolBar
Insert Buttons, etc. (right mouse click)</li>
<li>ToolBarForm
(MainForm: TMForm -&gt; TAdvToolBarForm)</li>
<li>ToolBarPager
Insert TAdvToolBar</li>
<li>VerticalPolyList
(e.g. FileFrame)</li>
</ul>
</div>
</div>

<div id="outline-container-org8940979" class="outline-5">
<h5 id="org8940979">SpTBXLib (Silverpoint)</h5>
<div class="outline-text-5" id="text-org8940979">
</div>
<div id="outline-container-org4bb5956" class="outline-6">
<h6 id="org4bb5956">Component List</h6>
<div class="outline-text-6" id="text-org4bb5956">
<p>
(all begin with TSpTBX&#x2026;)
</p>
<ul class="org-ul">
<li>FormPopupMenu</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org24b5e1b" class="outline-5">
<h5 id="org24b5e1b">Types of Controls</h5>
<div class="outline-text-5" id="text-org24b5e1b">
<p>
<a href="http://en.wikipedia.org/wiki/Graphical_control_element#List_of_common_generic_widgets">Wikipedia: List of common generic widgets</a>
</p>
</div>

<div id="outline-container-org75dd0bd" class="outline-6">
<h6 id="org75dd0bd">Visible</h6>
<div class="outline-text-6" id="text-org75dd0bd">
</div>
<ul class="org-ul">
<li><a id="org5e69f0a" name="org5e69f0a"></a>Dialogs etc.<br />
<div class="outline-text-7" id="text-org5e69f0a">
<ul class="org-ul">
<li>Dialogs
<ul class="org-ul">
<li>Open File Dialog</li>
<li>Find Dialog</li>
</ul></li>
<li>Menu Bar (TMenuBar)</li>
<li>File Menu
<ul class="org-ul">
<li>Menu Item</li>
</ul></li>
<li>Toolbar (TToolBar)
<ul class="org-ul">
<li>Quick Access Toolbar</li>
<li>ToolBarPager</li>
</ul></li>
<li>DropDownMenu</li>
<li>PopupMenus (TPopupMenu)</li>
<li>Tabs (TPageControl-&gt;TTabSheet)</li>
</ul>
</div>
</li>

<li><a id="org2dbd861" name="org2dbd861"></a>Graphical Elements<br />
<div class="outline-text-7" id="text-org2dbd861">
<ul class="org-ul">
<li>Canvas</li>
<li>Image</li>
<li>ImageList</li>
<li>Label</li>
</ul>
</div>
</li>

<li><a id="org5d062c8" name="org5d062c8"></a>Interactive Controls<br />
<div class="outline-text-7" id="text-org5d062c8">
<ul class="org-ul">
<li>Button
<ul class="org-ul">
<li>Button with Image (TToolButton: Use Image List from e.g. TToolBar)</li>
<li>RadioButton</li>
<li>CheckBox</li>
</ul></li>
<li>ComboBox</li>
<li>Grid (TStringGrid)</li>
<li>Progress Bar (TProgressBar)</li>
<li>SpinButton</li>
<li>Status Bar</li>
<li>Textbox (TEdit)</li>
<li>ListBox</li>
<li>Panel
<ul class="org-ul">
<li>TPageControl
<ul class="org-ul">
<li>TTabSheet	tabbed controls like in RTJSimpleDebugger</li>
</ul></li>
</ul></li>
</ul>
</div>
</li>

<li><a id="orga7114ea" name="orga7114ea"></a>Advanced Controls<br />
<div class="outline-text-7" id="text-orga7114ea">
<ul class="org-ul">
<li><p>
TTreeview
Note: If DragMode = dmAutomatic, the OnMouseDown Event comes too late, when a node is clicked !
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">TTreeNode</span> *<span class="org-variable-name">node</span> = ProjectTV-&gt;Items-&gt;AddFirst(<span class="org-constant">NULL</span>, INIT_PROJECT_NAME);
node-&gt;ImageIndex = -1;

<span class="org-keyword">if</span> (ProjectTV-&gt;SelectionCount &gt; 1)
{}

<span class="org-type">TTreeNode</span> *<span class="org-variable-name">node</span> = ProjectTV-&gt;GetNodeAt(X, Y);

</pre>
</div>

<p>
Loop through all nodes
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">TTreeNode</span> *<span class="org-constant">TJavaProjectTree</span>::<span class="org-function-name">GetNodeFromFile</span>(<span class="org-type">UnicodeString</span> <span class="org-variable-name">file</span>)
{
   <span class="org-keyword">try</span>
   {
      <span class="org-comment-delimiter">// </span><span class="org-comment">find corresponding node</span>
      <span class="org-type">TTreeNode</span> *<span class="org-variable-name">node</span> = ProjectTV-&gt;Items-&gt;GetFirstNode()-&gt;getFirstChild();
      <span class="org-keyword">for</span> (<span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; ProjectTV-&gt;Items-&gt;GetFirstNode()-&gt;Count; i++)
      {
         <span class="org-keyword">if</span> ((<span class="org-keyword">reinterpret_cast</span>&lt;<span class="org-type">TJavaFile</span>*&gt;(tree_node-&gt;Data))-&gt;FullName) == file) <span class="org-comment-delimiter">// </span><span class="org-comment">todo</span>
         {
          <span class="org-keyword">return</span> node;
         }
         <span class="org-keyword">else</span> <span class="org-comment-delimiter">//</span><span class="org-comment">next node</span>
         {
            node = node-&gt;getNextSibling();
         }
      }
   }
   <span class="org-keyword">catch</span> (...)
   {
   }

   <span class="org-keyword">return</span> <span class="org-constant">NULL</span>;
}
</pre>
</div></li>
<li>TDateTimePicker</li>
</ul>
</div>
</li>
</ul>
</div>


<div id="outline-container-org02ba9c7" class="outline-6">
<h6 id="org02ba9c7">Invisible</h6>
</div>



<div id="outline-container-org5a9d3a2" class="outline-6">
<h6 id="org5a9d3a2">Text</h6>
<div class="outline-text-6" id="text-org5a9d3a2">
<p>
add "&amp;" to Caption to get an underline
</p>
</div>
</div>

<div id="outline-container-orgf829f78" class="outline-6">
<h6 id="orgf829f78">Forms</h6>
<div class="outline-text-6" id="text-orgf829f78">
<p>
Every Form is a class derived from e.g. TForm (or smth. else)
</p>


<p>
Add Forms
   Right Mouse Click in the Project Manager
</p>
</div>
</div>

<div id="outline-container-org26032d3" class="outline-6">
<h6 id="org26032d3">Frames</h6>
<div class="outline-text-6" id="text-org26032d3">
<ul class="org-ul">
<li>not visible</li>
</ul>

<p>
Add Frames
    Right Mouse Click in the Project Manager-&gt;Other
    (File-&gt;New-&gt;New Items-&gt;C++Builder Files)
</p>
</div>
</div>

<div id="outline-container-org05ccc7c" class="outline-6">
<h6 id="org05ccc7c">Units</h6>
</div>


<div id="outline-container-orgd5c6cb7" class="outline-6">
<h6 id="orgd5c6cb7">Action Lists</h6>
<div class="outline-text-6" id="text-orgd5c6cb7">
<p>
Used for common solutions for  collections of menu items, toolbars, buttons.
</p>
</div>
</div>


<div id="outline-container-org66b9bf0" class="outline-6">
<h6 id="org66b9bf0">General Properties of Forms, Frames etc.</h6>
<div class="outline-text-6" id="text-org66b9bf0">
<ul class="org-ul">
<li>Align: alClient resize with parent</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga582e63" class="outline-5">
<h5 id="orga582e63">Windows 7 Controls</h5>
<div class="outline-text-5" id="text-orga582e63">
</div>
<div id="outline-container-orge5d0fd9" class="outline-6">
<h6 id="orge5d0fd9">Windows Presentation Foundation (WPF)</h6>
</div>
<div id="outline-container-org0d69ea8" class="outline-6">
<h6 id="org0d69ea8">Ribbon Components (implemented in WPF)</h6>
</div>
<div id="outline-container-orgb65f95e" class="outline-6">
<h6 id="orgb65f95e">.NET - Framework</h6>
</div>
</div>
</div>

<div id="outline-container-org236770e" class="outline-4">
<h4 id="org236770e">Forms &amp; Frames</h4>
<div class="outline-text-4" id="text-org236770e">
</div>
<div id="outline-container-org045efed" class="outline-5">
<h5 id="org045efed">Using Frames</h5>
<div class="outline-text-5" id="text-org045efed">
<pre class="example">
rename frame, add frame
</pre>

<p>
A frame is like a customized component.
How to embedd a frame:
Tool Palette : Frames -&gt; opens a dialog to select a frame
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Changes made to a Frame will be inherited to the Form/Frame it is embedded.</li>
<li>Renaming a frame can be difficult:
problem: the Txxx class is somehow saved somewhere (somewhere saved deep inside the project)
1 remove frame sources from the project
2 change names in Text Editor and reload project (also ALL dfm files where an object of the frame is embedded!).
3 add frame sources again</li>
</ul>
</div>

<div id="outline-container-org71d7cd7" class="outline-6">
<h6 id="org71d7cd7">Deriving from a Frame</h6>
<div class="outline-text-6" id="text-org71d7cd7">
<p>
File-&gt;New-&gt;Other-&gt;Inheritable Items
</p>

<p>
Now you can choose an object (strange!) to derive from.
</p>
</div>
</div>
</div>
<div id="outline-container-orgafc14f2" class="outline-5">
<h5 id="orgafc14f2">Usful functions</h5>
<div class="outline-text-5" id="text-orgafc14f2">
<ul class="org-ul">
<li>Find control with mouse position
<ul class="org-ul">
<li>TWinControl *control = FindVCLWindow(MousePos);
UnicodeString class_name = control-&gt;ClassName();</li>

<li>ControlAtPos();</li>

<li>FindDragTarget();</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgba7b9eb" class="outline-5">
<h5 id="orgba7b9eb">Styles</h5>
<div class="outline-text-5" id="text-orgba7b9eb">
<p>
change the appearance of a VCL application (like a theme in windows)
VCL controls are made up of parts and states.
</p>

<p>
Syle File (.vsf)
Tools-&gt; Bitmap Style Designer
</p>
</div>
</div>
</div>

<div id="outline-container-org143722c" class="outline-4">
<h4 id="org143722c">Drag &amp; Drop</h4>
<div class="outline-text-4" id="text-org143722c">
<p>
Propertiy DragMode (auto, manual) controls wether a component can be dragged around.
For a component to allow another component to be dropped onto, Accept = true has to be set in the components
OnDragOver event handler. VCL won't generate an OnDragDrop event unless the component has said that it will accept dropping.
</p>

<p>
Event Sequence:
OnDragStart
OnDragOver
OnDragDrop (if drop has been accepted in OnDragOverHandler)
OnEndDrag
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>dont set DragMode to automatic</li>
<li>OnDragOver etc. - Handler only work with internal controls (TJamDropFiles is for dragging files from outside the app)</li>
<li>BeginDrag fires OnMouseUp event, after that no more mouse events are fired (use OnDragDrop as OnMouseUp)</li>
</ul>
</div>
</div>

<div id="outline-container-org800dc45" class="outline-4">
<h4 id="org800dc45">Events</h4>
<div class="outline-text-4" id="text-org800dc45">
<p>
VCL invokes events through the use of a pointer.
Event variables are not just ordinary function pointers, events require the use of a typedef and the __closure keyword.
</p>

<p>
closure = 32 bit (func add) + 32 bit (class add)
A regular function pointer holds a 32-bit value. It simply points to a memory location. A closure, however, holds a 64-bit value.
It contains the address of the function in the highest 32 bits, and the address of the class where the function
resides in the lowest 32 bits.
</p>
</div>

<div id="outline-container-org813bc84" class="outline-5">
<h5 id="org813bc84">Event Declarations: Vcl.Controls.pas</h5>
<div class="outline-text-5" id="text-org813bc84">
<p>
Declaration of events
e.g. typedef void __fastcall (__closure <b>TMouseMoveEvent)(System::TObject</b> Sender, System::Classes::TShiftState Shift, int X, int Y);
</p>
</div>
</div>

<div id="outline-container-org2a673ea" class="outline-5">
<h5 id="org2a673ea">How to create your own events</h5>
<div class="outline-text-5" id="text-org2a673ea">
<p>
see above
</p>
</div>
</div>

<div id="outline-container-org88cd8d6" class="outline-5">
<h5 id="org88cd8d6">Fire Event</h5>
<div class="outline-text-5" id="text-org88cd8d6">
<p>
in Vcl.Controls:
Perform(WM_LBUTTONUP, 0, PointToLParam(ScreenToClient(P)));
</p>
</div>
</div>

<div id="outline-container-orgd30c7d8" class="outline-5">
<h5 id="orgd30c7d8">Famous VCL Events</h5>
<div class="outline-text-5" id="text-orgd30c7d8">
<ul class="org-ul">
<li>OnContextPopup
Handled: Used to specify whether the event is handled in the user code.
			Useful to disable automatic popups.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge7566c7" class="outline-4">
<h4 id="orge7566c7">Actions</h4>
<div class="outline-text-4" id="text-orge7566c7">
<p>
Actions are simple behaviours of elements, e.g. Copy, Cut, Paste, Goto, Save, &#x2026;
</p>

<p>
An Action List contains the Actions, which are assigned to components.<br />
You can organize them into categories that can be dropped onto a menu as a set (for example, Cut, Copy, and Paste) or one at a time.
</p>

<p>
Actions serve two functions:
</p>
<ol class="org-ol">
<li>represent properties common to the user interface elements, such as whether a control is <b>enabled</b> or <b>checked</b>.</li>
<li>respond when a control fires, for example, when the application user <b>clicks</b> a button or <b>chooses</b> a menu item.</li>
</ol>

<p>
Effect of actions on other components:
</p>
<blockquote>
<dl class="org-dl">
<dt>Clients</dt><dd>E.g. a button receives a mouse click and initiates the action.</dd>
<dt>Targets</dt><dd>The action acts on the target (e.g. cut, paste in a memo, data control).</dd>
</dl>
</blockquote>

<p>
On what there is:
</p>
<ul class="org-ul">
<li>Action List</li>
<li>Action</li>
<li>Button</li>
</ul>

<p>
See also:
<a href="http://www.blong.com/Conferences/DCon2001/Actions/Actions.htm">http://www.blong.com/Conferences/DCon2001/Actions/Actions.htm</a>
</p>
</div>
</div>
<div id="outline-container-org86a2221" class="outline-4">
<h4 id="org86a2221">FileIO</h4>
<div class="outline-text-4" id="text-org86a2221">
<p>
<a href="http://www.functionx.com/cppbuilder/index.htm">http://www.functionx.com/cppbuilder/index.htm</a>
</p>

<ul class="org-ul">
<li>TDirectory (#include &lt;IOUtils.hpp&gt;)
<ul class="org-ul">
<li>TDirectory::CreateDirectory(Folder);  //not working?</li>
<li>TDirectory::Delete(Folder, bRecursive);</li>
<li>TDirectory::Exists(Folder);</li>
</ul></li>
<li>DeleteFile(File)</li>
<li>CopyFileW(SourceFile, TargetFile,  bFailIfExists)
<ul class="org-ul">
<li>CreateDir(Folder)</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org5a4c912" class="outline-5">
<h5 id="org5a4c912">TMS Componentes</h5>
</div>
<div id="outline-container-org7094d68" class="outline-5">
<h5 id="org7094d68">Synt Edit</h5>
<div class="outline-text-5" id="text-org7094d68">
</div>
<div id="outline-container-org77b96c8" class="outline-6">
<h6 id="org77b96c8">Lexer</h6>
<div class="outline-text-6" id="text-org77b96c8">
<p>
On what there is:
</p>
<ul class="org-ul">
<li>Tokens (defined using Parsers)
<ul class="org-ul">
<li>find tokens in text, e.g. Identifier: MyClassName</li>
</ul></li>
<li>Token sequences (defined using Rules)
<ul class="org-ul">
<li>find text ranges (groups of tokens)</li>
<li>Block types
<ol class="org-ol">
<li>Tag detector</li>
<li>Line separator</li>
<li>Range start</li>
<li>Range end</li>
</ol></li>
</ul></li>
<li>Grammar (for complex token sequences)</li>
<li>Sub lexer
<ul class="org-ul">
<li>define regions where another lexer is active (e.g. for another language)</li>
</ul></li>
</ul>
</div>

<ul class="org-ul">
<li><a id="orgbca81e1" name="orgbca81e1"></a>Lexer Dialog<br />
<ul class="org-ul">
<li><a id="org9a5aa02" name="org9a5aa02"></a>Common Page<br />
<div class="outline-text-8" id="text-org9a5aa02">
<dl class="org-dl">
<dt>Token names</dt><dd>Integer Values for assignment of token type to token rules.</dd>
</dl>
</div>
</li>
<li><a id="org3d46b4a" name="org3d46b4a"></a>Code Templates Page<br /></li>
</ul>
</li>



<li><a id="orgda81a8f" name="orgda81a8f"></a>Parsers<br />
<div class="outline-text-7" id="text-orgda81a8f">
<p>
Normally a <i>parser</i> consists of multiple <i>lexers</i> (also called <i>tokenizers</i>), here it seems to be the other way round.
So <i>parser</i> here means the entries on the Parser Page of the Syntax Lexer Dialog which really is just a regular expression
for defining what kinds of tokens should be matched.
</p>

<p>
Syntax analizer: <br />
The <i>parsers</i> split the text into <i>tokens</i>. You might wanna think of an array of tokens at first.
Normally the result is a syntax tree.
</p>

<p>
Regular Expressions for Token Types defined on the Common Page.
Take care of the order in the list, it might be that another Parser above already produced a match.
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>You can not match complex token sequences with a parser because it interferes with the Syntax Highlighting.</li>
</ul>
</div>

<ul class="org-ul">
<li><a id="org3f2bebb" name="org3f2bebb"></a>Regular Expressions<br />
<div class="outline-text-8" id="text-org3f2bebb">
<dl class="org-dl">
<dt>\b </dt><dd>word boudary</dd>
<dt>(no term)</dt><dd>whitespaces are ignored !</dd>
</dl>
</div>
</li>
</ul>
</li>

<li><a id="orga335183" name="orga335183"></a>Rules<br />
<div class="outline-text-7" id="text-orga335183">
<p>
Rules define patterns that match certain text ranges (e.g. source block from "{" to "}"). Those ranges might
influence each other, they may also overlap. It might be a good idea to have a specific rule for the <i>Range
end condition</i> for each type of text range (e.g. for methods, blocks, classes).
</p>

<p>
Tip: Set Highlight to see the Text ranges captured by the rules. Simply switch Highlight type (All range, Only bounding tokens)
</p>

<p>
They seem to be applied in the order they appear in the Rules-List. Thats important if you select "Cancel next rules".
</p>

<ul class="org-ul">
<li>Block type: Range start - Range end
Check that the conditions fit!</li>
<li>Parent block</li>
<li>Auto closing text (Text range tab)</li>

<li><p>
Text range
</p>

<p>
This setting depends on the Conditions page, e.g. %s0 is the first token found (first or last condition
depending on the setting "Relative to end of condition" on the Properties page)
</p>

<p>
Syntax:
</p>
<pre class="example">
%(S|E)P*(L|Z)?[0-9]+
</pre>

<p>
or
</p>
<pre class="example">
%(s|e)p*([TOKEN]OFFSET?)?
</pre>

<p>
or (specify variable range)
</p>
<pre class="example">
%(S|E)...~(S|E)P*([TOKEN]OFFSET?)?
</pre>


<dl class="org-dl">
<dt>%s, %e                  </dt><dd>start, end anchors</dd>
<dt>L1,2,3                  </dt><dd>the string from line start to token nr. 1,2,3 (incl. token)</dd>
<dt>Z1,2,3                  </dt><dd>the string from line end to token nr. 1,2,3 (incl. token)</dd>
<dt>%ps, %pe                </dt><dd>parent text range, may be nested (e.g. %pppe)</dd>
<dt>TOKEN                   </dt><dd>TOKEN will be searched from %s or %e</dd>
<dt>OFFSET                  </dt><dd>+/- number</dd>
<dt>~                       </dt><dd>specify variable range</dd>
</dl>

<p>
Example:
</p>
<dl class="org-dl">
<dt>%s-1                    </dt><dd>token before start token</dd>
<dt>%sl2                    </dt><dd>the string from line start to second token (rel. to text range start)</dd>
<dt>%s[(]~s[)]              </dt><dd>the string from "(" to ")" (including brackets)</dd>
<dt>%s-1 %s[(]~s[)] - %s0   </dt><dd>input: "int myfun(int i, double d)" results in "myfun(int i, double d) - int"
(add the rule yourself)</dd>
</dl></li>
</ul>
</div>

<ul class="org-ul">
<li><a id="org12ab0c1" name="org12ab0c1"></a>Conditions<br />
<div class="outline-text-8" id="text-org12ab0c1">
<p>
<i>Conditions</i> define a pattern to be found in the text. This pattern defines the start of the text range.
Additionally a reference point is defined with the following setting:
</p>

<p>
Index of Token: (set on Properties page: "Relative to end of condition"-checkbox)
</p>
<ul class="org-ul">
<li>reference point start of conditions</li>
<li>reference point end of conditions</li>
</ul>

<p>
see also Rule-Property-Checkbox: <i>Relative to end of condition</i>
</p>

<p>
Now text ranges can be defined relative to the found conditions. What conditions can be added depends on
the defined Token Types (found using Parsers: regular expressions used to tokenize the text).
</p>

<p>
Possible Conditions for Text Range Pattern:
</p>

<dl class="org-dl">
<dt><code>Equal</code>       </dt><dd>with nothing: maches one token of any kind</dd>
<dt><code>Not equal</code>   </dt><dd></dd>

<dt><code>Mask</code>        </dt><dd></dd>

<dt><code>Skip tokens</code> </dt><dd><p>
ignore any nr of this kind of token, <i>Keys list</i> is not useful here.
</p>

<p>
Examples:
</p>
<ul class="org-ul">
<li>Identifiers:   will ignore "askdfj aldsfj aldskfj" but not "lkajdsf, lakdfj"</li>
<li>nothing:       ignores everything (like .*), (take care: might match too much!)</li>
</ul></dd>
<dt><code>Strict Mask</code> </dt><dd></dd>
</dl>

<p>
Notes on Conditions:
</p>
<dl class="org-dl">
<dt>Keys list</dt><dd>enter literal tokens to limit matches (e.g. Identifier (Token Type) : float, double)</dd>
<dt>Skip tokens</dt><dd>seems to be the only way to do optional patterns</dd>
</dl>

<pre class="example" id="org0880c72">
0. EQUAL        &lt;identifier&gt;                      &lt;- this is the reference point (start of conditions)
1. EQUAL   )    &lt;symbol&gt;
2. SKIP         &lt;symbol, identifier&gt;
3. EQUAL   (    &lt;symbol&gt;
4. EQUAL class  &lt;identifier&gt;
5. EQUAL   =    &lt;symbol&gt;                          &lt;- this is the reference point (end of conditions)

TComponent = class ( TPersistent , IInterface , IInterfaceComponentReference )

These are 10 tokens. Positive nr. go left, negative right

Relative to start of condition:   9  8  7  6  5  4  3  2  1  0               0 is ")" found at the end of the line
Relative to end of condition:     1  0 -1 -2 -3 -4 -5 -6 -7 -8               0 is "=", i.e. %s0




0. Equal           {      &lt;Symbol&gt;
1. Skip tokens
2. Skip tokens            &lt;Identifier&gt;
3. Equal           class  &lt;Identifier&gt;
</pre>
</div>
</li>
</ul>
</li>

<li><a id="org1524c58" name="org1524c58"></a>Grammar<br />
<div class="outline-text-7" id="text-org1524c58">
<p>
You can define more complex token sequences on the Grammar Page. To use them
add a new rule on the Rules Page with property Grammar rule.
</p>

<dl class="org-dl">
<dt>Literals  </dt><dd>'akdjlakj'</dd>
<dt>Token typs</dt><dd>&lt;"TokenType"&gt; (e.g. &lt;Identifier&gt;)</dd>
</dl>

<pre class="example" id="orgf309309">
ThrowsList ::= 'throws' &lt;Identifier&gt;
</pre>
</div>
</li>

<li><a id="orgaa985f3" name="orgaa985f3"></a>Additional features<br />
<div class="outline-text-7" id="text-orgaa985f3">
<ul class="org-ul">
<li>Auto close text (e.g. {})
Text range Page, choose "Close nearest range"</li>
</ul>
</div>
</li>

<li><a id="orgb61ccc6" name="orgb61ccc6"></a>How to?<br />
<div class="outline-text-7" id="text-orgb61ccc6">
<ul class="org-ul">
<li>Syntax Highlighting is done with Parsers. They define what token types there are.
(don't use them for token sequences)</li>
<li>Rules are used to find Token Sequences. (limited possibilities)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orge77895c" class="outline-3">
<h3 id="orge77895c">Articles, Docu etc.</h3>
<div class="outline-text-3" id="text-orge77895c">
<ul class="org-ul">
<li>A Key's Odyssey
<a href="http://edn.embarcadero.com/article/38447">http://edn.embarcadero.com/article/38447</a></li>
<li>Introduction to Component Building
<a href="http://edn.embarcadero.com/article/20569">http://edn.embarcadero.com/article/20569</a></li>
<li>Debugging Multithreaded Applications with Delphi
<a href="http://edn.embarcadero.com/article/41175">http://edn.embarcadero.com/article/41175</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6a71ebd" class="outline-3">
<h3 id="org6a71ebd">Debugging</h3>
<div class="outline-text-3" id="text-org6a71ebd">
</div>
<div id="outline-container-orgf19d97b" class="outline-4">
<h4 id="orgf19d97b">How to find Variable in Memory?</h4>
<div class="outline-text-4" id="text-orgf19d97b">
<ol class="org-ol">
<li>Get Address with a pointer.</li>
<li>Open Memory Window (View -&gt; Debug Windows -&gt; CPU Windows) and goto Address.</li>
</ol>
</div>
</div>

<div id="outline-container-orgc746c22" class="outline-4">
<h4 id="orgc746c22">How to debug dll code?</h4>
<div class="outline-text-4" id="text-orgc746c22">
<p>
Set host application in Run-&gt;Parameters: <code>C:\dp\Manager_XE_UC\Debug\iLCD_XE.exe</code>
Start debugging. The host will be started automatically.
Thats it!
</p>
</div>
</div>
</div>
<div id="outline-container-orgb86484d" class="outline-3">
<h3 id="orgb86484d">TAdvStatusBar</h3>
<div class="outline-text-3" id="text-orgb86484d">
<p>
to make
</p>
<pre class="example">
-&gt;Panels-&gt;Item[0]-&gt;Text = jjj
</pre>

<p>
work do the following:
StatusBar-&gt;Refresh()
</p>

<p>
this is also importante when changing defaults:
UseSystemFont = false
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-05-11 Wed&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-orgcf15b9e" class="outline-3">
<h3 id="orgcf15b9e">Hide Panels in Designer</h3>
<div class="outline-text-3" id="text-orgcf15b9e">
<p>
e.g. on file_frame.cpp
</p>
<ol class="org-ol">
<li>select panel in Structure View</li>
<li>right mouse click -&gt; bring to front / send to back</li>
</ol>

<p>
doesnt always work: you might have to click into the Desing Window
</p>

<p>
&lt;2016-06-02 D
</p>
</div>
</div>
<div id="outline-container-org0f6ba6f" class="outline-3">
<h3 id="org0f6ba6f">Image List with transparent png pictures</h3>
<div class="outline-text-3" id="text-org0f6ba6f">
<p>
set Properties
</p>
<dl class="org-dl">
<dt>DrawingStyle</dt><dd>dsTransparent</dd>
<dt>ColorDepth  </dt><dd>cd32Bit</dd>
</dl>

<p>
Drawback: all existing images will be lost
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-06-30 Thu&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org1626c7f" class="outline-3">
<h3 id="org1626c7f">Create Action Alias</h3>
<div class="outline-text-3" id="text-org1626c7f">
<p>
If you want to transfer an Action from a Sub-Frame (e.g. TJavaProjectTree) to another Frame or Form:
</p>
<ul class="org-ul">
<li><p>
Create a new Action on the Target Frame and link the Sub-Frame-Handlers to it:
</p>

<p>
CreateNewJavaProjectA-&gt;OnExecute = JavaProject-&gt;ProjectTree-&gt;OnExecuteCreateNewJavaAppA;
RenameJavaProjectA-&gt;OnExecute = JavaProject-&gt;ProjectTree-&gt;OnExecuteRenameJavaAppA;
CreateNewJavaProjectA-&gt;OnUpdate = JavaProject-&gt;ProjectTree-&gt;OnUpdateCreateNewJavaAppA;
RenameJavaProjectA-&gt;OnUpdate = JavaProject-&gt;ProjectTree-&gt;OnUpdateRenameJavaAppA;
</p></li>
</ul>

<p>
OnUpdate needs to avoid the Name of the action:
	TAction *action = dynamic_cast &lt;TAction *&gt; (Sender);
</p>

<p>
if (action == NULL)
	return;
</p>

<p>
action-&gt;Enabled =
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-07-11 Mon&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-orga45b4f1" class="outline-3">
<h3 id="orga45b4f1">Java Editor Block Staple Color</h3>
<div class="outline-text-3" id="text-orga45b4f1">
<p>
java block, line color can be set in MemoAM, StaplePen Color
The line that connects the brackets of a block.
</p>
<pre class="example">
 -{
|
 -}
</pre>


<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-08-10 Wed&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org38ca3e1" class="outline-3">
<h3 id="org38ca3e1">Token Array in SyntEdit</h3>
<div class="outline-text-3" id="text-org38ca3e1">
<pre class="example">
MemoAM, TSyntaxMemo, TokenAtPos
find token in editor
</pre>


<p>
// get index of the token (in the token array) at the caret position
int token_idx = MemoAM-&gt;SyntObj-&gt;TokenAtPos(MemoAM-&gt;CaretPosToStrPos(MemoAM-&gt;CaretPos));
</p>

<p>
MemoAM-&gt;SyntObj-&gt;Tags[token_idx]
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-10-21 Fri&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org2a70a51" class="outline-3">
<h3 id="org2a70a51">How to implement Hints?</h3>
<div class="outline-text-3" id="text-org2a70a51">
<p>
Use internal timer, Application-&gt;HintPause (500 ms default).
Set Hint = text in OnMouseMove-handler like this:
</p>

<ul class="org-ul">
<li>Hit-Condition: Application-&gt;CancelHint(); Then set hint.</li>
</ul>

<p>
CancelHint() is necessary otherwise the hint might be shown too long/often.
</p>

<p>
Not using the internal timer (i.e. using a custom timer) is a bit complicated.
See java_source_frame.cpp (ActivateHint())
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-11-02 Wed&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org244d8b4" class="outline-3">
<h3 id="org244d8b4">How to highlight line in TSyntMemo?</h3>
<div class="outline-text-3" id="text-org244d8b4">
<ul class="org-ul">
<li>Gutter Objects
<ul class="org-ul">
<li>for static highlighting, defined at design time</li>
</ul></li>
<li>User Ranges
<ul class="org-ul">
<li>for dynamic highlighting</li>
</ul></li>
<li>Selections
Take care: !! Mouse Clicks reset the selection !!</li>
</ul>
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2015-09-30 Wed&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-orgb9306e5" class="outline-3">
<h3 id="orgb9306e5">TSyntKeyMapping</h3>
<div class="outline-text-3" id="text-orgb9306e5">
<p>
OnExecuteCommand:
Application-&gt;ProcessMessages() will execute actions with shortcuts etc.
e.g. Ctrl+Space starts OnExecuteCommand, ProcessMessages() will insert a space in MemoAM.
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-03-15 Tue&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org01f7916" class="outline-3">
<h3 id="org01f7916">Options</h3>
<div class="outline-text-3" id="text-org01f7916">
<p>
Editor Options
</p>
<dl class="org-dl">
<dt>Optimal fill</dt><dd>insert TABS on Block Indent</dd>
</dl>
</div>
</div>
<div id="outline-container-orgcf4bf1b" class="outline-3">
<h3 id="orgcf4bf1b">Shortcuts</h3>
<div class="outline-text-3" id="text-orgcf4bf1b">
<p>
Visual Studio Settings: Tools-&gt;Options-&gt;Editor Options
</p>
</div>

<div id="outline-container-org185d90c" class="outline-4">
<h4 id="org185d90c">Find, Replace, and Goto</h4>
<div class="outline-text-4" id="text-org185d90c">
<dl class="org-dl">
<dt>F12                         </dt><dd>Switch between Form &amp; Code</dd>
<dt>Alt + F12                   </dt><dd>Switch to Form Text View</dd>
<dt>Shift + F12                 </dt><dd>Shows a list of Forms</dd>
<dt>F3 / Ctrl + F3              </dt><dd>Find next / previous</dd>
<dt>Ctrl + Shift + f            </dt><dd>Find in files</dd>
<dt>Ctrl + q + ]                </dt><dd>goto matching delimiter
::</dd>
<dt>Ctrl + k + c                </dt><dd>comment selected block</dd>
<dt>Tab / Shift + Tab           </dt><dd>indent/outdent (Ctrl + Shift + i/u)
::</dd>
<dt>Ctrl + k + 1,2,3,&#x2026;        </dt><dd>Set bookmark</dd>
<dt>Ctrl + 1,2,3,&#x2026;            </dt><dd>Jump to bookmark</dd>
</dl>
</div>

<div id="outline-container-org6d5ff7c" class="outline-5">
<h5 id="org6d5ff7c">Method Hopping</h5>
<div class="outline-text-5" id="text-org6d5ff7c">
<dl class="org-dl">
<dt>Ctrl + Alt + arrow up     </dt><dd>Jump to begin of method</dd>
<dt>Ctrl + Alt + arrow down   </dt><dd>Jump to end of method</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org22bc201" class="outline-4">
<h4 id="org22bc201">Edit, Select</h4>
<div class="outline-text-4" id="text-org22bc201">
<dl class="org-dl">
<dt>ctrl + t (Entf/Backspace)  </dt><dd>delete word to the right (/left)</dd>
<dt>ctrl + y                   </dt><dd>delete current line</dd>
<dt>ctrl + q + y               </dt><dd>delete to the end of the current line</dd>

<dt>alt + shift +  Pos 1/Ende  </dt><dd>select to begin/end of line</dd>
<dt>ctrl + shift + Pos 1/Ende  </dt><dd>select all from begin/end of file</dd>

<dt>ctrl + k + t               </dt><dd>select word under cursor</dd>

<dt>shift + enter              </dt><dd>Insert new line</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org4228006" class="outline-3">
<h3 id="org4228006">Automatic Code Insertion (Code Templates)</h3>
<div class="outline-text-3" id="text-org4228006">
<p>
View-&gt;Templates
</p>
</div>
</div>

<div id="outline-container-org10217b4" class="outline-3">
<h3 id="org10217b4">Command Line Utilities</h3>
<div class="outline-text-3" id="text-org10217b4">
<p>
<code>C:/Program Files (x86)/Embarcadero/RAD Studio/12.0/bin</code>
</p>

<ul class="org-ul">
<li>convert MyForm.dfm /MyForm.txt          convert .dfm to .txt</li>
</ul>
</div>
</div>

<div id="outline-container-org7c56c07" class="outline-3">
<h3 id="org7c56c07">Compiler &amp; Linker (BCC32.EXE &amp; ILINK32.EXE)</h3>
<div class="outline-text-3" id="text-org7c56c07">
<p>
bcc32 version: 6.70.4983.33517
</p>
</div>

<div id="outline-container-org79b66c9" class="outline-4">
<h4 id="org79b66c9">Preprocessor output</h4>
<div class="outline-text-4" id="text-org79b66c9">
<p>
copy the file containing the #define statement to Sandbox folder.
</p>
<ul class="org-ul">
<li>process_file.bat *.cpp</li>
</ul>
</div>
</div>
<div id="outline-container-orga5891cc" class="outline-4">
<h4 id="orga5891cc">Include Paths, Environment Variables</h4>
<div class="outline-text-4" id="text-orga5891cc">
<p>
Problems: start with comparing the project-files.
</p>

<ul class="org-ul">
<li>C:/Users/Public/Documents/RAD Studio/12.0
bpl, dcp</li>
<li>Project Options
<ul class="org-ul">
<li>Runtime package import libraries</li>
</ul></li>
<li>Tools-&gt;Options-&gt;Environment Variables
note that rsvars.bat might return different values</li>
</ul>
</div>
</div>
<div id="outline-container-org63d4688" class="outline-4">
<h4 id="org63d4688">CodeGuard</h4>
<div class="outline-text-4" id="text-org63d4688">
<p>
In order to use the CodeGuard, "Link with runtime packages" has to be set to true.
</p>
</div>
</div>
<div id="outline-container-orgba455f5" class="outline-4">
<h4 id="orgba455f5">Link with Dynamic RTL</h4>
<div class="outline-text-4" id="text-orgba455f5">
<p>
Steuert, ob die C-RTL die Laufzeitbibliothek (cc3290.dll) dynamisch oder statisch linkt.
true  = dynamisch, d.h. die Bibliotheken mssen vorhanden sein (default).
false = statisch, d.h. die Bibliotheken werden statisch dazugelinkt und mssen nicht vorhanden sein.
</p>
</div>
</div>
<div id="outline-container-org00ea649" class="outline-4">
<h4 id="org00ea649">Compiler Directives/Options</h4>
<div class="outline-text-4" id="text-org00ea649">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">#pragma link "[path]modulename[.ext]"</th>
<th scope="col" class="org-left">Instructs the linker to link the file into an executable file.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">#pragma hdrstop</td>
<td class="org-left">Stops the precompiling after the current header.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">#pragma pack([{push OR  pop}[,]] [identifier[,]] [n])</td>
<td class="org-left">Sets the structure packing alignment.   ??</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">#pragma option (push/pop)</td>
<td class="org-left">Set compiler options (e.g. -a1), can also be pushed and popped</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">push: save ALL options</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">pop: restore ALL options</td>
</tr>
</tbody>
</table>

<p>
Compiler Options:
</p>
<dl class="org-dl">
<dt>-a1</dt><dd>Align data on one byte boundaries</dd>
<dt>-a </dt><dd>Set data alignment boundary.  Default is -a8</dd>
</dl>
</div>
</div>


<div id="outline-container-orgb17fa48" class="outline-4">
<h4 id="orgb17fa48">Debug into VCL Code</h4>
<div class="outline-text-4" id="text-orgb17fa48">
<ul class="org-ul">
<li>C++ Linker: Link with Dynamic RTL = false</li>
<li>Runtime Packages: Link with runtime package = false</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgdb6376d" class="outline-3">
<h3 id="orgdb6376d">Files generated</h3>
<div class="outline-text-3" id="text-orgdb6376d">
<dl class="org-dl">
<dt><code>.dfm</code>                </dt><dd>Forms, Frames (Windows VCL form file)</dd>
<dt><code>.bpl</code>                </dt><dd>Package shared library file</dd>
<dt><code>.dpk</code>                </dt><dd>Delphi package source file</dd>
<dt><code>.dcu</code>                </dt><dd>Delphi compiled unit file</dd>
<dt><code>.ilc|ild|ilf|ilr|ils</code></dt><dd>incremantal link files</dd>
<dt><code>.res</code>                </dt><dd>compiled resource files</dd>
</dl>
</div>
</div>


<div id="outline-container-orga62210a" class="outline-3">
<h3 id="orga62210a">Issues</h3>
<div class="outline-text-3" id="text-orga62210a">
<p>
There are mainly 3 places to loop first:
</p>
<ol class="org-ol">
<li>Project Options -&gt; Include &amp; Library paths</li>
<li>Project Options -&gt; Packages</li>
<li>Tools -&gt; Options</li>
</ol>
</div>

<div id="outline-container-org4ce0b9b" class="outline-4">
<h4 id="org4ce0b9b">Resource not found error on startup</h4>
<div class="outline-text-4" id="text-org4ce0b9b">
<p>
TMainForm not found
pragma missing in MainForm.cpp:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;vcl.h&gt;</span>
<span class="org-preprocessor">#pragma</span> hdrstop

<span class="org-preprocessor">#include</span> <span class="org-string">"main_form.h"</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------------------------------------------------------</span>
<span class="org-preprocessor">#pragma</span> package(smart_init)
<span class="org-preprocessor">#pragma</span> resource <span class="org-string">"*.dfm"</span>
</pre>
</div>
</div>

<div id="outline-container-org6a754de" class="outline-5">
<h5 id="org6a754de">Class TSettingsFrame not found.</h5>
<div class="outline-text-5" id="text-org6a754de">
<p>
<b>How to solve this?</b>
</p>

<p>
You can try different things:
</p>
<ol class="org-ol">
<li>Go back to an older SVN Version and reapply the changed manually.</li>
<li>Uncheck and recheck packages in the Project Options.</li>
</ol>

<p>
Notes:
</p>
<ul class="org-ul">
<li><code>bpl</code> files are stored in <code>C:\Users\Public\Documents\RAD Studio\12.0</code></li>
<li>Also check <code>Tools-&gt;Options</code> (e.g. Paths and Directories)</li>
</ul>

<p>
iLCD_XE.cbproj - file is missing the entry
</p>
<blockquote>
<p>
&lt;CppCompile Include="settings_frame.cpp"&gt;
	 &lt;Form&gt;SettingsFrame&lt;/Form&gt;
	 &lt;FormType&gt;dfm&lt;/FormType&gt;
	 &lt;DesignClass&gt;TFrame&lt;/DesignClass&gt;
	 &lt;DependentOn&gt;settings_frame.h&lt;/DependentOn&gt;
	 &lt;BuildOrder&gt;80&lt;/BuildOrder&gt;
&lt;/CppCompile&gt;
</p>


<p>
&lt;CppCompile Include="file_frame.cpp"&gt;
	 &lt;Form&gt;FileFrame&lt;/Form&gt;
	 &lt;FormType&gt;dfm&lt;/FormType&gt;
	 &lt;DesignClass&gt;TFrame&lt;/DesignClass&gt;
	 &lt;DependentOn&gt;file_frame.h&lt;/DependentOn&gt;
	 &lt;BuildOrder&gt;181&lt;/BuildOrder&gt;
&lt;/CppCompile&gt;
</p>
</blockquote>

<p>
If SettingsFrame == NULL, it might be missing in the main_form.dfm file
</p>

<p>
<b>Conjecture</b>
</p>

<p>
main_form.dfm and iLCD.cpp/Javaino_IDE.cpp which are automatically modified don't fit
together, when switching between the two projects.
</p>

<p>
The problem is that data from the SettingsFrame or PortFrame is also entered into main_form.dfm.
</p>

<p>
TAdvPage, TAdvPolyPage
</p>
</div>
</div>
</div>

<div id="outline-container-org9adf38e" class="outline-4">
<h4 id="org9adf38e">System out of ressources error</h4>
<div class="outline-text-4" id="text-org9adf38e">
<p>
Happened after removing DeleteAndNull from FormDestroy().
Seems that there are memory leaks that cause problems when the application is started
in debug mode many times.
<span class="timestamp-wrapper"><span class="timestamp">&lt;2016-08-31 Wed&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org0b2b297" class="outline-4">
<h4 id="org0b2b297">Embarcadero Bugs</h4>
<div class="outline-text-4" id="text-org0b2b297">
<ul class="org-ul">
<li>Can't name Units like Objects
convention: JavaSourceFrame refers to java_source_frame.cpp</li>
<li>Can't start program in debug mode 2nd time
disable incremental link</li>
</ul>
</div>

<div id="outline-container-org93ba9da" class="outline-5">
<h5 id="org93ba9da">Link Error LME288</h5>
<div class="outline-text-5" id="text-org93ba9da">
</div>
<div id="outline-container-org2cbe154" class="outline-6">
<h6 id="org2cbe154">Use the LAMarker tool to patch ilink32.exe</h6>
<div class="outline-text-6" id="text-org2cbe154">
<p>
(set/unset Large Address Aware bits)
If not already in C:\Program Files (x86)\Embarcadero\RAD Studio\12.0\bin
Download from <a href="http://cc.embarcadero.com/Item/30459">http://cc.embarcadero.com/Item/30459</a>
and do:
</p>
<pre class="example">
lamarker -M -Filink32.exe          (mark as Large Address Aware)
</pre>

<p>
(old version will be saved: C:\Program Files (x86)\Embarcadero\RAD Studio\12.0\bin\ilink32.exe.old)
<span class="timestamp-wrapper"><span class="timestamp">&lt;2017-01-10 Tue&gt;</span></span>
</p>
</div>
</div>

<div id="outline-container-org3072476" class="outline-6">
<h6 id="org3072476">Problem with the Virus Scanner.</h6>
<div class="outline-text-6" id="text-org3072476">
<p>
~&gt; Exclude folder C:/Program Files (x86)/Embarcadero/RAD Studio/12.0/bin from scan.
   that didn't really work
</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org1fa9a89" class="outline-2">
<h2 id="org1fa9a89">Embedded</h2>
<div class="outline-text-2" id="text-org1fa9a89">
</div>
<div id="outline-container-org5d35282" class="outline-3">
<h3 id="org5d35282">How to get started?</h3>
<div class="outline-text-3" id="text-org5d35282">
<p>
If you have an IDE (e.g. Keil uVision, MCUXPresso) that supports your device, normally a device dependent project
can be created that automatically includes all the code (startup, etc.) you need
to compile and run a program.
</p>

<p>
IDEs for different Manufacturers:
</p>
<dl class="org-dl">
<dt>NXP</dt><dd><code>MCUXpresso</code> and <code>LPCXpresso</code>, <code>Keil</code></dd>
<dt>Microchip AVR (Atmel)</dt><dd><code>Atmel Studio</code> (Windows only), <code>Arduino IDE</code>, <code>MPLAB X</code></dd>
<dt>STMicroelectronics</dt><dd><code>Keil</code></dd>
</dl>
</div>
</div>

<div id="outline-container-org167df26" class="outline-3">
<h3 id="org167df26">Interrupt Handlers (ISR)</h3>
<div class="outline-text-3" id="text-org167df26">
<p>
<b>Guidelines</b>
</p>
<ul class="org-ul">
<li>Keep them as small as possible.</li>
<li>Don't wait in an ISR. Avoid blocking function calls.</li>
<li>Avoid non-reentrant function calls.</li>
<li>Avoid dynamic memory allocations.</li>
</ul>

<p>
<b>Alarm bells</b>
</p>
<ul class="org-ul">
<li>Many disable interrupt instructions in the code.</li>
</ul>
</div>
</div>
<div id="outline-container-orgbc9c356" class="outline-3">
<h3 id="orgbc9c356">Bit Banging</h3>
<div class="outline-text-3" id="text-orgbc9c356">
<p>
Emulate a hardware interface with IO-Pins and Software (e.g. 1-Wire, Infrared Remote).
Also: generation of signals.
</p>

<p>
Raspberry Pi: pigpio library
</p>
</div>
</div>
<div id="outline-container-org7aae9e4" class="outline-3">
<h3 id="org7aae9e4">Memory Mapped IO</h3>
<div class="outline-text-3" id="text-org7aae9e4">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=uwzuAGtAEFk">https://www.youtube.com/watch?v=uwzuAGtAEFk</a></li>
</ul>
</div>

<div id="outline-container-orga1ac596" class="outline-4">
<h4 id="orga1ac596">Handling Registers</h4>
<div class="outline-text-4" id="text-orga1ac596">
<p>
How to represent device registers in the code?
</p>
</div>
</div>

<div id="outline-container-orgb3e20a1" class="outline-4">
<h4 id="orgb3e20a1">The C way</h4>
<div class="outline-text-4" id="text-orgb3e20a1">
<p>
Use a pointer cast (pointer placement).
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">typedef</span> <span class="org-type">uint32_t</span> <span class="org-keyword">volatile</span> <span class="org-type">device_register</span>;           <span class="org-comment-delimiter">// </span><span class="org-comment">define a register type</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">REGISTER</span> ((<span class="org-type">device_register</span>*) 0x30000000)
*REGISTER |= 1 &lt;&lt; 5;

<span class="org-comment-delimiter">// </span><span class="org-comment">or you do this</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">REGISTER</span> (*(<span class="org-type">device_register</span>*) 0x30000000)
REGISTER |= 1 &lt;&lt; 5;
</pre>
</div>

<p>
A more complicated example. The iMXRT1050 has 4 SPI interfaces.
The base register for the first interface is <code>LPSPI1 base address: 0x40394000</code> and
the offsets are:
</p>
<div class="picture" id="org83e861c">

<div id="org61ff816" class="figure">
<p><img src="resources/Embedded/SPI Registers.png" alt="SPI Registers.png" />
</p>
</div>

</div>

<p>
Now you can use a base register pointer to access individual registers.
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-doc">/** LPSPI - Register Layout Typedef */</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">LPSPI1_BASE</span>                              (0x40394000u)
<span class="org-doc">/** Peripheral LPSPI1 base pointer */</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">LPSPI1</span>                                   ((<span class="org-type">LPSPI_Type</span> *)LPSPI1_BASE)

<span class="org-preprocessor">#define</span> <span class="org-variable-name">__I</span>     <span class="org-keyword">volatile</span> <span class="org-keyword">const</span>       <span class="org-comment-delimiter">/*</span><span class="org-comment">!&lt; Defines 'read only' permissions</span><span class="org-comment-delimiter"> */</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">__O</span>     <span class="org-keyword">volatile</span>             <span class="org-comment-delimiter">/*</span><span class="org-comment">!&lt; Defines 'write only' permissions</span><span class="org-comment-delimiter"> */</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">__IO</span>    <span class="org-keyword">volatile</span>             <span class="org-comment-delimiter">/*</span><span class="org-comment">!&lt; Defines 'read / write' permissions</span><span class="org-comment-delimiter"> */</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> {
  __I  <span class="org-type">uint32_t</span> <span class="org-variable-name">VERID</span>;                             <span class="org-doc">/**&lt; Version ID Register, offset: 0x0 */</span>
  __I  <span class="org-type">uint32_t</span> <span class="org-variable-name">PARAM</span>;                             <span class="org-doc">/**&lt; Parameter Register, offset: 0x4 */</span>
       <span class="org-type">uint8_t</span> <span class="org-variable-name">RESERVED_0</span>[8];
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">CR</span>;                                <span class="org-doc">/**&lt; Control Register, offset: 0x10 */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">SR</span>;                                <span class="org-doc">/**&lt; Status Register, offset: 0x14 */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">IER</span>;                               <span class="org-doc">/**&lt; Interrupt Enable Register, offset: 0x18 */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">DER</span>;                               <span class="org-doc">/**&lt; DMA Enable Register, offset: 0x1C */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">CFGR0</span>;                             <span class="org-doc">/**&lt; Configuration Register 0, offset: 0x20 */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">CFGR1</span>;                             <span class="org-doc">/**&lt; Configuration Register 1, offset: 0x24 */</span>
       <span class="org-type">uint8_t</span> <span class="org-variable-name">RESERVED_1</span>[8];
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">DMR0</span>;                              <span class="org-doc">/**&lt; Data Match Register 0, offset: 0x30 */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">DMR1</span>;                              <span class="org-doc">/**&lt; Data Match Register 1, offset: 0x34 */</span>
       <span class="org-type">uint8_t</span> <span class="org-variable-name">RESERVED_2</span>[8];
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">CCR</span>;                               <span class="org-doc">/**&lt; Clock Configuration Register, offset: 0x40 */</span>
       <span class="org-type">uint8_t</span> <span class="org-variable-name">RESERVED_3</span>[20];
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">FCR</span>;                               <span class="org-doc">/**&lt; FIFO Control Register, offset: 0x58 */</span>
  __I  <span class="org-type">uint32_t</span> <span class="org-variable-name">FSR</span>;                               <span class="org-doc">/**&lt; FIFO Status Register, offset: 0x5C */</span>
  __IO <span class="org-type">uint32_t</span> <span class="org-variable-name">TCR</span>;                               <span class="org-doc">/**&lt; Transmit Command Register, offset: 0x60 */</span>
  __O  <span class="org-type">uint32_t</span> <span class="org-variable-name">TDR</span>;                               <span class="org-doc">/**&lt; Transmit Data Register, offset: 0x64 */</span>
       <span class="org-type">uint8_t</span> <span class="org-variable-name">RESERVED_4</span>[8];
  __I  <span class="org-type">uint32_t</span> <span class="org-variable-name">RSR</span>;                               <span class="org-doc">/**&lt; Receive Status Register, offset: 0x70 */</span>
  __I  <span class="org-type">uint32_t</span> <span class="org-variable-name">RDR</span>;                               <span class="org-doc">/**&lt; Receive Data Register, offset: 0x74 */</span>
} <span class="org-type">LPSPI_Type</span>;
</pre>
</div>

<p>
A register is accessed like this:
</p>
<div class="org-src-container">
<pre class="src src-c"><span class="org-comment-delimiter">// </span><span class="org-comment">Reset all internal logic and registers, except the Control Register. Remains set until cleared by software.</span>
LPSPI_BASEADDR-&gt;CR |= LPSPI_CR_RST_MASK;

<span class="org-comment-delimiter">// </span><span class="org-comment">set reset bit back to 0</span>
LPSPI_BASEADDR-&gt;CR &amp;= <span class="org-negation-char">!</span>LPSPI_CR_RST_MASK;
</pre>
</div>
</div>
</div>

<div id="outline-container-org8e36d0c" class="outline-4">
<h4 id="org8e36d0c">The C++ way</h4>
<div class="outline-text-4" id="text-org8e36d0c">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">device_register</span> = <span class="org-constant">std</span>::uint32_t <span class="org-keyword">volatile</span>;

<span class="org-type">device_register</span> &amp;<span class="org-variable-name">REGISTER</span> = *<span class="org-keyword">reinterpret_cast</span>&lt;<span class="org-type">device_register</span>*&gt;(0x30000000);
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9da8eb7" class="outline-3">
<h3 id="org9da8eb7">The Build Process</h3>
<div class="outline-text-3" id="text-org9da8eb7">
<p>
When programming the user has to provide the tools used with some
information about the target platform.
</p>

<p>
The big picture is this:<br />
Object files are linked together to get one relocatable program.
Finally physical memory addresses are assigned to relative addresses
in the relocatable program (relocation).
</p>

<p>
All the stuff has to be stored in some non-volatile memory (NVM, e.g. "NOR-Flash").
When the controller boots it usually has to initialize the RAM. This means
</p>
<ol class="org-ol">
<li>Initialized variables (<code>.data</code> segments) are copied from NVM into RAM.</li>
<li>Non-Initialized or 0-initialized variables (<code>.bss</code> segments) do not have to
reside in NVM (this space can be saved) and are not copied.</li>
</ol>
</div>

<div id="outline-container-org633c62f" class="outline-4">
<h4 id="org633c62f">Object Files</h4>
<div class="outline-text-4" id="text-org633c62f">
<p>
One object file is generated per source code file.
</p>

<p>
Object File Formats:
</p>
<ul class="org-ul">
<li>Common Object File Format (COFF)</li>
<li>Executable and Linkable Format (former: Extended Linker Format) (ELF)</li>
</ul>

<p>
Most object files begin with a header that describes the sections
that follow.
</p>

<p>
Typical sections are:
</p>
<ul class="org-ul">
<li><code>.text</code> - instructions (r-x)</li>
<li><code>.data</code> - static and global initialized variables (rw-)</li>
<li><code>.bss</code> - non-initialized and 0-initialized variables (rw-)</li>
<li><code>.rodata</code> - constant data, e.g. string literals, const variables (r&#x2013;)</li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Non-static variables are stored on the stack.</li>
<li>Those names ("text", "data", "bss") also appear in the map files
produced by the linker.</li>
</ul>

<p>
Object Files can be converted into human readable form with tools like
<i>objdump</i> (GNU).
</p>
</div>
</div>
<div id="outline-container-orgd41e38e" class="outline-4">
<h4 id="orgd41e38e">Linking</h4>
<div class="outline-text-4" id="text-orgd41e38e">
<p>
absolutely-located binary image
Embedded applications are mostly statically linked and executed as
a single binary image.
</p>
</div>

<div id="outline-container-orgc7a3fbd" class="outline-5">
<h5 id="orgc7a3fbd">Startup Code</h5>
<div class="outline-text-5" id="text-orgc7a3fbd">
<p>
Small block of assembly code initializing the RAM and allocating e.g. space for the stack
and the heap (sometimes called <code>crt0</code> - C runtime zero)
</p>

<p>
Example: GNU LD
</p>

<p>
<code>Global Section Table</code> in the Linkerscript File:
</p>
<pre class="example" id="orgc341392">
/* Global Section Table */
. = ALIGN(4) ;
__section_table_start = .;
__data_section_table = .;

LONG(LOADADDR(.data));
LONG(    ADDR(.data));
LONG(  SIZEOF(.data));

LONG(LOADADDR(.data_RAM2));
LONG(    ADDR(.data_RAM2));
LONG(  SIZEOF(.data_RAM2));

LONG(LOADADDR(.data_RAM3));
LONG(    ADDR(.data_RAM3));
LONG(  SIZEOF(.data_RAM3));

LONG(LOADADDR(.data_RAM4));
LONG(    ADDR(.data_RAM4));
LONG(  SIZEOF(.data_RAM4));
__data_section_table_end = .;

__bss_section_table = .;
LONG(    ADDR(.bss));
LONG(  SIZEOF(.bss));

LONG(    ADDR(.bss_RAM2));
LONG(  SIZEOF(.bss_RAM2));

LONG(    ADDR(.bss_RAM3));
LONG(  SIZEOF(.bss_RAM3));

LONG(    ADDR(.bss_RAM4));
LONG(  SIZEOF(.bss_RAM4));
__bss_section_table_end = .;

__section_table_end = . ;
/* End of Global Section Table */
</pre>

<p>
Corresponding Map File:
</p>
<pre class="example" id="org1b90267">
0x600022a0                __section_table_start = .
0x600022a0                __data_section_table = .
0x600022a0        0x4 LONG 0x6000e2d8 LOADADDR (.data)
0x600022a4        0x4 LONG 0x20000000 ADDR (.data)
0x600022a8        0x4 LONG 0x3b8 SIZEOF (.data)
0x600022ac        0x4 LONG 0x60005fd8 LOADADDR (.data_RAM2)
0x600022b0        0x4 LONG 0x0 ADDR (.data_RAM2)
0x600022b4        0x4 LONG 0x8300 SIZEOF (.data_RAM2)
0x600022b8        0x4 LONG 0x6000e2d8 LOADADDR (.data_RAM3)
0x600022bc        0x4 LONG 0x20200000 ADDR (.data_RAM3)
0x600022c0        0x4 LONG 0x0 SIZEOF (.data_RAM3)
0x600022c4        0x4 LONG 0x6000e2d8 LOADADDR (.data_RAM4)
0x600022c8        0x4 LONG 0x80000000 ADDR (.data_RAM4)
0x600022cc        0x4 LONG 0x0 SIZEOF (.data_RAM4)
0x600022d0                __data_section_table_end = .
0x600022d0                __bss_section_table = .
0x600022d0        0x4 LONG 0x20000800 ADDR (.bss)
0x600022d4        0x4 LONG 0x5990 SIZEOF (.bss)
0x600022d8        0x4 LONG 0x8300 ADDR (.bss_RAM2)
0x600022dc        0x4 LONG 0x0 SIZEOF (.bss_RAM2)
0x600022e0        0x4 LONG 0x20200000 ADDR (.bss_RAM3)
0x600022e4        0x4 LONG 0x0 SIZEOF (.bss_RAM3)
0x600022e8        0x4 LONG 0x80000000 ADDR (.bss_RAM4)
0x600022ec        0x4 LONG 0x0 SIZEOF (.bss_RAM4)
0x600022f0                __bss_section_table_end = .
0x600022f0                __section_table_end = .
</pre>

<p>
This table can be found in the NOR-Flash, it tells the <code>ResetISR</code> function via the variable <code>__data_section_table</code> etc. which blocks
of data (e.g. <code>.data</code>) have to be copied from where (e.g. <code>0x6000e2d8</code> - NOR-Flash) to where (<code>0x20000000</code> - SRAM_DTC).
</p>
</div>
</div>

<div id="outline-container-org1b16a42" class="outline-5">
<h5 id="org1b16a42">Locating</h5>
<div class="outline-text-5" id="text-org1b16a42">
<p>
Conversion from relocatable program (with relative addresses) to
an executable binary image. Information about the memory on the
target system has to be provided in order to perform this step.
</p>

<p>
This information is passed to the linker:
</p>
<ul class="org-ul">
<li>scatter file (Keil)</li>
<li>linker script (GNU)</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd5e8cee" class="outline-3">
<h3 id="orgd5e8cee">GNU Toolchain</h3>
<div class="outline-text-3" id="text-orgd5e8cee">
<p>
The GCC (GNU compiler collection) version for ARM-controllers is called <code>ARM-GCC</code>.
</p>

<ul class="org-ul">
<li>Embedded Version: <code>arm-none-eabi-gcc</code> (eabi - Embedded Application Binary Interface)</li>
<li>OS Version (Linux): <code>arm-elf-gcc</code>, <code>gcc-arm-linux-gnueabi</code> (Beagle Bone)</li>
</ul>

<p>
The Toolchain includes:
</p>
<ul class="org-ul">
<li>Linker, Assembler</li>
<li>GCC</li>
<li>C-Standard Library (<code>newlib</code> or <code>newlib-nano</code>)</li>
</ul>
</div>

<div id="outline-container-org576196a" class="outline-4">
<h4 id="org576196a">Compiler GCC</h4>
<div class="outline-text-4" id="text-org576196a">
<ul class="org-ul">
<li>Surpress warnings locally:</li>
</ul>
<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#pragma</span> GCC diagnostic push
<span class="org-preprocessor">#pragma</span> GCC diagnostic ignored <span class="org-string">"-Wtype-limits"</span>
<span class="org-function-name">myfun</span>();
<span class="org-preprocessor">#pragma</span> GCC diagnostic pop
</pre>
</div>

<ul class="org-ul">
<li><code>__attribute__((unused))</code> : Mark a symbol as potentially being unused (avoid warnings).</li>
<li><code>__attribute__((used))</code> : Avoid removal by the linker.</li>
<li><code>__attribute__((always_inline))</code> : GCC does not inline any functions when not optimizing (<code>static inline</code> wont do).</li>
</ul>
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">inline</span> <span class="org-type">void</span> <span class="org-function-name">fun</span>() <span class="org-keyword">__attribute__</span>((always_inline));
</pre>
</div>
<ul class="org-ul">
<li><code>__attribute__ ((packed))</code> : Use smallest possible alignment&#x2013;one byte for a variable, and one bit for a field.</li>
</ul>
</div>
</div>

<div id="outline-container-org2b152f6" class="outline-4">
<h4 id="org2b152f6">GNU Linker</h4>
<div class="outline-text-4" id="text-org2b152f6">
<ul class="org-ul">
<li><p>
<code>__attribute__((weak))</code> : Declare weakly symbol.
This means:
</p>
<ul class="org-ul">
<li>The Linker doesn't have to find a definition.</li>
<li>If there is a strong definition, the linker will ignore the weak ones (override default implementation).</li>
</ul>
<div class="org-src-container">
<pre class="src src-c"><span class="org-keyword">__attribute__</span> ((weak)) <span class="org-type">void</span> <span class="org-function-name">DMA0_DMA16_IRQHandler</span>(<span class="org-type">void</span>);
</pre>
</div></li>
</ul>
</div>

<div id="outline-container-org13de25c" class="outline-5">
<h5 id="org13de25c">Linker Script Files</h5>
<div class="outline-text-5" id="text-org13de25c">
<p>
The linker combines input files into a single output file.
Input and output files have a list of sections. These sections can be loadable or allocatable.
Each loadable section has a ROM address and a RAM address specifying from where to where the section will be loaded.
</p>

<ul class="org-ul">
<li>Linker Script File Option: <code>-T file_path.ld</code></li>
<li><p>
Memory Layout (memory regions):
</p>
<pre class="example" id="org010ca45">
MEMORY
{
  /* Define each memory region */
  BOARD_FLASH (rx) : ORIGIN = 0x60000000, LENGTH = 0x1b000 /* 108K bytes (alias Flash) */
  SRAM_DTC (rwx) : ORIGIN = 0x20000000, LENGTH = 0x10000 /* 64K bytes (alias RAM) */
  SRAM_ITC (rwx) : ORIGIN = 0x0, LENGTH = 0x10000 /* 64K bytes (alias RAM2) */
  SRAM_OC (rwx) : ORIGIN = 0x20200000, LENGTH = 0x20000 /* 128K bytes (alias RAM3) */
  BOARD_SDRAM (rwx) : ORIGIN = 0x80000000, LENGTH = 0x2000000 /* 32M bytes (alias RAM4) */
}
</pre></li>
<li><p>
Sections (inside memory regions):
</p>
<pre class="example" id="org8d31b51">
SECTIONS
{
    /* manually inserted */
    .firmwareStartBlock 0x6001b000 : ALIGN(4)
    {
        KEEP(*(.firmware_start))
    } &gt; BOARD_FLASH

    /* manually inserted */
    .datainfoBlock 0x6001b200 : ALIGN(4)
    {
        KEEP(*(.datainfo))
        KEEP(*(.datainfo_desc))
    } &gt; BOARD_FLASH
...
    /* !!!!!!!!!!! YOU CAN ADD DATA TO THE BINARY */
    .SIGNATURE_END : ALIGN(4)
    {
        LONG(0x636c7064)
    } &gt; BOARD_FLASH

    /* !!!!!!!!!!! YOU CAN DEFINE SYMBOLS (and use it in the code) */
    _signature_address_at_end_of_image = LOADADDR(.SIGNATURE_END);
</pre></li>
<li><p>
Move Functions to RAM:
</p>
<ul class="org-ul">
<li><code>__attribute__ ((used, section(".isr_vector")))</code></li>
<li>You can also use linkscripts to put complete modules into RAM:</li>
</ul>
<pre class="example" id="org2a89d43">
/* It's important to exclude the data from the .text section */
.text : ALIGN(4)
{

   *(EXCLUDE_FILE(*flexspi_hyper_flash_ops.o) .text*)
   *(EXCLUDE_FILE(*usb_device_ch9.o) .rodata.*)

   /* *(.rodata.*) - must not do this here, otherwise data will be included again, the above does
      already include all .rodata.* exept the excluded files */

} &gt; FLASH_REGION

.data_RAM : ALIGN(4)
{

   *flexspi_hyper_flash_ops.o(.text*)
   *usb_device_ch9.o(.rodata.*)

} &gt; SDRAM_REGION
</pre></li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li><code>EXCLUDE_FILE (*somefile.o) *(.text .rdata)</code> - only the first (<code>.text</code>) section type will be excluded.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc1dcdfe" class="outline-5">
<h5 id="orgc1dcdfe">Map Files</h5>
<div class="outline-text-5" id="text-orgc1dcdfe">
<ul class="org-ul">
<li><code>Discarded input sections</code> : Contains functions and variables that are compiled but not included in the final binary
because they are not used. So the interesting stuff really starts at <code>Memory Configuration</code>.</li>

<li><code>Memory Configuration</code> : Contains the defined memory regions (as defined in the linkerscript file).</li>
</ul>
</div>
</div>
<div id="outline-container-orgc9c26b8" class="outline-5">
<h5 id="orgc9c26b8">Tools</h5>
<div class="outline-text-5" id="text-orgc9c26b8">
<ul class="org-ul">
<li><code>arm-none-eabi-objcopy</code> : copy and translate object files, e.g. copy .afx to .bin file</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org3c511e4" class="outline-4">
<h4 id="org3c511e4">GNU Debugger gdb</h4>
<div class="outline-text-4" id="text-org3c511e4">
<p>
<a href="#org1d16c1c">GNU Debugger</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org9039f80" class="outline-3">
<h3 id="org9039f80">Debugging</h3>
<div class="outline-text-3" id="text-org9039f80">
</div>
<div id="outline-container-org1d16c1c" class="outline-4">
<h4 id="org1d16c1c">GNU Debugger</h4>
<div class="outline-text-4" id="text-org1d16c1c">
</div>
<div id="outline-container-org23bed47" class="outline-5">
<h5 id="org23bed47">Remote Debugging (gdbserver)</h5>
<div class="outline-text-5" id="text-org23bed47">
<p>
On a desktop pc gdb has direct access to the binary.
</p>

<p>
On embedded systems gdb might be too big (~2.4 MB)
Instead use <code>ARCH-linux-gdb</code> + <code>gdbserver</code> (~100 KB)
</p>
<ul class="org-ul">
<li>Can run with stripped libraries, everything needed is on the host.</li>
</ul>
</div>

<div id="outline-container-org6905307" class="outline-6">
<h6 id="org6905307">Usage</h6>
<div class="outline-text-6" id="text-org6905307">
<p>
<b>On the Target</b>
</p>
<pre class="example">
gdbserver localhost:&lt;port&gt; &lt;executable&gt; &lt;args&gt;
gdbserver /dev/ttyS0 &lt;executable&gt; &lt;args&gt;
</pre>


<p>
Attach to a running program
</p>
<pre class="example">
gdbserver --attach localhost:&lt;port&gt; &lt;pid&gt;
</pre>


<p>
<b>On the Host</b>
</p>
<pre class="example">
ARCH-linux-gdb &lt;executable&gt;
gdb&gt; target remote &lt;ip-addr&gt;:&lt;port&gt;
gdb&gt; target remote /dev/ttyS0
</pre>

<p>
Tell <code>gdb</code> where the libraries are (without <code>lib/</code>)
</p>
<pre class="example">
gdb&gt; set sysroot &lt;library-path&gt;
</pre>
</div>
</div>

<div id="outline-container-org28a1e99" class="outline-6">
<h6 id="org28a1e99">Crash due to segmentation fault</h6>
<div class="outline-text-6" id="text-org28a1e99">
<p>
Configure Linux to generate a core file to figure out where the application
crashed.
</p>

<p>
In the shell (or shell script).
</p>
<pre class="example">
ulimit -c unlimited
</pre>


<p>
On the host (post mortem analysis)
Transfer the core file.
</p>
<pre class="example">
ARCH-linux-gdb -c core-file application-binary
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2d418a1" class="outline-4">
<h4 id="org2d418a1">llvm - LLDB</h4>
<div class="outline-text-4" id="text-org2d418a1">
<p>
to be explored
</p>
</div>
</div>

<div id="outline-container-orge345f6c" class="outline-4">
<h4 id="orge345f6c">OpenOCD</h4>
</div>

<div id="outline-container-orgef7507a" class="outline-4">
<h4 id="orgef7507a">Memory Checkers</h4>
<div class="outline-text-4" id="text-orgef7507a">
</div>
<div id="outline-container-orgf51b17c" class="outline-5">
<h5 id="orgf51b17c">Valgrind</h5>
<div class="outline-text-5" id="text-orgf51b17c">
<p>
Can detect memory management and threading bugs.
It's also a profiler (tells you how much time is spent where).
</p>

<p>
Check for leakage example:
</p>
<pre class="example">
valgrind --leak-check=yes ls -la
</pre>


<ul class="org-ul">
<li>Runs in its own virtual cpu core.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga016608" class="outline-4">
<h4 id="orga016608">System analysis</h4>
<div class="outline-text-4" id="text-orga016608">
<p>
How does it work?
</p>
<ul class="org-ul">
<li>ovverride library functions</li>
</ul>
</div>

<div id="outline-container-org870233d" class="outline-5">
<h5 id="org870233d">tracealyzer</h5>
<div class="outline-text-5" id="text-org870233d">
<p>
<a href="https://percepio.com/tz/tracealyzer-for-linux/">https://percepio.com/tz/tracealyzer-for-linux/</a>
</p>
</div>
</div>
<div id="outline-container-org8ffd21f" class="outline-5">
<h5 id="org8ffd21f">strace</h5>
<div class="outline-text-5" id="text-org8ffd21f">
<p>
Trace system calls.
</p>

<p>
new process
</p>
<pre class="example">
strace &lt;command&gt;
</pre>

<p>
existing process
</p>
<pre class="example">
strace -p &lt;pid&gt;
</pre>

<p>
statistic of system calls
</p>
<pre class="example">
strace -c &lt;command&gt;
</pre>
</div>
</div>
<div id="outline-container-org857b63d" class="outline-5">
<h5 id="org857b63d">ltrace</h5>
<div class="outline-text-5" id="text-org857b63d">
<p>
Trace library calls used by a program.
</p>
</div>
</div>
<div id="outline-container-org65e240b" class="outline-5">
<h5 id="org65e240b">OProfile</h5>
<div class="outline-text-5" id="text-org65e240b">
<p>
system-wide profiling tool.
</p>
<ul class="org-ul">
<li>requires kernel patch</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0b1cc64" class="outline-4">
<h4 id="org0b1cc64">CMSIS (Cortex Microcontroller Software Interface Standard)</h4>
<div class="outline-text-4" id="text-org0b1cc64">
<p>
Common interface for programming Cortex-M controllers.
</p>
</div>
</div>

<div id="outline-container-orgf52b5c6" class="outline-4">
<h4 id="orgf52b5c6">J-Tag, SWD, SWO, Segger RTT</h4>
<div class="outline-text-4" id="text-orgf52b5c6">
<p>
Usually there is a gdbserver running on the hardware debugger talking to the pc
via USB.
</p>

<ul class="org-ul">
<li>SWO (Single Wire Output): Print Debug Messages fast.
<ul class="org-ul">
<li>Send Debug messages.</li>
<li>Record interrupt entry/exit.</li>
<li>Record function entry/exit.</li>
<li>Eclipse: <a href="https://mcuoneclipse.com/2016/10/17/tutorial-using-single-wire-output-swo-with-arm-cortex-m-and-eclipse/">https://mcuoneclipse.com/2016/10/17/tutorial-using-single-wire-output-swo-with-arm-cortex-m-and-eclipse/</a></li>
</ul></li>

<li>Segger RTT (Real Time Terminal)</li>
</ul>
</div>
</div>
<div id="outline-container-orgc1f6234" class="outline-4">
<h4 id="orgc1f6234">Hardware</h4>
<div class="outline-text-4" id="text-orgc1f6234">
<p>
Signals
</p>
<ul class="org-ul">
<li>Logic Analyzer / Oscilloscope</li>
<li>Use Debug GPIO Pins</li>
</ul>

<p>
JTag, SWD, SWO
</p>
<ul class="org-ul">
<li>ARMKEIL ULINK2 (350 EUR)</li>
<li>Segger J-Link Base (300 EUR)
<ul class="org-ul">
<li>gdbserver</li>
</ul></li>
<li>PEMicro Multilink Universal (200 EUR)</li>
<li>NXP LPC-Link2 (20 EUR)
<ul class="org-ul">
<li>redlink server (not gdbserver)</li>
</ul></li>
<li>Black Magic Probe</li>
</ul>

<p>
Tracing
</p>
<ul class="org-ul">
<li>QTrace (350 EUR): <a href="https://www.pdqlogic.com/">https://www.pdqlogic.com/</a></li>
<li>Segger J-Link Pro</li>
</ul>
</div>

<div id="outline-container-org45e4477" class="outline-5">
<h5 id="org45e4477">Segger J-Link Base</h5>
<div class="outline-text-5" id="text-org45e4477">
<p>
<a href="https://wiki.segger.com/i.MXRT1050">https://wiki.segger.com/i.MXRT1050</a>
</p>

<p>
Change the entry in <code>C:\Program Files (x86)\SEGGER\JLink\JLinkDevices.xml</code> from Hyperflash to QSPI-Flash.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org28c33ef" class="outline-3">
<h3 id="org28c33ef">MCUXpressoIDE</h3>
<div class="outline-text-3" id="text-org28c33ef">
<ul class="org-ul">
<li>Download <code>SDK_2.5.1_EVKB-IMXRT1050</code> and drag it to MXUXpresso</li>
<li>CMSIS-DAP (Cortex Microcontroller Software Interface Standard - Debug Access Port)</li>
</ul>
</div>
<div id="outline-container-org14de808" class="outline-4">
<h4 id="org14de808">Pragmas etc</h4>
<div class="outline-text-4" id="text-org14de808">
<ul class="org-ul">
<li><code>__STATIC_INLINE</code></li>
<li><code>__attribute__ ((used, section(".isr_vector")))</code></li>
</ul>
</div>
<div id="outline-container-org5353a7d" class="outline-5">
<h5 id="org5353a7d">Move Functions to RAM</h5>
<div class="outline-text-5" id="text-org5353a7d">
<div class="org-src-container">
<pre class="src src-c"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;cr_section_macros.h&gt;</span>

<span class="org-function-name">__RAMFUNC</span>(SRAM_ITC)
<span class="org-type">void</span> <span class="org-function-name">myfun_in_ram</span>()
{}
</pre>
</div>

<p>
In MCUXpresso you can also use linkscripts to put complete modules into ram:
</p>
<pre class="example" id="orgc8475f0">
&lt;#if memory.name=="SRAM_ITC"&gt;

*flexspi_hyper_flash_ops.o(.text*)
*flexspi_nor_flash_ops.o(.text*)
*fsl_flexspi.o(.text*)

&lt;/#if&gt;
</pre>
<p>
Note that they have to be in a folder <code>linkerscripts</code> directly in the project
folder.
</p>
</div>
</div>
</div>
<div id="outline-container-orgbb96010" class="outline-4">
<h4 id="orgbb96010">C Libraries used</h4>
<div class="outline-text-4" id="text-orgbb96010">
<ul class="org-ul">
<li>Newlib : GNU C/C++ Library</li>
<li>NewlibNano</li>
<li>Redlib : very small (not GNU C library)</li>
</ul>
</div>
</div>
<div id="outline-container-orge731828" class="outline-4">
<h4 id="orge731828">Redlink aka Link Server and gdb</h4>
<div class="outline-text-4" id="text-orge731828">
<p>
Redlink consists of various layers:
</p>

<dl class="org-dl">
<dt><code>crt_emu_cm_redlink</code></dt><dd>Debug driver underneath the debugger.</dd>
<dt><code>redlink/link server</code></dt><dd>Server running on host computer allowing multiple connections via one debug probe
to a single MCU.</dd>
<dt><code>debug probe firmware</code></dt><dd>CMSIS-DAP firmware running on e.g. Keil ULINK2.</dd>
</dl>

<p>
Debugger used is: <code>arm-none-eabi-gdb</code>
</p>
</div>

<div id="outline-container-orgfca5f43" class="outline-5">
<h5 id="orgfca5f43">Problems</h5>
<div class="outline-text-5" id="text-orgfca5f43">
<pre class="example" id="orgaddde60">
Awaiting telnet connection to port 3331 ...
GDB nonstop mode enabled
GDB stub (crt_emu_cm_redlink) terminating - GDB protocol problem: Pipe has been closed by GDB.
</pre>
<p>
The cause of this error seems to be that the gdb tried to download a SDRAM-Section although
the SDRAM was not yet initialized.
</p>

<p>
gdb trace:
</p>
<pre class="example" id="org6566895">
342,285 (gdb)
342,285 28-target-download
342,566 29-list-thread-groups
343,229 28+download,{section=".data_RAM4",section-size="135168",total-size="4095302"}
</pre>
</div>
</div>
</div>

<div id="outline-container-org89fc23a" class="outline-4">
<h4 id="org89fc23a">Notes</h4>
<div class="outline-text-4" id="text-org89fc23a">
<p>
What happens when you remove the Memory Layout in <code>MCU settings</code>?
</p>
<ul class="org-ul">
<li>The image will not be correctly deployed (you need to specify the driver).</li>
<li>All sorts of debugging problems.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org24e18b4" class="outline-3">
<h3 id="org24e18b4">FatFs</h3>
<div class="outline-text-3" id="text-org24e18b4">
<ul class="org-ul">
<li>FatFs: <a href="http://elm-chan.org/docs/fat_e.html">http://elm-chan.org/docs/fat_e.html</a></li>
</ul>

<p>
A Logical volume (logical drive) consists of:
</p>
<ol class="org-ol">
<li>Volume Configuration</li>
<li>FAT</li>
<li>Data</li>
</ol>

<p>
Data is transferred in sectors (typically 512 Bytes), addressed with a sector number.
</p>
</div>
</div>
</div>

<div id="outline-container-org573efc9" class="outline-2">
<h2 id="org573efc9">Forth</h2>
<div class="outline-text-2" id="text-org573efc9">
<p>
Online IDE (gforth): <a href="https://www.tutorialspoint.com/execute_forth_online.php">https://www.tutorialspoint.com/execute_forth_online.php</a>
</p>

<p>
All programming in <code>Forth</code> is done manipulating data on the stack.
</p>

<p>
High level programming in Forth means "building definitions upon previous definitions".
At the highest level Forth source code looks like a natural language.
Forth has been called a meta-application language  a language that you can use to create problem-oriented languages.
</p>

<p>
Good organization and effective communication require that you
</p>

<ol class="org-ol">
<li>define useful tasks and give each task a name</li>
<li>group related tasks together in larger tasks and give each of these a name, and so on.</li>
</ol>

<p>
Commands are called <i>words</i>.
Executing a command is called "naming a word".
</p>

<p>
Everything is either a word or a number.
</p>

<div class="org-src-container">
<pre class="src src-Forth">3 4 + .
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b4589d" class="outline-2">
<h2 id="org0b4589d">Funny</h2>
<div class="outline-text-2" id="text-org0b4589d">
</div>
<div id="outline-container-org190301b" class="outline-3">
<h3 id="org190301b">Choose Constants</h3>
<div class="outline-text-3" id="text-org190301b">
<ul class="org-ul">
<li>Wilson Prime Numbers</li>
<li>Bell Prime Numbers</li>
<li>Mersenne Prime Numbers</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgbfefa7a" class="outline-2">
<h2 id="orgbfefa7a">Haskell</h2>
<div class="outline-text-2" id="text-orgbfefa7a">
<div class="REFERENCES" id="orgb815dbb">
<ul class="org-ul">
<li><a href="../../../../../../../Science/Technology/Computer Science/Languages/Haskell/Haskell.mm">Haskell.mm</a></li>
</ul>

</div>
<p>
Whats the point about a functional language?
All computations are done by evaluating expressions yielding values.
</p>
<ul class="org-ul">
<li><p>
Every value has a type.
</p>
<pre class="example" id="org7a51c97">
       5  :: Integer
    'a' :: Char
    inc :: Integer -&gt; Integer
[1,2,3] :: [Integer]
('b',4) :: (Char,Integer)
</pre>
<p>
Read "::" "has type".
</p></li>
</ul>

<p>
Key Aspects of functional programming:
</p>
<ul class="org-ul">
<li>immutabiltiy</li>
<li>no side effects</li>
<li>functions are like values
<ul class="org-ul">
<li>can be assigned to a variable</li>
<li>can be passed to a function</li>
<li>can be returned from a function</li>
</ul></li>
</ul>
</div>

<div id="outline-container-orgebb0b96" class="outline-3">
<h3 id="orgebb0b96">Reading: Real World Haskell</h3>
<div class="outline-text-3" id="text-orgebb0b96">
<p>
Notes:
</p>
<ul class="org-ul">
<li>Lower case letters are variables, upper case letters are concrete types.</li>
<li id="lazy evaluation">expressions are not evaluated as long as possible.</li>
<li>polymorphic functions have type variables in their signatures.</li>
<li id="pure functions">without sideeffects, i.e. it only depends on it's parameters</li>
<li>Haskell has neither a <i>for</i> nor a <i>while</i> loop.</li>
</ul>
</div>
<div id="outline-container-orga38a4d2" class="outline-4">
<h4 id="orga38a4d2">Chapter 3 - Defining Data Types</h4>
<div class="outline-text-4" id="text-orga38a4d2">
<p>
Type Constructor and value constructor - like a definition
</p>

<p>
Type Synonyms - aliases for readability (typedef)
</p>

<p>
Algebraic Data Types
</p>

<dl class="org-dl">
<dt><code>map</code></dt><dd>Takes a function and applies it to every element in a list.</dd>
</dl>
</div>
</div>

<div id="outline-container-orgfd01b4e" class="outline-4">
<h4 id="orgfd01b4e">How to read function type signatures?</h4>
<div class="outline-text-4" id="text-orgfd01b4e">
<p>
Multiple Arguments: (curried functions)
</p>
<pre class="example">
arg1 -&gt; arg2 -&gt; ret
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1db6ad8" class="outline-2">
<h2 id="org1db6ad8">HP 48</h2>
<div class="outline-text-2" id="text-org1db6ad8">
<p>
A HP 48 program is an object inside <code>&lt;&lt; &gt;&gt;</code>.
Store program with new name n:
</p>
<ul class="org-ul">
<li>put program on stack</li>
<li>put n on the stack (inside '')</li>
<li>STO</li>
</ul>
<p>
or, when variable already exists:
</p>
<ul class="org-ul">
<li>press &lt;-| and variable button</li>
</ul>

<p>
See
</p>
<ul class="org-ul">
<li>Command reference in <a href="../../../../../../../Science/Technology/Computer Science/HP48/HP 48G Series User's Guide.pdf">HP 48G Series User's Guide.pdf</a> (Appendix H)</li>
<li>Operation index in <a href="../../../../../../../Science/Technology/Computer Science/HP48/HP 48G Series User's Guide.pdf">HP 48G Series User's Guide.pdf</a> (Appendix G)</li>
</ul>
</div>

<div id="outline-container-org02b70f5" class="outline-3">
<h3 id="org02b70f5">Stack Operations</h3>
<div class="outline-text-3" id="text-org02b70f5">
<pre class="example">
press   &lt;-| STACK
</pre>


<dl class="org-dl">
<dt><code>DUP</code>  </dt><dd>Duplicates object on level 1</dd>
<dt><code>DUP2</code> </dt><dd>Duplicates objects on level 1 and 2</dd>
</dl>
</div>
</div>

<div id="outline-container-org03df726" class="outline-3">
<h3 id="org03df726">Examples:</h3>
<div class="outline-text-3" id="text-org03df726">
<ul class="org-ul">
<li><p>
Algebraic Expression:
</p>
<pre class="example">
&lt;&lt; '1+2' -&gt;NUM &gt;&gt;
</pre></li>
<li><p>
Evaluate sub-program:
</p>
<pre class="example">
&lt;&lt; &lt;&lt;1 2 + &gt;&gt; EVAL &gt;&gt;
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org7a87003" class="outline-3">
<h3 id="org7a87003">Local variables</h3>
<div class="outline-text-3" id="text-org7a87003">
<p>
Example:
</p>
<ul class="org-ul">
<li><p>
usage with an algebraic expression:
</p>
<pre class="example">
&lt;&lt; -&gt; v1 v2 v3 'v1+v2+v3' &gt;&gt;
</pre></li>
<li><p>
or using a sub-program:
</p>
<pre class="example">
&lt;&lt; -&gt; v1 v2 v3 &lt;&lt; v1 v2 v3 + + &gt;&gt; &gt;&gt;
</pre></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9764c3a" class="outline-2">
<h2 id="org9764c3a">Java</h2>
<div class="outline-text-2" id="text-org9764c3a">
</div>
<div id="outline-container-org1c67e50" class="outline-3">
<h3 id="org1c67e50">Java Keywords</h3>
<div class="outline-text-3" id="text-org1c67e50">

<div id="org3423f15" class="figure">
<p><img src="resources//JavaKeywords.PNG" alt="JavaKeywords.PNG" />
</p>
</div>
</div>
</div>

<div id="outline-container-org052a50a" class="outline-3">
<h3 id="org052a50a">Datatypes</h3>
<div class="outline-text-3" id="text-org052a50a">

<div id="org16877d9" class="figure">
<p><img src="resources/JavaDataTypes.PNG" alt="JavaDataTypes.PNG" />
</p>
</div>
</div>
</div>

<div id="outline-container-org40fb7db" class="outline-3">
<h3 id="org40fb7db">Control Structures</h3>
<div class="outline-text-3" id="text-org40fb7db">
</div>
<div id="outline-container-org251f454" class="outline-4">
<h4 id="org251f454">Labeled statements (break, continue)</h4>
<div class="outline-text-4" id="text-org251f454">
<p>
An unlabeled <code>break</code> statement terminates the innermost loop. A labeled
<code>break</code> can terminate an outer loop. This is not a <code>goto</code> statement because
the code is continued with the statement immediately following the labeled
statement.
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-constant">search</span>:
    <span class="org-keyword">for</span> (i = 0; i &lt; arrayOfInts.<span class="org-type">length</span>; i++) {
        <span class="org-keyword">for</span> (j = 0; j &lt; <span class="org-type">arrayOfInts</span>[i].length;
             j++) {
            <span class="org-keyword">if</span> (arrayOfInts[i][j] == searchfor) {
                foundIt = <span class="org-constant">true</span>;
                <span class="org-keyword">break</span> <span class="org-constant">search</span>;
            }
        }
    }
</pre>
</div>

<p>
As usual the <code>continue</code> statement skips the current iteration, i.e. execution
will be continued at the next iteration of the labeled loop.
</p>
</div>
</div>
</div>

<div id="outline-container-org5297cde" class="outline-3">
<h3 id="org5297cde">Compiler, Files, Packages, etc.</h3>
<div class="outline-text-3" id="text-org5297cde">
<dl class="org-dl">
<dt>Source Files</dt><dd>*.java <br />
If you put multiple types(classes) in a single source file, only one can be public, and it must have the
same name as the source file.

<ul class="org-ul">
<li>Class:   file name</li>
<li>Package: folder name</li>
</ul></dd>
</dl>
<hr />
<dl class="org-dl">
<dt>Compiler Output</dt><dd>*.class <br />
Java Class Files containing Java Byte Code.
If a source file has more than one class, each class is compiled into a separate class file.
A class file contains Java Virtual Machine instructions (or bytecode) and a symbol table,
as well as other ancillary information.</dd>
</dl>
<hr />
<dl class="org-dl">
<dt>Java Bytecode</dt><dd><p>
Instruction Set of the JVM.
opcode: 1 (or 2) bytes (192 cmds ar in use, 51 for future use)
</p>
<ul class="org-ul">
<li>0..n bytes of parameters</li>
</ul>

<p>
<a href="http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings">http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a>
</p></dd>
</dl>
</div>

<div id="outline-container-org3d99392" class="outline-4">
<h4 id="org3d99392">Packages</h4>
<div class="outline-text-4" id="text-org3d99392">
<p>
Classes and Interfaces are organized in packages e.g. java.lang.String.
</p>

<p>
Naming: Packages are normally related to directories with the same name.
</p>

<ul class="org-ul">
<li>A package provides a unique namespace (classes in different packages can have the same name)</li>
<li>Classes in the same package can access each other's package-private and protected members.</li>
</ul>

<p>
specification: <code>package java.awt.event;</code>
usage:         <code>import java.awt.event.*;        // import all</code>
               <code>import java.awt.ActionEvent;    // import only this class</code>
</p>

<p>
Certain standard packages don't have to be imported:
</p>
<ul class="org-ul">
<li><code>java.lang</code></li>
<li><code>java.util</code></li>
</ul>

<p>
<b>Classpath</b> <br />
Tells the JVM where (i.e. in which folder) to look for class files.
</p>

<p>
<b>Unnamed packages</b> <br />
If no package name is specified (not package declaration in the source file), the classes
in the corresponding files will be added to the unnamed package.
</p>
</div>
</div>

<div id="outline-container-org12d4fb9" class="outline-4">
<h4 id="org12d4fb9">JVM</h4>
<div class="outline-text-4" id="text-org12d4fb9">
<ul class="org-ul">
<li>Stack based machine. Each Thread has a JVM stack which stores frames.</li>
<li>Frame
A frame is created each time a method is invoked.
The this reference is always stored at location 0 of the local variable table for constructors and instance methods.</li>
</ul>
</div>
</div>

<div id="outline-container-org1cf6c18" class="outline-4">
<h4 id="org1cf6c18">Java Module System</h4>
<div class="outline-text-4" id="text-org1cf6c18">
<p>
Jigsaw
</p>

<p>
A Jigsaw module is a collection of packages plus resources.
<code>module-info.java</code> defines the module name, all dependencies and visibility rules.
</p>
</div>
</div>
</div>

<div id="outline-container-org323a080" class="outline-3">
<h3 id="org323a080">Classes, Inheritance, etc.</h3>
<div class="outline-text-3" id="text-org323a080">
</div>
<div id="outline-container-org3650e92" class="outline-4">
<h4 id="org3650e92">Interfaces</h4>
<div class="outline-text-4" id="text-org3650e92">
<p>
Collection of abstract methods. Only Definition
Interfaces are not classes. They cannot be instantiated.
Classes implement Interfaces.
All methods defined in I have to be defined in C.
</p>

<div class="org-src-container">
<pre class="src src-java">
<span class="org-keyword">interface</span> <span class="org-type">Animal</span>
{

   <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">eat</span>();
   <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">travel</span>();
}

<span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">MammalInt</span> <span class="org-keyword">implements</span> <span class="org-type">Animal</span>{

   <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">eat</span>(){
      System.out.println(<span class="org-string">"Mammal eats"</span>);
   }

   <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">travel</span>(){
      System.out.println(<span class="org-string">"Mammal travels"</span>);
   }

   <span class="org-keyword">public</span> <span class="org-type">int</span> <span class="org-function-name">noOfLegs</span>(){
      <span class="org-keyword">return</span> 0;
   }

   <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">main</span>(<span class="org-type">String</span> <span class="org-variable-name">args</span>[]){
      <span class="org-type">MammalInt</span> <span class="org-variable-name">m</span> = <span class="org-keyword">new</span> <span class="org-type">MammalInt</span>();
      m.eat();
      m.travel();
   }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org413bf95" class="outline-4">
<h4 id="org413bf95">Inheritance</h4>
<div class="outline-text-4" id="text-org413bf95">
<p>
private, package, protected, public
</p>

<p>
All methods, incl. private methods, are inherited but not everything is
visible everywhere.
</p>



<p>
It's in general neither necessary nor good practice to have
everything known to everyone, specifically have a subclass know all members
of a superclass.
</p>

<p>
Overriding
</p>

<p>
Hiding
</p>

<p>
Polymorphism
</p>
</div>
</div>
</div>
<div id="outline-container-orgef19ca3" class="outline-3">
<h3 id="orgef19ca3">Threads</h3>
<div class="outline-text-3" id="text-orgef19ca3">
</div>
<div id="outline-container-org4505314" class="outline-4">
<h4 id="org4505314">Synchronization</h4>
<div class="outline-text-4" id="text-org4505314">
<p>
Each object in Java is associated with a monitor, which a thread can lock or unlock.
Only one thread at a time may hold a lock on a monitor.
</p>

<p>
synchronized(MyObject)
{
   // Access shared variables and other shared resources
}
</p>
</div>
</div>
</div>
<div id="outline-container-org9ff2f72" class="outline-3">
<h3 id="org9ff2f72">Java Fx</h3>
<div class="outline-text-3" id="text-org9ff2f72">
<p>
Architecture:
</p>
<div class="PICTURE" id="org042eaeb">

<div id="org45aa750" class="figure">
<p><img src="resources/JavaFx Architecture.PNG" alt="JavaFx Architecture.PNG" />
</p>
</div>

</div>

<dl class="org-dl">
<dt>Prism</dt><dd>Rendering Engine for graphics (OpenGL (Mac, Linux), Direct 3D (Win))</dd>
<dt>Glass Windowing Toolkit</dt><dd>Low Level OS Functions (Windows, Events, etc.)</dd>
<dt>Media Engine</dt><dd>Support for Audio &amp; Video</dd>

<dt>(no term)</dt><dd><code>Application.start(stage)</code> is where a JavaFX Application has it's entry point.</dd>

<dt><code>Stage</code></dt><dd>is the main container consisting of scenes.</dd>
<dt><code>Scene</code></dt><dd>tree structure</dd>
</dl>


<p>
Graphical Designer: SceneBuilder
</p>
</div>
</div>
<div id="outline-container-orgfee1937" class="outline-3">
<h3 id="orgfee1937">Apache Maven</h3>
<div class="outline-text-3" id="text-orgfee1937">
<p>
Build Management Tool: Compile, Test, Pack, Distribute
</p>

<dl class="org-dl">
<dt><code>pom.xml</code> </dt><dd>configuration file</dd>
</dl>
</div>
</div>
</div>
<div id="outline-container-orgef46aeb" class="outline-2">
<h2 id="orgef46aeb">Perl</h2>
<div class="outline-text-2" id="text-orgef46aeb">
<ul class="org-ul">
<li>length of an Arrag $#array</li>
<li>split string: @split_str = split(<i>regexp</i>, $str)</li>
</ul>
</div>
</div>

<div id="outline-container-org565ac00" class="outline-2">
<h2 id="org565ac00">Prolog</h2>
<div class="outline-text-2" id="text-org565ac00">
<ul class="org-ul">
<li>Roots in first order logic.</li>
<li>Declarative programming.</li>
<li>Database consisting of <i>facts</i> and <i>rules</i>.</li>
<li>A computation is initiated by doing a <i>query</i>.</li>
</ul>

<p>
Syntax
</p>
<ul class="org-ul">
<li><p>
Commands are separated by "," and terminated with ".".
Interactive shell:
</p>
<pre class="example">
gprolog
| ?- write('Hello World'), nl, write('new line').
</pre></li>
<li><p>
A <i>fact</i> looks like this:
</p>
<pre class="example">
loves(romeo, juliet).
</pre>

<p>
Here we have a <i>predicate</i> and two <i>atoms</i>.
</p></li>
<li><p>
A <i>rule</i> looks like this:
</p>
<pre class="example">
loves(juliet, romeo) :- loves(romeo, juliet).
</pre>

<p>
Meaning: <code>:-</code> means if.
</p></li>
<li><i>variables</i> always start with an upper case letter.
With a variable we can answer questions: <code>loves(romeo, X).</code></li>
</ul>
</div>

<div id="outline-container-orgdf14d8d" class="outline-3">
<h3 id="orgdf14d8d">Tutorial</h3>
<div class="outline-text-3" id="text-orgdf14d8d">
<p>
<a href="http://www.learnprolognow.org/lpnpage.php?pagetype=html&amp;pageid=lpn-htmlch1">http://www.learnprolognow.org/lpnpage.php?pagetype=html&amp;pageid=lpn-htmlch1</a>
</p>
<ul class="org-ul">
<li>3 basic constructs: <i>facts</i>, <i>rules</i> and <i>queries</i>.</li>
<li>A collection of facts and rules is a <i>knowledge base</i> or <i>database</i> (this is what Prolog programming is about).</li>
<li>Prolog programs are collections of facts and rules describing a collection of relationships.</li>
<li>Using the program means asking questions about the knowledge base by posing queries.</li>
</ul>
</div>
</div>

<div id="outline-container-orgdea94b2" class="outline-3">
<h3 id="orgdea94b2">Tutorial Derek Banas</h3>
<div class="outline-text-3" id="text-orgdea94b2">
<p>
<a href="https://www.youtube.com/watch?v=SykxWpFwMGs">https://www.youtube.com/watch?v=SykxWpFwMGs</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org12b349e" class="outline-2">
<h2 id="org12b349e">Python</h2>
<div class="outline-text-2" id="text-org12b349e">
</div>
<div id="outline-container-org937b3b3" class="outline-3">
<h3 id="org937b3b3">Handling multiple source files (modules and packages)</h3>
<div class="outline-text-3" id="text-org937b3b3">
<p>
Packages group modules. The package structure is reflected in the directory structure.
</p>
</div>
<div id="outline-container-orgce4d800" class="outline-4">
<h4 id="orgce4d800">Modules</h4>
<div class="outline-text-4" id="text-orgce4d800">
<p>
<code>*.py</code> files are modules, which means they have their own private symbol table.
So every new file creates a new namespace.
</p>

<p>
The interpreter searches for a module in this order:
</p>
<ol class="org-ol">
<li>build-in modules</li>
<li>in the variable <code>sys.path</code></li>
</ol>
<p>
(list the names a module defines with <code>dir(module_name)</code>, or currently defined names with <code>dir()</code>)
</p>
</div>
</div>
<div id="outline-container-orgb9b7f67" class="outline-4">
<h4 id="orgb9b7f67">Packages</h4>
<div class="outline-text-4" id="text-orgb9b7f67">
<p>
Packages group together modules. Submodules reside in subdirectories reflecting the package structure.
</p>
<pre class="example">
import package.subpackage.module
</pre>


<p>
In each directory there should be a <code>__init__.py</code> file to tell the python interpreter that this is a
package directory.
</p>

<p>
Package names are typically lower case and underscore separated.
</p>

<p>
The package can be installed in pip locally:
</p>
<pre class="example">
pip install .
</pre>


<p>
The Python Package Index: <code>PyPi</code>. There a package can be published.
</p>
</div>
</div>
</div>
<div id="outline-container-orge75d783" class="outline-3">
<h3 id="orge75d783">Generators and yield</h3>
<div class="outline-text-3" id="text-orge75d783">
<p>
yield works like return, but returns a generator.
</p>

<p>
A generator is an iterator you can only iterate over once. Each value
is generated on the fly, so not all values have to be stored.
</p>

<p>
Example:
 <a href="http://tpcg.io/IIMHG6" target="_blank">Generator Example</a>
</p>
<div class="org-src-container">
<pre class="src src-python"><span class="org-keyword">def</span> <span class="org-function-name">square</span>(mylist):
   <span class="org-keyword">for</span> i <span class="org-keyword">in</span> mylist:
      <span class="org-keyword">yield</span> i<span class="org-operator">*</span>i;

<span class="org-variable-name">mylist</span> <span class="org-operator">=</span> (1,2,3)
<span class="org-variable-name">gen</span> <span class="org-operator">=</span> square(mylist)

<span class="org-builtin">print</span>(<span class="org-string">"first run: "</span>)
<span class="org-keyword">for</span> val <span class="org-keyword">in</span> gen:
   <span class="org-builtin">print</span>(val <span class="org-operator">+</span> <span class="org-string">" "</span>)

<span class="org-builtin">print</span>(<span class="org-string">"</span><span class="org-constant">\n</span><span class="org-string">second run: "</span>)
<span class="org-keyword">for</span> val <span class="org-keyword">in</span> gen:
   <span class="org-builtin">print</span>(val <span class="org-operator">+</span> <span class="org-string">" "</span>)

<span class="org-string">'''</span>
<span class="org-string">this will print:</span>
<span class="org-string">first run: 1 4 9</span>
<span class="org-string">second run:</span>

<span class="org-string">but only for the first time its called</span>
<span class="org-string">'''</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org03a8cab" class="outline-3">
<h3 id="org03a8cab">List comprehensions</h3>
<div class="outline-text-3" id="text-org03a8cab">
<pre class="example">
myList = [  expression(i) for i in oldList if filter(i)  ]
functions = [o for o in getmembers(MyModule, isfunction)]
</pre>
</div>
</div>
<div id="outline-container-orge54524f" class="outline-3">
<h3 id="orge54524f">Embed Python in C</h3>
</div>

<div id="outline-container-orga1e2b00" class="outline-3">
<h3 id="orga1e2b00">Mindmap</h3>
<div class="outline-text-3" id="text-orga1e2b00">
<p>
<a href="https://app.wisemapping.com/c/maps/917719/public">https://app.wisemapping.com/c/maps/917719/public</a>
</p>
<iframe style="width:1200px;height:800px;border: 1px
solid black" src="https://app.wisemapping.com/c/maps/917719/embed?zoom=0.7"> </iframe>

<p>
Mindmap: <a href="https://www.mindmeister.com/1378838553/python?fullscreen=1">https://www.mindmeister.com/1378838553/python?fullscreen=1</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org8f45f3a" class="outline-2">
<h2 id="org8f45f3a">Qt Framework</h2>
<div class="outline-text-2" id="text-org8f45f3a">
</div>
<div id="outline-container-org6280bf6" class="outline-3">
<h3 id="org6280bf6">Main Window</h3>
<div class="outline-text-3" id="text-org6280bf6">
<p>
The class <code>QMainWindow</code> provides the management of the applications user interface.
A main window has a <i>Menu Bar</i>, <i>Toolbars</i>, <i>Status Bar</i>, <i>Dock Widgets</i> and always a
central widget (e.g. QTextEdit, QGraphicsView, QMdiArea, etc.)
</p>

<p>
Main windows have either a single (SDI) or multiple (MDI) document interface.
</p>
</div>
</div>

<div id="outline-container-org8ccd1b4" class="outline-3">
<h3 id="org8ccd1b4">Event Management</h3>
<div class="outline-text-3" id="text-org8ccd1b4">
</div>
<div id="outline-container-orga683cc9" class="outline-4">
<h4 id="orga683cc9">Signal - Slot mechanism</h4>
<div class="outline-text-4" id="text-orga683cc9">
<p>
When an event occurs a signal is emitted.
A slot is a function. It will be called when a particular signal emitted.
</p>

<p>
<code>QObject</code> instances are connected via connecting signals with slots using the <code>QObject::connect()</code> function.
</p>

<p>
Emitting a signal is calling a function, e.g. <code>valueChanged()</code>.
A Signal is sent to a slot via calling a function, e.g. <code>setValue()</code>.
So when someone calls the signal function of object A, e.g. <code>a.setValue()</code> the connected slot function will
automatically be called for all connected objects.
</p>

<p>
Classes containing signals or slots must be derived from <code>QObject</code> and mention <code>Q_OBJECT</code> at
the beginning of their declaration.
</p>
</div>
</div>
</div>



<div id="outline-container-org9a3c423" class="outline-3">
<h3 id="org9a3c423">Qt Creator IDE</h3>
<div class="outline-text-3" id="text-org9a3c423">
</div>
<div id="outline-container-org49700ff" class="outline-4">
<h4 id="org49700ff">Build Kits</h4>
<div class="outline-text-4" id="text-org49700ff">
<p>
Groups of settings for building and running projects for different types of devices, i.e.
</p>
<ul class="org-ul">
<li>Android</li>
</ul>
</div>
</div>
<div id="outline-container-orgab1b752" class="outline-4">
<h4 id="orgab1b752">qmake</h4>
<div class="outline-text-4" id="text-orgab1b752">
<p>
Platform independent generator for platform specific makefiles. The input file is
the <code>*.pro</code> - project file.
</p>
</div>
</div>
<div id="outline-container-org68437bb" class="outline-4">
<h4 id="org68437bb">Files</h4>
<div class="outline-text-4" id="text-org68437bb">
<dl class="org-dl">
<dt><code>*.pro</code></dt><dd>project file, looks like a make file</dd>
<dt><code>*.qml</code></dt><dd>Qt Meta-object language file, declarative description of GUI elements</dd>
<dt><code>*.ui</code></dt><dd>user interface</dd>
<dt><code>*.qrc</code></dt><dd>resources collection file
Platform independent mechanism for storing binary files in the executable.</dd>
</dl>
</div>
</div>

<div id="outline-container-orgc0770e0" class="outline-4">
<h4 id="orgc0770e0">Notes</h4>
<div class="outline-text-4" id="text-orgc0770e0">
<ul class="org-ul">
<li>On Windows Qt Creator seems to be dependent on <code>mingw</code>.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org4a27496" class="outline-3">
<h3 id="org4a27496">Meta-Object Compiler (moc)</h3>
<div class="outline-text-3" id="text-org4a27496">
<p>
Qt C++ extensions are implemented by the moc.
</p>
</div>
</div>
</div>
<div id="outline-container-orgd797839" class="outline-2">
<h2 id="orgd797839">Rust</h2>
<div class="outline-text-2" id="text-orgd797839">
<ul class="org-ul">
<li>memory safe without garbage collection</li>
</ul>
</div>

<div id="outline-container-org92f4e53" class="outline-3">
<h3 id="org92f4e53">Memory model</h3>
<div class="outline-text-3" id="text-org92f4e53">
<ul class="org-ul">
<li>items and heap</li>
<li>immutable portions of the heap can safely be shared between threads</li>
<li>no items are dynamically allocated or freed</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org95f17b7" class="outline-2">
<h2 id="org95f17b7">Sandbox</h2>
<div class="outline-text-2" id="text-org95f17b7">
<p>
<a href="https://www.tutorialspoint.com/compile_cpp11_online.php">https://www.tutorialspoint.com/compile_cpp11_online.php</a>
</p>
</div>
<div id="outline-container-org8dc8199" class="outline-3">
<h3 id="org8dc8199">Create a template function</h3>
<div class="outline-text-3" id="text-org8dc8199">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;iostream&gt;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">we need to tell the compiler what T is</span>
<span class="org-keyword">template</span> &lt;<span class="org-keyword">typename</span> <span class="org-type">T</span>&gt;
<span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-function-name">max</span>(<span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-variable-name">a</span>, <span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-variable-name">b</span>)
{
    <span class="org-keyword">return</span> a &gt; b ? a : b;
}

<span class="org-comment-delimiter">// </span><span class="org-comment">Note: use const T&amp; for case of an object (shouldn't be passed by value)</span>

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
   <span class="org-constant">std</span>::cout &lt;&lt; max(5, 4) &lt;&lt; <span class="org-constant">std</span>::endl;

   <span class="org-keyword">return</span> 0;
}
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfe1e9de" class="outline-3">
<h3 id="orgfe1e9de">Iterate over a set</h3>
<div class="outline-text-3" id="text-orgfe1e9de">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">&lt;iostream&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string">&lt;set&gt;</span>

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
   <span class="org-constant">std</span>::<span class="org-type">set</span>&lt;<span class="org-type">int</span>&gt; <span class="org-variable-name">myset</span>;

   <span class="org-keyword">for</span> (<span class="org-type">int</span> <span class="org-variable-name">i</span> = 1; i != 11; ++i)
      myset.insert(i);

   <span class="org-keyword">for</span> (<span class="org-keyword">auto</span> <span class="org-variable-name">i</span> = myset.begin(); i != myset.end(); ++i)
      <span class="org-constant">std</span>::cout &lt;&lt; *i &lt;&lt; <span class="org-constant">std</span>::endl;

   <span class="org-comment-delimiter">// </span><span class="org-comment">C++ 11 version with range based loop</span>
   <span class="org-keyword">for</span> (<span class="org-keyword">auto</span> <span class="org-variable-name">element</span> : myset)
      <span class="org-constant">std</span>::cout &lt;&lt; element &lt;&lt; <span class="org-constant">std</span>::endl;

   <span class="org-keyword">return</span> 0;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd5c4a3f" class="outline-2">
<h2 id="orgd5c4a3f">Smalltalk</h2>
<div class="outline-text-2" id="text-orgd5c4a3f">
<p>
<b>Everything is an object!</b>
</p>

<p>
Objects pass messages around.
You always work with the whole system.
Smalltalk is like a software internet (Alan Kay), each
object is like a server communicating with other servers.
</p>

<p>
A message translates in the end to a method call. That's
how objects provide their services.
</p>
</div>

<div id="outline-container-org976ba62" class="outline-3">
<h3 id="org976ba62">Syntax</h3>
<div class="outline-text-3" id="text-org976ba62">
<p>
Objects are left, messages right.
</p>
<pre class="example">
&lt;Object&gt; &lt;message&gt;
</pre>


<p>
Message can be (in this order of precedence)
</p>
<ol class="org-ol">
<li>Unary, e.g. "Some literal text"</li>
<li>Binary, e.g. 1+2</li>
<li>Keyword taking parameters, e.g. value:</li>
</ol>
</div>

<div id="outline-container-org24bf00a" class="outline-4">
<h4 id="org24bf00a">Expressions</h4>
<div class="outline-text-4" id="text-org24bf00a">
<p>
Objects can be represented by expressions. Primitive expressions are literals and
variables (they are not composed of other expressions).
</p>

<p>
In addition to the primitive expressions there are
</p>
<ul class="org-ul">
<li>Assignment Expressions : <code>x := 1</code></li>

<li>Message Expressions: Subject (receiver of the message) + Predicate + Parameters
<ul class="org-ul">
<li><code>Transcript show: 'Hello'</code></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc00928b" class="outline-3">
<h3 id="orgc00928b">Pharo IDE</h3>
<div class="outline-text-3" id="text-orgc00928b">
<dl class="org-dl">
<dt><code>System Browser</code></dt><dd>Shows Packages (categories of classes), classes protocols (method groups),
methods</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-Technology-Computer_Science-Programming-Tools" class="outline-2">
<h2 id="Technology-Computer_Science-Programming-Tools">Tools</h2>
<div class="outline-text-2" id="text-Technology-Computer_Science-Programming-Tools">
</div>

<div id="outline-container-org587d93d" class="outline-3">
<h3 id="org587d93d">CMake</h3>
<div class="outline-text-3" id="text-org587d93d">
<pre class="example">
sudo snap install --classic cmake
</pre>


<p>
Creates Makefiles.
</p>

<p>
Typical use:
</p>
<pre class="example">
cmake .
make -C build
</pre>

<p>
or
</p>
<pre class="example">
cmake [&lt;options&gt;] -S &lt;path-to-source&gt; -B &lt;path-to-build&gt;
</pre>


<p>
<code>&lt;path-to-source&gt;</code> must also contain <code>CMakeLists.txt</code>.
</p>
</div>

<div id="outline-container-org867b7b8" class="outline-4">
<h4 id="org867b7b8">Executables</h4>
<div class="outline-text-4" id="text-org867b7b8">
<pre class="example">
add_executable(targetName [EXCLUDE_FROM_ALL] file.cc file2.cc ...)
</pre>
</div>
</div>
<div id="outline-container-org1880f5a" class="outline-4">
<h4 id="org1880f5a">Externals</h4>
<div class="outline-text-4" id="text-org1880f5a">
<pre class="example">
find_package(spdlog REQUIRED)
</pre>


<p>
The package will be found via a config file (e.g. <code>spdlogConfig.cmake</code>)
usually located in the install directory (e.g. <code>install/lib/cmake/spdlog</code>).
You can specify this location e.g. with a cache variable in a preset.
</p>

<p>
Example <code>CMakeUserPresets.json</code>:
</p>
<pre class="example" id="org52c605b">
{
  "version": 2,
  "configurePresets": [
    {
      "name": "my-default",
      "inherits": "default",
      "cacheVariables": {
        "ProtonCpp_DIR": "/home/jha/Development/qpid-proton-0.34.0/install/lib/cmake/ProtonCpp",
        "spdlog_DIR": "/home/jha/Development/spdlog-1.8.5/install/lib/cmake/spdlog"
      }
    }
  ]
}
</pre>
</div>
</div>

<div id="outline-container-org0a1ee1c" class="outline-4">
<h4 id="org0a1ee1c">Installation</h4>
<div class="outline-text-4" id="text-org0a1ee1c">
<pre class="example">
# install a file somewhere
install(FILES media/urgent_double.wav
        DESTINATION /usr/share/sounds/viza)
</pre>
</div>
</div>
<div id="outline-container-org6dfd8ca" class="outline-4">
<h4 id="org6dfd8ca">Links</h4>
<div class="outline-text-4" id="text-org6dfd8ca">
<ul class="org-ul">
<li>Documentation: <a href="https://cmake.org/cmake/help/v3.20/">https://cmake.org/cmake/help/v3.20/</a></li>
</ul>
</div>
</div>

<div id="outline-container-org72731d2" class="outline-4">
<h4 id="org72731d2">Libraries</h4>
<div class="outline-text-4" id="text-org72731d2">
<p>
Like <code>add_executable()</code> we do
</p>
<pre class="example">
add_library(libName [STATIC|SHARED|MODULE] [EXCLUDE_FROM_ALL] file.cc file2.cc ...)
</pre>
</div>
</div>
<div id="outline-container-org9ccd4a5" class="outline-4">
<h4 id="org9ccd4a5">Presets</h4>
<div class="outline-text-4" id="text-org9ccd4a5">
<p>
Create a Preset File <code>CMakePresets.json</code> and do <code>cmake --preset=default</code>.
You can also create an additional <code>CMakeUserPresets.json</code> file with local settings.
This is useful when you have libraries installed in non system paths.
</p>
<pre class="example" id="orgd7dccf4">
{
  "version": 2,
  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 20,
    "patch": 0
  },
  "configurePresets": [
    {
      "name": "default",
      "displayName": "Default",
      "description": "Default build using make",
      "generator": "Unix Makefiles",
      "binaryDir": "${sourceDir}/build",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "-Werror -Wall -Wextra -pedantic",
        "CMAKE_CXX_STANDARD": "17",
        "CMAKE_CXX_STANDARD_REQUIRED": "YES",
        "CMAKE_CXX_EXTENSIONS": "OFF"
      },
      "environment": {
      }
    }
  ]
}
</pre>
</div>
</div>
<div id="outline-container-org6ee9246" class="outline-4">
<h4 id="org6ee9246">Subdirectories</h4>
<div class="outline-text-4" id="text-org6ee9246">
<pre class="example">
add_subdirectory(source/libraries)
add_subdirectory(source/application)
</pre>


<p>
Have to contain <code>CMakeLists.txt</code> files otherwise they are ignored.
</p>
</div>
</div>

<div id="outline-container-orgcd270b3" class="outline-4">
<h4 id="orgcd270b3">Variables</h4>
<div class="outline-text-4" id="text-orgcd270b3">
<pre class="example">
set(SRC_FILES main.cpp process.cpp)
</pre>

<p>
Creates a variable named <code>fooappSource</code> with scope of current <code>CMakeList.txt</code>.
</p>
<pre class="example">
set(SRC_FILES ${SRC_FILES} another.cpp)
</pre>

<p>
or (better)
</p>
<pre class="example">
list(APPEND SRC_FILES another.cpp)
</pre>
</div>

<div id="outline-container-orge376c1b" class="outline-5">
<h5 id="orge376c1b">Cache Variables</h5>
<div class="outline-text-5" id="text-orge376c1b">
<p>
To check cache variable do this in the <code>build</code> folder:
</p>
<pre class="example">
ccmake ..
</pre>

<p>
or
</p>
<pre class="example">
cmake-gui ..
</pre>
</div>
</div>
<div id="outline-container-orgcc64100" class="outline-5">
<h5 id="orgcc64100">Macro definition</h5>
<div class="outline-text-5" id="text-orgcc64100">
<p>
Define a compiler constant:
</p>
<pre class="example">
target_compile_definitions(${TEST_TARGET} PRIVATE "TEST_MSG_PATH=\"${CMAKE_SOURCE_DIR}/integration_test/messages\"")
ReadFile(TEST_MSG_PATH"/WIMP/periodical.gasValues.json")   - use like macro definition in source
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a386c6" class="outline-4">
<h4 id="org9a386c6">Properties</h4>
<div class="outline-text-4" id="text-org9a386c6">
<pre class="example">
set_property(
 Entity:           GLOBAL|TARGET|DIRECTORY|SOURCE|...
 add to old value  [APPEND | APPEND_STRING]  -  list (foo;bar) | concatenation (foobar)
 Property name     PROPERTY propery_name
 Values            [values]
</pre>


<p>
Example:
</p>
<pre class="example">
set_property(SOURCE file.cc APPEND_STRING PROPERTY COMPILE_DEFINITIONS "MY_VERSION=\"${MY_VERSION}\"")
</pre>

<p>
This appends to the <code>COMPILE_DEFINITIONS</code> property of the file <code>file.cc</code> a version number.
It adds the compiler definition only to this file, so recompilation is only necessary for this file.
</p>

<p>
Interesting Target Properties:
</p>
<ul class="org-ul">
<li><code>COMPILE_DEFINITIONS</code></li>
<li><code>INCLUDE_DIRECTORIES</code></li>
<li><code>COMPILE_OPTIONS</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgf56708c" class="outline-4">
<h4 id="orgf56708c">Project Version</h4>
<div class="outline-text-4" id="text-orgf56708c">
<pre class="example">
project(FooBar VERSION 2.4.7)
add_definitions(-DFOOBAR_VERSION=\"${FooBar_VERSION}\")
</pre>

<p>
With add_definitions the string is accessible in the code:
</p>
<pre class="example">
std::cout &lt;&lt; FOOBAR_VERSION &lt;&lt; std::endl;
</pre>
</div>
</div>
</div>


<div id="outline-container-org45d29db" class="outline-3">
<h3 id="org45d29db">Continuous Integration/Delivery</h3>
<div class="outline-text-3" id="text-org45d29db">
<p>
Integration problems arise when a development branch is not often enough synchronized with the mainline version (Integration Hell).
In the developers local environment all unit test should pass before committing to mainline to avoid breaking existing code.
</p>

<p>
Partially completed features might be disabled using feature toggles (enable for testing, disable for use).
</p>

<ul class="org-ul">
<li>CD: Have your code always production ready, i. e. always ready to be delivered to the customer.</li>
</ul>
</div>
</div>
<div id="outline-container-org42dc3a1" class="outline-3">
<h3 id="org42dc3a1">Docker</h3>
<div class="outline-text-3" id="text-org42dc3a1">
<ul class="org-ul">
<li><a href="https://docs.docker.com/reference/">Docker Reference</a></li>
</ul>

<p>
<b>Basic Concepts</b>
</p>
<ul class="org-ul">
<li><code>Container Image</code> Isolated file system used when running a container. The actual artefact, that is moved around.</li>
<li><code>Container</code>       Isolated process. The running environment for the image. The container has a port number to talk to the application inside.</li>
<li><code>Docker Network</code>  Docker containers run in an isolated network, where they can communicate with each other (connected via bridge <code>docker0</code>).</li>
<li><code>Dockerfile</code>      Script used to create a container image.</li>
</ul>

<p>
Public repository: Docker Hub (<a href="https://hub.docker.com/">https://hub.docker.com/</a>)
</p>

<p>
Docker didn't invent containers (Linux can run containers fine without docker), but they invented the image format and an API to make
them easier to use.
</p>
</div>

<div id="outline-container-Technology-Computer_Science-Programming-Tools-Docker-Commands" class="outline-4">
<h4 id="Technology-Computer_Science-Programming-Tools-Docker-Commands">Commands</h4>
<div class="outline-text-4" id="text-Technology-Computer_Science-Programming-Tools-Docker-Commands">
<pre class="example">
docker build -t image_name:1.0 .                           - Build image with name and tag (1.0) in current dir.
docker pull &lt;image&gt;                                        - Pull an image from a repository (DockerHub)
docker images                                              - Show all local images
docker rmi -f ce6079ebad83                                 - Remove image
docker rmi $(docker images -q)                             - remove all images (-q print only id)
docker run &lt;image&gt;:&lt;VersionTag&gt;                            - Create and start a container (run = create &amp; start).
docker run -ti --rm &lt;image&gt;                                - (-t allocate a pseudo tty), (-i intercative), -rm remove container on exit (cleanup)
docker run -d redis                                        - detached mode
docker start &lt;ID&gt;                                          - Start a container (already existing)
docker stop &lt;ID&gt;                                           - Stop a container
docker commit &lt;container_id&gt; &lt;new_image&gt;:&lt;tag&gt;             - Store running container to image (e.g. if you made modifications).
docker ps                                                  - Show running containers
docker ps -a                                               - Show all running and stopped containers
docker ps --size                                           - Include container size (takes longer).
docker rm $(docker ps -aq)                                 - remove all containers (-q print only id)
docker-compose up                                          - Start up multiple containers defined in a docker compose file.
</pre>


<p>
<b>Forward keys</b>
</p>
<pre class="example">
docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' &lt;ContainerName&gt;
eval `ssh-agent`; ssh-add ~/.ssh/id_rsa; ssh -A builduser@&lt;Container IP Address&gt;
</pre>


<p>
<b>In and Out</b>
</p>
<pre class="example">
docker cp &lt;ID&gt;:&lt;path-inside-container&gt; &lt;path-on-host&gt;      - Copy file (directory recursively)  from container to host.
</pre>


<p>
<b>Useful Stuff</b>
</p>
<pre class="example">
sudo docker run -itd --rm --name thor busybox   - Create busybox container (named "thor" in this example).
sudo docker exec -it thor sh                    - Jump into container (named "thor" in this example).
</pre>


<p>
<b>Networking</b>
</p>
<pre class="example">
docker container run -d --rm --name quantum --publish mode=ingress,published=18080,target=8080 quantum-game:latest            - start container with port forwarding (8080 is inside the container)
docker network ls                               - how docker networks
docker network create my-network                - Create a network
</pre>


<p>
<b>Inspect</b>
</p>
<pre class="example">
docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' &lt;ID | NAME&gt;          - get IP address of a container
docker inspect bridge                                                                            - What is connected to docker0?
</pre>


<p>
Container port vs. host port
</p>
<ul class="org-ul">
<li>Binding between host port and container port: different ports have to be used on the host.
Without binding the container is unreachable.</li>

<li>Port Binding: <code>sudo docker run -p6380:6379 redis</code></li>

<li>Show logs: <code>docker logs 51c6a7069871</code></li>
<li>Open terminal inside docker container: <code>sudo docker exec -it 51c6a7069871 /bin/bash</code> get out: <code>exit</code></li>
</ul>
</div>
</div>

<div id="outline-container-org2958a1e" class="outline-4">
<h4 id="org2958a1e">Docker in Software Development</h4>
<div class="outline-text-4" id="text-org2958a1e">
<ul class="org-ul">
<li>before: everything is installed on the developers computer, multiple times for everyone</li>
<li>Using containers you have your own isolated environment. So you check out the container from a repository and your
good to go.</li>
<li>You can also use different versions of an application in different containers.</li>
</ul>
</div>

<div id="outline-container-orgbde460d" class="outline-5">
<h5 id="orgbde460d">Workflow with Docker</h5>
<div class="outline-text-5" id="text-orgbde460d">
<ul class="org-ul">
<li>You develop an application.</li>
<li>Commit to Git repository.</li>
<li>Jenkins Server Build compiles the application and creates a Docker image.</li>
<li>The Docker image will be pushed to a Docker repository.</li>
<li>Dev Server pulls the image from the Docker repository.</li>
</ul>
</div>
</div>

<div id="outline-container-org5da42de" class="outline-5">
<h5 id="org5da42de">Example</h5>
<div class="outline-text-5" id="text-org5da42de">
<p>
Javascript GUI (Frontend), NodeJS (Backend), MongoDB with MongoExpress
</p>

<p>
Run MongoDB container:
</p>
<pre class="example">
docker run -p 27817:27817 -d mongo -e MONGO_INITDB_USERNAME=admin -e MONGO_INITDB_PASSWORD=password --name mongodb -net mongo-network mongo
</pre>


<p>
Run Mongo Express container:
</p>
<pre class="example">
docker run -d -p 8081:8081 -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin -e ME_CONFIG_MONGODB_ADMINPASSWORD=password --net mongo-network --name mongo-express \
-e ME_CONFIG_MONGODB_SERVER=mongodb mongo-express
</pre>


<ul class="org-ul">
<li>Check Mongo Express at port 8081.</li>
<li>Create a new database with Mongo Express: user-account</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org04b8e5e" class="outline-4">
<h4 id="org04b8e5e">Docker Images</h4>
<div class="outline-text-4" id="text-org04b8e5e">
<ul class="org-ul">
<li>Layers of images</li>
<li>Layer 1 - Small base image (alpine)</li>
<li>Layer 2 -</li>
<li>Layer n - application image (on top)</li>
</ul>

<p>
Start a container: <code>docker run &lt;Container&gt;</code>
</p>
</div>
</div>

<div id="outline-container-org44a18a7" class="outline-4">
<h4 id="org44a18a7">Docker Volumes</h4>
<div class="outline-text-4" id="text-org44a18a7">
<p>
Docker volumes are a way to persist data generated and used by Docker containers.
They allow data to exist independently of the container's lifecycle, ensuring that data is not lost when a container is stopped or removed.
Volumes are a key feature in Docker for managing and sharing data between containers and between the host system and containers.
</p>

<ol class="org-ol">
<li><b>Data Persistence</b></li>
<li><b>Types of Volumes</b>
<ul class="org-ul">
<li><b>Named Volumes</b>: These are explicitly named and created using the <code>docker volume create</code> command.
Named volumes are easy to manage and can be shared between containers.</li>
<li><b>Anonymous Volumes</b>: These are not explicitly named and are created automatically when a container is launched with the `-v` flag.
Anonymous volumes are typically used for temporary or disposable data.</li>
</ul></li>

<li><p>
<b>Mounting Volumes</b>: Volumes can be mounted into containers at specific paths using the `-v` or `&#x2013;volume` option when running a container. For example:
</p>
<pre class="example">
docker run -v my_volume:/data my_image
</pre>


<p>
In this example, the `my_volume` volume is mounted at the `/data` path inside the container.
</p></li>

<li><p>
<b>Host Bind Mounts</b>: Docker volumes can also be used to mount directories from the host system into containers.
This is useful for sharing files or configurations between the host and containers.
</p>

<pre class="example">
docker run -v /host/path:/container/path my_image
</pre></li>

<li><b>Volume Drivers</b>: Docker supports various volume drivers that enable different ways to manage storage, such as using
cloud storage providers, network-attached storage (NAS), or third-party storage solutions.</li>

<li><b>*Data Sharing</b>: Volumes can be shared between multiple containers.
This is useful for scenarios where you want multiple containers to access the same data,
like a database container and an application container sharing a data volume.</li>

<li><b>Data Backup and Migration</b>: Volumes simplify data backup and migration because you can back up or move volumes independently of containers.
This makes it easier to manage data when scaling applications or moving them between environments.</li>

<li><b>Lifecycle Management</b>: Volumes can outlive containers. You can create and manage volumes separately from containers, making it easier to manage data over time.</li>
</ol>
</div>
</div>
<div id="outline-container-org5c2c800" class="outline-4">
<h4 id="org5c2c800">Difference between Docker and Virtual Machines</h4>
<div class="outline-text-4" id="text-org5c2c800">
<p>
Docker virtualizes the applications layer of the OS. It uses the kernel of
the host system.
</p>

<p>
A VM uses it's own kernel.
</p>

<ul class="org-ul">
<li>Docker containers are smaller and faster.</li>
<li>VM can run on any host. A Docker container might not.</li>
</ul>
</div>
</div>

<div id="outline-container-org31b5792" class="outline-4">
<h4 id="org31b5792">Dockerfiles and how to Create a docker image</h4>
<div class="outline-text-4" id="text-org31b5792">
<p>
Images are build from a <code>Dockerfile</code>, a text file containing all commands to
assemble an image (you can also call these commands on the command line).
You might think of the commands in the docker file similar to commands run
when logging into a server with ssh.
</p>

<p>
In addition to the dockerfile a <b>context</b> is needed, this is a set of files
at a specific location (local path or Git repository url).
</p>

<p>
Usually the dockerfile is located in the context root folder.
</p>

<p>
Build an image with the current directory as context:
</p>
<pre class="example">
docker build .
</pre>


<p>
<code>Dockerfile</code> Example
</p>
<pre class="example" id="org6a84d4d">
FROM jenkins/jenkins:2.387.1
USER root
RUN apt-get update &amp;&amp; apt-get install -y lsb-release
RUN curl -fsSLo /usr/share/keyrings/docker-archive-keyring.asc \
  https://download.docker.com/linux/debian/gpg
RUN echo "deb [arch=$(dpkg --print-architecture) \
  signed-by=/usr/share/keyrings/docker-archive-keyring.asc] \
  https://download.docker.com/linux/debian \
  $(lsb_release -cs) stable" &gt; /etc/apt/sources.list.d/docker.list
RUN apt-get update &amp;&amp; apt-get install -y docker-ce-cli
USER jenkins
RUN jenkins-plugin-cli --plugins "blueocean docker-workflow"
</pre>
</div>

<div id="outline-container-org13fb71b" class="outline-5">
<h5 id="org13fb71b">Forward private keys for accessing private repos</h5>
<div class="outline-text-5" id="text-org13fb71b">
<p>
Set public key in Dockerfile
</p>
<pre class="example" id="org6922849">
# get public key for bitbucket.org
RUN mkdir -p -m 0600 ~/.ssh &amp;&amp; \
    ssh-keyscan github.com &gt; ~/.ssh/known_hosts

# via ssh-agent docker can access your private keys
RUN git clone https://github.com/username/repo.git
</pre>

<p>
Build image with private keys via ssh-agent.
</p>
<pre class="example">
eval `ssh-agent`; ssh-add ~/.ssh/id_rsa
docker build -t &lt;ImageName&gt;&gt;:1.0 --ssh default .
</pre>
</div>
</div>
</div>

<div id="outline-container-org9dffaf8" class="outline-4">
<h4 id="org9dffaf8">Network</h4>
<div class="outline-text-4" id="text-org9dffaf8">
<p>
How to reach a service running in a docker container?
Just use the IP-Address of the host and the mapped port number.
</p>
</div>
</div>
<div id="outline-container-orga6e57d3" class="outline-4">
<h4 id="orga6e57d3">docker-compose</h4>
<div class="outline-text-4" id="text-orga6e57d3">
<ul class="org-ul">
<li>Tool for running multiple containers.</li>
<li><code>docker-compose.yml</code> is used for configuring the services of the application.</li>
</ul>
</div>
</div>

<div id="outline-container-orgd6a9a3d" class="outline-4">
<h4 id="orgd6a9a3d">Docker beyond the basics</h4>
<div class="outline-text-4" id="text-orgd6a9a3d">
<p>
General long command format:
</p>
<pre class="example">
docker &lt;noun&gt; &lt;verb&gt;
</pre>
</div>
<div id="outline-container-orgaba7d56" class="outline-5">
<h5 id="orgaba7d56">Linux Namespaces</h5>
<div class="outline-text-5" id="text-orgaba7d56">
<p>
Linux namespaces are a feature of the Linux kernel that provide process and resource isolation at the operating system level.
They allow multiple instances of a resource to coexist on the same system, isolated from each other.
Namespaces are primarily used in containerization and virtualization technologies to create isolated environments for processes, file systems, network resources, and more.
Here are some of the key types of Linux namespaces:
</p>

<ol class="org-ol">
<li><b><b>PID Namespace (pid):</b></b>
This namespace isolates the process ID (PID) space.
Processes within a PID namespace have their own set of process IDs, making them unaware of processes in other namespaces.
It enables process isolation.</li>

<li><b><b>Network Namespace (net):</b></b>
Network namespaces isolate network resources, such as network interfaces, routing tables, and firewall rules.
Each network namespace has its own network stack, allowing for separate network configurations.</li>

<li><b><b>Mount Namespace (mnt):</b></b>
Mount namespaces isolate the file system mounts.
This means that processes in different mount namespaces can have their own file system views, with different mounts and directory structures.</li>

<li><b><b>UTS Namespace (uts):</b></b>
UTS namespaces isolate the hostname and NIS domain name.
Processes in different UTS namespaces can have distinct hostname and domain name settings.</li>

<li><b><b>IPC Namespace (ipc):</b></b>
IPC namespaces isolate inter-process communication (IPC) resources, including message queues and semaphores.</li>

<li><b><b>User Namespace (user):</b></b>
User namespaces isolate user and group IDs.
This allows processes within a user namespace to have their own user and group IDs, separate from the host system.
User namespaces are particularly important for security in containerization.</li>

<li><b><b>Cgroup Namespace (cgroup):</b></b>
Cgroup namespaces provide isolation for control groups, which are used for resource management and accounting.</li>
</ol>

<p>
Linux namespaces are the foundation of containerization technologies like Docker and Kubernetes.
They enable the creation of lightweight, isolated environments where processes can run independently without interfering with each other or the host system.
Each namespace type contributes to different aspects of isolation, allowing containers to have their own process trees, file systems, network configurations, and more.
This helps improve security, resource management, and scalability in modern cloud and containerized applications.
</p>
</div>
</div>
</div>


<div id="outline-container-org1342ead" class="outline-4">
<h4 id="org1342ead">How to?</h4>
<div class="outline-text-4" id="text-org1342ead">
</div>
<div id="outline-container-orgf831dc6" class="outline-5">
<h5 id="orgf831dc6">Get inside a container</h5>
</div>

<div id="outline-container-orga0b0788" class="outline-5">
<h5 id="orga0b0788">Use ssh keys inside a container</h5>
<div class="outline-text-5" id="text-orga0b0788">
<pre class="example">
ssh-add ~/.ssh
eval $(ssh-agent -s)
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org8dbf3ca" class="outline-3">
<h3 id="org8dbf3ca">Git</h3>
<div class="outline-text-3" id="text-org8dbf3ca">
<ul class="org-ul">
<li><a href="https://git-scm.com/book/en/v2">Pro Git</a></li>
</ul>
</div>
<div id="outline-container-org1aba603" class="outline-4">
<h4 id="org1aba603">Basics</h4>
<div class="outline-text-4" id="text-org1aba603">
<div class="picture" id="org89fb31c">

<div id="org0e0115f" class="figure">
<p><img src="resources/Git/basics.PNG" alt="basics.PNG" />
</p>
</div>

</div>
<ul class="org-ul">
<li>Git stores data as a series of <code>snapshots</code>.</li>
<li>A <code>commit</code> creates a pointer to the staged <code>snapshot</code>.</li>
<li>A <code>branch</code> is just a pointer to a <code>commit</code>.</li>
<li>Because a <code>branch</code> is just a pointer, the commit line doesn't necessarily branch.
This is the reason why the commit graph is confusing. It only shows the actual
branching of the commit line.</li>
<li>The <code>HEAD</code> pointer tells on which <code>branch</code> we are.</li>
<li>There are usually 3 versions of a branch
<ol class="org-ol">
<li>remote origin (e.g. on Github)</li>
<li>local version of origin (what you get with <code>git fetch</code>)</li>
<li>local branch version (e.g. feature branch)</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-Technology-Computer_Science-Programming-Tools-Git-Commands" class="outline-4">
<h4 id="Technology-Computer_Science-Programming-Tools-Git-Commands">Commands</h4>
<div class="outline-text-4" id="text-Technology-Computer_Science-Programming-Tools-Git-Commands">
<p>
Local
</p>
<pre class="example">
git status
git commit                                            - Will open editor for writing commit message.
git commit --amend                                    - Change last commit message.
git commit -a -m message
git log [--graph]
</pre>


<p>
Branches
</p>
<pre class="example">
git switch &lt;branch&gt;
git checkout -b &lt;branch&gt;                              - Create a new branch.
git checkout &lt;tag&gt;                                    - Checkout tag (e.g. 0.2.1).
git fetch &amp;&amp; git checkout &lt;branch&gt;                    - Get new branch (e.g. from BitBucket).
git fetch --prune                                     - Get locally rid of remotly deleted branches.
git rebase master                                     - Put current feature branch in front of master.
git branch -d &lt;feature_branch&gt;                        - Delete a feature branch (switch to another branch first).
git branch | grep &lt;pattern&gt; | xargs git branch -D     - Delete all local branches matching &lt;pattern&gt;.

git branch -m &lt;new name&gt;                              - Rename current local branch.
git push origin --delete &lt;old name&gt;                   - Rename remotely: delete + push
git push origin -u &lt;new name&gt;

git branch -a                                         - List all local and remote branches.
git cherry-pick &lt;Commit&gt;                              - Pick only the changes from a commit and merge them with this branch.
</pre>


<p>
Changes
</p>
<pre class="example">
git revert &lt;Commit&gt;                                   - Revert (Undo) changes form a commit. Creates a new commit without those changes.
git restore .                                         - Discard changes.
git reset --soft HEAD~                                - Undo the last (not yet pushed) commit. Add number after ~ to go back further.
git reset --hard &lt;Commit&gt;                             - Roll back current branch to past commit (changes are lost).
git clean -f -d                                       - Remove untracked files.
git stash                                             - Save modifications in workspace.
git stash show                                        - Gives a diff-cmd like output.
git stash pop                                         - Restore stashed modifications.
git checkout stash -- .                               - Force stashed changes to overwrite other modifications.
git blame &lt;file&gt;                                      - Show commit info for each line in &lt;file&gt;.
git blame -L 1,2 --since=2.weeks &lt;file&gt;               - Show commit info for lines 1-2.
</pre>


<p>
Merge
</p>
<pre class="example">
git diff master...&lt;freature_branch&gt;                   - Compare branches.
git merge &lt;branch&gt;
git merge &lt;branch&gt; --no-commit --no-ff                - Inspect &amp; tweak merge before commiting.
git merge --abort                                     - Abort current merge (E.g. if you just want to test the merge result).
git reset --merge a9fdeb5                             - Reset merge.
git merge-base &lt;branchA&gt; &lt;branchB&gt;                    - Find common ancestor of 2 branches.
</pre>


<p>
View all Files in branch
</p>
<pre class="example">
git ls-tree -r &lt;branch&gt; --name-only
git ls-tree -r HEAD --name-only                       - Show list of files for current branch.
</pre>


<p>
<b>Remote</b>
</p>
<pre class="example">
git push
git pull                                              - Fetch and merge remote branch with local branch.
git fetch                                             - Get all data from remote repository (all branches).
git remote -v                                         - List remote repositories.
git remote add &lt;name&gt; &lt;Url&gt;
git push --delete origin 4.2.0                        - Delete remote tag.
git remote prune origin                               - Remove refs to remote branches that no longer exist on origin.
                                                        This cleans up the local origin versions. It doesn't delete local
                                                        branches. Unused local branches have to be deleted manually.
git tag -d 0.25.0                                     - Delete a local tag.
git push --delete origin 0.49.0                       - Delete a remote tag.
git push origin :refs/tags/0.25.0
</pre>


<p>
<b>Configuration</b>
(can also be found in <code>~/.gitconfig</code>)
</p>
<pre class="example">
git config --global user.email "joe@tuxn.com"
git config --global user.name "Franz Maier"
git config --system core.editor vim
</pre>
</div>
</div>

<div id="outline-container-org80c9cbb" class="outline-4">
<h4 id="org80c9cbb">Bugfix Process</h4>
<div class="outline-text-4" id="text-org80c9cbb">
<p>
Situation:
</p>
<ul class="org-ul">
<li>We need to add a bugfix to a release, say <code>release_tag.0.1.0</code>), i.e. we want to update to
<code>releas_tag.0.1.1</code>.</li>
<li>On the master branch there are new commits we don't want in the release.</li>
</ul>

<p>
How to do it:
</p>
<ul class="org-ul">
<li>Where to implement the bugfix?
<ul class="org-ul">
<li>If it should also be contained on the master. Do it there, as always:
<ul class="org-ul">
<li>Feature branch.</li>
<li>PR and merge to master (incl. CHANGELOG.md entry).</li>
</ul></li>
</ul></li>
<li>Create a release branch named <code>release_tag.0.1.x</code> (backport branch).
<ul class="org-ul">
<li>Cherry pick from master to the release branch.</li>
</ul></li>
<li>What about the CHANGELOG file?
<ul class="org-ul">
<li>Create an changelog entry on the release branch.</li>
</ul></li>
</ul>

<p>
Comments:
</p>
<ul class="org-ul">
<li>Master &amp; Release branch CHANGELOG files are always different! Because the version is different.</li>
</ul>
</div>
</div>

<div id="outline-container-org95beadd" class="outline-4">
<h4 id="org95beadd">Integrate changes from one branch to another</h4>
<div class="outline-text-4" id="text-org95beadd">
<p>
2 ways
</p>
<ul class="org-ul">
<li><code>merge</code></li>
<li><code>rebase</code></li>
</ul>
</div>
<div id="outline-container-orgb430020" class="outline-5">
<h5 id="orgb430020">Merging</h5>
<div class="outline-text-5" id="text-orgb430020">
<p>
We always merge 2 commits.
</p>

<p>
Suppose HEAD -&gt; master
</p>
<pre class="example">
git merge &lt;feature_branch&gt;
</pre>


<p>
This creates a new  <code>master</code> <code>commit</code>.
</p>

<p>
For testing use the <code>--no-commit</code> flag.
</p>

<ul class="org-ul">
<li>fast forward: When feature branch is direct descendant from master, the master
pointer is just moved forward (no real merge necessary).</li>
</ul>

<p>
More complicated branching: 3-way-merge
</p>
<ul class="org-ul">
<li>When feature branch and master have developed in parallel.</li>
<li>Two diffs are compared: See <a href="#org4473990">Merge Logic</a>.</li>
</ul>
</div>

<div id="outline-container-orgda526e1" class="outline-6">
<h6 id="orgda526e1">Merge Conflicts</h6>
<div class="outline-text-6" id="text-orgda526e1">
<pre class="example">
git mergetool
</pre>

<p>
meld opendiff kdiff3 tkdiff xxdiff tortoisemerge gvimdiff diffuse diffmerge ecmerge p4merge araxis bc codecompare smerge emerge vimdiff
</p>
</div>
</div>
<div id="outline-container-org4473990" class="outline-6">
<h6 id="org4473990">Merge Logic</h6>
<div class="outline-text-6" id="text-org4473990">
<ul class="org-ul">
<li>Git calculates 2 diffs from the common ancestor commit to the end of both branches.</li>
<li>Git applies both diffs to the common ancestor commit (merge base).</li>
</ul>

<p>
Logic:
</p>
<pre class="example">
git merge this-branch other-branch
</pre>

<ul class="org-ul">
<li>Lines were added on <code>other-brach</code> and nothing was done on <code>this-branch</code>.
So this lines will be added.</li>
<li>Lines were removed on <code>other-brach</code> and nothing was done on <code>this-branch</code>.
So this lines will be removed.</li>
<li>If both branches have a change, then there is a conflict on those lines.</li>
</ul>
</div>
</div>

<div id="outline-container-orgf6f64de" class="outline-6">
<h6 id="orgf6f64de">Merge Strategies</h6>
<div class="outline-text-6" id="text-orgf6f64de">
<pre class="example">
Fast Forward                                   simplest case, no branching
Recursive    git merge -s no-ff other
Ours         git merge -s ours other           ignore changes from other branch
Octopus      git merge -s octopus b1 b2 b3     default for multiple branches
Subtree      git merge -s subtree other
Resolve      git merge -s resolve other
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeaa0a06" class="outline-5">
<h5 id="orgeaa0a06">Rebasing</h5>
<div class="outline-text-5" id="text-orgeaa0a06">
<ul class="org-ul">
<li><a href="https://www.themoderncoder.com/a-better-git-workflow-with-rebase/">https://www.themoderncoder.com/a-better-git-workflow-with-rebase/</a></li>
</ul>

<p>
In short: Put the commits of one branch on top of another.
</p>

<pre class="example">
git rebase master feature
git rebase master             - shorter version, when you are on the feature branch
</pre>

<p>
This puts the branch <code>feature</code> (including it's <code>commits</code>) in front of <code>master</code>. Since we are
on <code>feature</code>, we will stay on <code>feature</code> and have the changes of <code>master</code> at the beginning of
the feature branch. The result is as if we originally branched of the latest commit on <code>master</code>.
This results in a linear commit history, as if you would have made your commits on the master
branch.
</p>
</div>
</div>

<div id="outline-container-orgdf52f74" class="outline-5">
<h5 id="orgdf52f74">Merge Conflicts</h5>
<div class="outline-text-5" id="text-orgdf52f74">
<ul class="org-ul">
<li>resolve conflicts and then</li>
</ul>
<pre class="example">
git add
git commit
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd2d2ce6" class="outline-4">
<h4 id="orgd2d2ce6">Commits</h4>
<div class="outline-text-4" id="text-orgd2d2ce6">
<ul class="org-ul">
<li>squash commits : combine multiple commits into one (e.g. when merging into master branch).
Advantage: Simpler commit history on master.
The commit messages will be listed for every pull request. In other words
you only see the pull requests as entries in the history.</li>
</ul>
</div>
<div id="outline-container-org5d75c3b" class="outline-5">
<h5 id="org5d75c3b">Rewriting History</h5>
<div class="outline-text-5" id="text-org5d75c3b">
<p>
To change the last 3 commits, do:
</p>
<pre class="example">
git rebase -i HEAD~3
</pre>


<p>
You will be presented with a list of commands.
</p>

<p>
Example:
</p>
<pre class="example" id="org1456ec4">
pick 44c5ac6 Add mock_message_client folder
pick dfa44d8 Create 2 messaging clients

# Rebase ed9cbb1..dfa44d8 onto ed9cbb1 (2 commands)
#
# Commands:
# p, pick &lt;commit&gt; = use commit
# r, reword &lt;commit&gt; = use commit, but edit the commit message
# e, edit &lt;commit&gt; = use commit, but stop for amending
# s, squash &lt;commit&gt; = use commit, but meld into previous commit
# f, fixup &lt;commit&gt; = like "squash", but discard this commit's log message
# x, exec &lt;command&gt; = run command (the rest of the line) using shell
# b, break = stop here (continue rebase later with 'git rebase --continue')
# d, drop &lt;commit&gt; = remove commit
# l, label &lt;label&gt; = label current HEAD with a name
# t, reset &lt;label&gt; = reset HEAD to a label
# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
# .       create a merge commit using the original merge commit's
# .       message (or the oneline, if no original merge commit was
# .       specified). Use -c &lt;commit&gt; to reword the commit message.
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
</pre>

<p>
Write <code>edit</code> where you want to edit the commit message.
</p>

<p>
Then do (3 times)
</p>
<pre class="example">
git commit --amend
git rebase --continue
</pre>
</div>
</div>
</div>

<div id="outline-container-org7edec0b" class="outline-4">
<h4 id="org7edec0b">Problems</h4>
<div class="outline-text-4" id="text-org7edec0b">
</div>
<div id="outline-container-org61a1558" class="outline-5">
<h5 id="org61a1558">.git folder corrupt</h5>
<div class="outline-text-5" id="text-org61a1558">
<pre class="example">
fatal: loose object c1711e07e7531c3d32272d4baf87cd55a25df0cd (stored in .git/objects/c1/711e07e7531c3d32272d4baf87cd55a25df0cd) is corrupt
</pre>

<p>
Solution:
</p>
<ul class="org-ul">
<li>delete .git folder
<ul class="org-ul">
<li>save <code>.git/info/exclude</code></li>
<li>save <code>hooks</code></li>
</ul></li>
<li>clone repository to another folder and switch to your feature branch</li>
</ul>
<pre class="example">
git fetch &amp;&amp; git checkout FeatureBranchName
</pre>

<ul class="org-ul">
<li>copy cloned .git folder to working folder</li>
</ul>
</div>
</div>

<div id="outline-container-orgdf8ab13" class="outline-5">
<h5 id="orgdf8ab13">Remove last commit from master</h5>
<div class="outline-text-5" id="text-orgdf8ab13">
<pre class="example">
git reset HEAD^
git push --force
</pre>


<p>
Example:
</p>
<ul class="org-ul">
<li>You forgot to set the version in CHANGELOG.md and added another commit to master.</li>
<li>Now you want to modify the CHANGELOG.md of the last commit.</li>
<li>What you have to do is
<ul class="org-ul">
<li>store the current master on a feature branch A</li>
<li>remove the last commit (see above)</li>
<li><p>
create a feature branch, modify the CHANGELOG.md and merge the corresponding pull request.
In the top folder (!) of the checked out branch remove old files:
</p>
<pre class="example">
git clean -f -D
git restore .
</pre></li>
<li>now recreate the stored master state by merging the feature branch A</li>
</ul></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-orgc9db74f" class="outline-4">
<h4 id="orgc9db74f">Notes</h4>
<div class="outline-text-4" id="text-orgc9db74f">
<ul class="org-ul">
<li>Exclude files locally: <code>.git/info/exclude</code></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-Technology-Computer_Science-Programming-Tools-Jenkins" class="outline-3">
<h3 id="Technology-Computer_Science-Programming-Tools-Jenkins">Jenkins</h3>
<div class="outline-text-3" id="text-Technology-Computer_Science-Programming-Tools-Jenkins">
<ul class="org-ul">
<li><a href="https://www.jenkins.io/doc/book/">https://www.jenkins.io/doc/book/</a></li>
</ul>

<p>
A build server compiles, tests, deploys periodically.
</p>
</div>

<div id="outline-container-org8eba77e" class="outline-4">
<h4 id="org8eba77e">General Comments</h4>
<div class="outline-text-4" id="text-org8eba77e">
<ul class="org-ul">
<li>A <code>job</code> is the fundamental entity of build automation.</li>
<li>A <code>job</code> is a sequence of <code>tasks</code>.</li>
<li>Jobs can be distributed among different nodes running <code>agents</code>.</li>
<li>A Jenkins <code>agent</code> runs on a node.</li>
<li>The <code>agent controller</code> manages the <code>agents</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc30e28f" class="outline-4">
<h4 id="orgc30e28f">Installation using docker</h4>
<div class="outline-text-4" id="text-orgc30e28f">
<ul class="org-ul">
<li><a href="https://www.jenkins.io/doc/book/installing/docker/">https://www.jenkins.io/doc/book/installing/docker/</a></li>
</ul>
</div>

<div id="outline-container-org43fc988" class="outline-5">
<h5 id="org43fc988">Installation</h5>
<div class="outline-text-5" id="text-org43fc988">
<p>
Create bridge network
</p>
<pre class="example">
docker network create jenkins
</pre>


<p>
Run <code>docker:dind</code> image to execute cmds in Jenkins node
</p>
<pre class="example" id="org023b51d">
docker run --name jenkins-docker --rm --detach \
  --privileged --network jenkins --network-alias docker \
  --env DOCKER_TLS_CERTDIR=/certs \
  --volume jenkins-docker-certs:/certs/client \
  --volume jenkins-data:/var/jenkins_home \
  --publish 2376:2376 \
  docker:dind --storage-driver overlay2
</pre>

<p>
Create <code>Dockerfile</code>
</p>
<pre class="example" id="orgb7747f6">
FROM jenkins/jenkins:2.387.1
USER root
RUN apt-get update &amp;&amp; apt-get install -y lsb-release
RUN curl -fsSLo /usr/share/keyrings/docker-archive-keyring.asc \
  https://download.docker.com/linux/debian/gpg
RUN echo "deb [arch=$(dpkg --print-architecture) \
  signed-by=/usr/share/keyrings/docker-archive-keyring.asc] \
  https://download.docker.com/linux/debian \
  $(lsb_release -cs) stable" &gt; /etc/apt/sources.list.d/docker.list
RUN apt-get update &amp;&amp; apt-get install -y docker-ce-cli
USER jenkins
RUN jenkins-plugin-cli --plugins "blueocean docker-workflow"
</pre>

<p>
Build image from Dockerfile
</p>
<pre class="example">
docker build -t myjenkins-blueocean:2.387.1-1 .
</pre>


<p>
Run the image
</p>
<pre class="example" id="orgcc15613">
docker run --name jenkins-blueocean --restart=on-failure --detach \
  --network jenkins --env DOCKER_HOST=tcp://docker:2376 \
  --env DOCKER_CERT_PATH=/certs/client --env DOCKER_TLS_VERIFY=1 \
  --publish 8080:8080 --publish 50000:50000 \
  --volume jenkins-data:/var/jenkins_home \
  --volume jenkins-docker-certs:/certs/client:ro \
  myjenkins-blueocean:2.387.1-1
</pre>

<p>
Notes:
</p>
<ul class="org-ul">
<li><i>Blue Ocean</i> is a pipeline visualization.</li>
</ul>
</div>
</div>

<div id="outline-container-org19cc0f8" class="outline-5">
<h5 id="org19cc0f8">Post-installation</h5>
<div class="outline-text-5" id="text-org19cc0f8">
<p>
Jenkins webinterface is now reachable at
</p>
<ul class="org-ul">
<li><a href="http://localhost:8080">http://localhost:8080</a></li>
</ul>

<p>
Get the password from the file mentioned on the start page.
</p>
</div>
</div>
</div>

<div id="outline-container-org5b12610" class="outline-4">
<h4 id="org5b12610">Pipeline</h4>
<div class="outline-text-4" id="text-org5b12610">
<p>
A CI/CD pipeline is a collection of Jenkins jobs that trigger each other in sequence.
</p>
<ul class="org-ul">
<li>CI/CD pipelines: Jobs and stages. At certain stages (e.g. build, test, stage or deploy, production) various jobs might be executed.</li>
</ul>
</div>
</div>

<div id="outline-container-org12ca1b0" class="outline-4">
<h4 id="org12ca1b0">Jenkinsfile</h4>
<div class="outline-text-4" id="text-org12ca1b0">
<p>
Textfile describing the different stages (e.g. build, test, deploy).
</p>

<ul class="org-ul">
<li>Uses <code>Groovy</code> syntax (see <a href="https://github.com/hamajo75/Code-Snippets/blob/main/Jenkins/jenkinsfile">Github</a>).</li>
</ul>
</div>
</div>
</div>



<div id="outline-container-org1217992" class="outline-3">
<h3 id="org1217992">Makefiles</h3>
<div class="outline-text-3" id="text-org1217992">
</div>
<div id="outline-container-org6fa4376" class="outline-4">
<h4 id="org6fa4376">Plain Makefiles</h4>
<div class="outline-text-4" id="text-org6fa4376">
<p>
Makefiles usually help to recompile only those parts of a project that have changed.
</p>

<p>
Makefiles contain <i>rules</i> that look like this:
</p>
<div class="org-src-container">
<pre class="src src-make">target: dependencies
&lt;TAB&gt; command               - also called recipe
&lt;TAB&gt; command
...
</pre>
</div>

<p>
If dependencies change the recipe will run.
Calling make without target parameter will create the first target.
</p>

<p>
In addition variables can be defined.
</p>
<ul class="org-ul">
<li><code>=</code> recursive, will expand when it is actually used.</li>
<li><code>:=</code>- simply expanded, will expand where the definition is.</li>
</ul>

<div class="org-src-container">
<pre class="src src-make">x = hello
y = $(x)
y1 := $(x)

x = world
# $(y) will expand to "world" here
# $(y1) will expand to "hello" here
</pre>
</div>

<p>
Automatic variables:
</p>
<ul class="org-ul">
<li><code>$@</code> : expands to the target name</li>
<li><code>$^</code> : expands to all dependencies, no duplicates</li>
<li><code>$+</code> : expands to all dependencies, including duplicates</li>
<li><code>$&lt;</code> : expands to the first dependency</li>
</ul>

<p>
Wildcard:
</p>
<ul class="org-ul">
<li><code>%</code>  : match pattern in target and dependencies</li>
</ul>
</div>

<div id="outline-container-orgadbf9a2" class="outline-5">
<h5 id="orgadbf9a2">Simple Example</h5>
<div class="outline-text-5" id="text-orgadbf9a2">
<div class="org-src-container">
<pre class="src src-make">main.exe: main.cpp
    g++ -g -o main.cpp
</pre>
</div>
</div>
</div>

<div id="outline-container-org152519b" class="outline-5">
<h5 id="org152519b">More Complicated Example</h5>
<div class="outline-text-5" id="text-org152519b">
<div class="org-src-container">
<pre class="src src-make">CC      := gcc
CCFLAGS :=
LDFLAGS :=

TARGETS:= edit
MAINS  := $(addsuffix .o, $(TARGETS))
OBJ    := kbd.o command.o display.o $(MAINS)
DEPS   := defs.h command.h

.PHONY: all clean

all: $(TARGETS)

clean:
   rm -f $(TARGETS) $(OBJ)

$(OBJ): %.o : %.c $(DEPS)          # same rule for all .o files
   $(CC) -c -o $@ $&lt; $(CCFLAGS)     # $@ expands to "kbd.o command.o display.o edit.o"

$(TARGETS): % : $(filter-out $(MAINS), $(OBJ)) %.o  #
   $(CC) -o $@ $(LIBS) $^ $(CCFLAGS) $(LDFLAGS)
</pre>
</div>

<p>
Explanation:
</p>
<ul class="org-ul">
<li>target <code>edit</code> depends on 4 object files (edit.o, kbd.o, command.o, display.o)</li>
<li>the object files depend on 4 c files and 2 header files</li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Makefiles must not contain spaces (use TABs).</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb73f914" class="outline-3">
<h3 id="orgb73f914">Visual Studio Code</h3>
<div class="outline-text-3" id="text-orgb73f914">
<p>
Multiple Cursors
</p>
<ul class="org-ul">
<li><code>Alt + Left Mouse</code></li>
<li><code>Ctrl + Alt + Arrow</code></li>
<li><code>/home/jha/.config/Code/User</code></li>
</ul>
</div>

<div id="outline-container-org29de0a6" class="outline-4">
<h4 id="org29de0a6">Shortcuts</h4>
<div class="outline-text-4" id="text-org29de0a6">
<pre class="example">
Ctrl + n                            Goto right (next) editor tab.
Ctrl + p                            Goto left (previous) editor tab.
Ctrl + q                            Close active tab.
</pre>
</div>
</div>
<div id="outline-container-org38b7622" class="outline-4">
<h4 id="org38b7622">Code Snipptes</h4>
<div class="outline-text-4" id="text-org38b7622">
<pre class="example">
C + S + P -&gt; Preferences: Configure User Code Snipptes
</pre>

<pre class="example" id="orgd036ba8">
"my for loop": {
  "prefix": "for",
  "body": [
    "for (int i = 0; i &lt; n; i++) {",
    "  $0"
    "}"
  ],
  "description": "insert empty for loop"
}
</pre>
<p>
Build in snippets:
The file is located at
</p>
<pre class="example">
app root\resources\app\extensions\language\snippets\language.code-snippets
</pre>

<p>
on Windows.
</p>
</div>
</div>
<div id="outline-container-org28475f4" class="outline-4">
<h4 id="org28475f4">Debugging</h4>
<div class="outline-text-4" id="text-org28475f4">
<p>
<code>launch.json</code>
Variables
</p>
<ul class="org-ul">
<li><a href="https://code.visualstudio.com/docs/editor/variables-reference">https://code.visualstudio.com/docs/editor/variables-reference</a></li>
<li><code>${workspaceFolder}</code>          : The folder opened in VS Code.</li>
<li><code>${file}</code>                     : e.g. /home/your-username/your-project/folder/file.ext</li>
<li><code>${relativeFile}</code>             : e.g. folder/file.ext</li>
<li><code>${fileDirname}</code>              : e.g. /home/your-username/your-project/folder</li>
<li><code>${fileBasename}</code>             : e.g. file.ext</li>
<li><code>${fileBasenameNoExtension}</code>  : e.g. file</li>
</ul>
</div>
</div>

<div id="outline-container-org91f89af" class="outline-4">
<h4 id="org91f89af">Dev Containers</h4>
<div class="outline-text-4" id="text-org91f89af">
<p>
Inside <code>.devcontainer</code> there is:
</p>
<ul class="org-ul">
<li><code>devcontainer.json</code></li>
<li><code>Dockerfile</code></li>
</ul>

<p>
Default extensions in user settings
</p>
<pre class="example">
Dev  Containers: Default Extensions
</pre>

<p>
You can copy the Exension Id from the Extensions Side Bar.
</p>
</div>
</div>

<div id="outline-container-org65e86a4" class="outline-4">
<h4 id="org65e86a4">Intellisense</h4>
<div class="outline-text-4" id="text-org65e86a4">
<ul class="org-ul">
<li>Use the extension for <code>clangd</code> (not <code>C++ Intellisense</code> from Microsoft)
<ul class="org-ul">
<li><a href="https://clangd.llvm.org/config">https://clangd.llvm.org/config</a></li>
</ul></li>
<li>You have to add <code>"CMAKE_EXPORT_COMPILE_COMMANDS":true</code> to your
<code>CMakeUserPresets.json</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-org25b9052" class="outline-4">
<h4 id="org25b9052">Visual Studio Code for Embedded</h4>
<div class="outline-text-4" id="text-org25b9052">
<ul class="org-ul">
<li>Elixir Cross Referencer</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org45e3795" class="outline-2">
<h2 id="org45e3795">Web, HTML, Javascript</h2>
<div class="outline-text-2" id="text-org45e3795">
</div>
<div id="outline-container-org10b1c92" class="outline-3">
<h3 id="org10b1c92">DOM (Document Object Model)</h3>
<div class="outline-text-3" id="text-org10b1c92">
<p>
DOM is a programming interface that treats HTML (and XML) documents as tree structures.
It defines a standard for accessing and manipulating documents.
</p>
</div>

<div id="outline-container-org60b61ab" class="outline-4">
<h4 id="org60b61ab">DOM Events</h4>
<div class="outline-text-4" id="text-org60b61ab">
<p>
Example <code>document.onkeypress</code> event:
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span class="org-keyword">function</span> <span class="org-function-name">orgDefkey</span>(<span class="org-variable-name">e</span>) {
    <span class="org-keyword">if</span> (!e)
        <span class="org-keyword">var</span> <span class="org-variable-name">e</span> = window.event;
    <span class="org-keyword">var</span> <span class="org-variable-name">keycode</span> = (e.keyCode) ? e.keyCode : e.which;
    <span class="org-keyword">var</span> <span class="org-variable-name">actualkey</span> = String.fromCharCode(keycode);
    <span class="org-keyword">switch</span> (actualkey) {
        <span class="org-keyword">case</span> <span class="org-string">"?"</span>: <span class="org-comment-delimiter">// </span><span class="org-comment">help (dashboard)</span>
        <span class="org-keyword">case</span> <span class="org-string">"h"</span>:
            togglePanel(e);
            <span class="org-keyword">break</span>;
    }
}
document.onkeypress = orgDefkey;
</pre>
</div>
<p>
Example <code>onkeypress</code> inside a text field:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">input</span> <span class="org-variable-name">type</span>=<span class="org-string">"text"</span> <span class="org-variable-name">onkeypress</span>=<span class="org-string">"myFunction()"</span>&gt;

&lt;<span class="org-function-name">script</span>&gt;
function myFunction() {
  alert("You pressed a key inside the input field");
}
&lt;/<span class="org-function-name">script</span>&gt;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdfc4e29" class="outline-3">
<h3 id="orgdfc4e29">JavaScript</h3>
<div class="outline-text-3" id="text-orgdfc4e29">
</div>
<div id="outline-container-org75e4f86" class="outline-4">
<h4 id="org75e4f86">jQuery</h4>
<div class="outline-text-4" id="text-org75e4f86">
<p>
JavaScript Library providing:
</p>
<ul class="org-ul">
<li>HTML/DOM/CSS manipulation</li>
<li>Effects</li>
<li>Event Handling</li>
</ul>

<p>
Syntax:
</p>
<pre class="example">
$(selector).action()
</pre>


<ul class="org-ul">
<li><code>$</code> is a function accessing jQuery</li>
<li><code>$(this).hide()</code> : hides current element</li>
<li><code>$("p").hide()</code>  : hides all &lt;p&gt; elements</li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li><code>$function(){...};</code> is jQuery short-hand for <code>$(document).ready(function(){...});</code> : ensures that all DOM elements are
ready to use.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgcd8e8b8" class="outline-3">
<h3 id="orgcd8e8b8">JSON</h3>
<div class="outline-text-3" id="text-orgcd8e8b8">
<ul class="org-ul">
<li>Data exchange format: JavaScript Object Notation</li>
<li>Data is in form of key-value pairs.</li>
</ul>

<p>
Data structures
</p>
<ul class="org-ul">
<li><code>{}</code> Object: <code>{ "key1": "value1", "key2": "value2" }</code></li>
<li><code>[]</code> Array: <code>[ "first", "second", "third" ]</code></li>
<li>Number: <code>42</code>, <code>3.1415</code></li>
<li>String: <code>"This is a string"</code></li>
<li>Boolean: <code>true</code> and <code>false</code></li>
<li>Null: <code>null</code></li>
</ul>
</div>

<div id="outline-container-org95a4749" class="outline-4">
<h4 id="org95a4749">JSON Schema</h4>
<div class="outline-text-4" id="text-org95a4749">
<ul class="org-ul">
<li><a href="https://json-schema.org/specification.html">https://json-schema.org/specification.html</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga29e419" class="outline-3">
<h3 id="orga29e419">HTML</h3>
<div class="outline-text-3" id="text-orga29e419">
<p>
HTML-tags
</p>
<ul class="org-ul">
<li><p>
<code>&lt;div&gt;</code> : Defines a division or section. Put stuff in there to have it styled with CSS. Block-level element.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">div</span> <span class="org-variable-name">class</span>=<span class="org-string">"MyStyle"</span>&gt;&lt;<span class="org-function-name">p</span>&gt;Text styled with MyStyle.&lt;/<span class="org-function-name">p</span>&gt;&lt;/<span class="org-function-name">div</span>&gt;
</pre>
</div></li>
<li><p>
<code>&lt;span&gt;</code> : Similar to =&lt;div&gt; but inline element. Style with CSS using a class attribute.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">p</span>&gt;Babies have &lt;<span class="org-function-name">span</span> <span class="org-variable-name">style</span>=<span class="org-string">"color:blue"</span>&gt;blue&lt;/<span class="org-function-name">span</span>&gt; eyes.&lt;/<span class="org-function-name">p</span>&gt;
&lt;<span class="org-function-name">p</span>&gt;Babies have &lt;<span class="org-function-name">span</span> <span class="org-variable-name">class</span>=<span class="org-string">"MyBlueStyle"</span>&gt;blue&lt;/<span class="org-function-name">span</span>&gt; eyes.&lt;/<span class="org-function-name">p</span>&gt;
</pre>
</div></li>
<li><p>
<code>&lt;img&gt;</code> : Show images.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">p</span>&gt;&lt;<span class="org-function-name">img</span> <span class="org-variable-name">src</span>=<span class="org-string">"resources/Verbklassen.png"</span> <span class="org-variable-name">alt</span>=<span class="org-string">"Verbklassen.png"</span> /&gt;&lt;/<span class="org-function-name">p</span>&gt;
</pre>
</div></li>
</ul>
</div>

<div id="outline-container-org4e62d74" class="outline-4">
<h4 id="org4e62d74">Tables</h4>
<div class="outline-text-4" id="text-org4e62d74">
<p>
HTML-tags
</p>
<ul class="org-ul">
<li><code>&lt;td&gt;</code> : Standard cell in a table.</li>
<li><code>&lt;tr&gt;</code> : Contains a row in a table.</li>
<li><code>&lt;thead&gt;</code> : Table header.</li>
</ul>
</div>
</div>
<div id="outline-container-org4388118" class="outline-4">
<h4 id="org4388118">CSS</h4>
<div class="outline-text-4" id="text-org4388118">
<ul class="org-ul">
<li><p>
Style general HTML elements (name without &lt;&gt;)
</p>
<div class="org-src-container">
<pre class="src src-css"><span class="org-css-selector">p, h1, h2</span> {
   <span class="org-css-property">color</span>: <span class="custom">red</span>;
   <span class="org-css-property">text-align</span>: center;
}
</pre>
</div></li>
<li><p>
Style a specific element with <code>id</code> (Note the "#" in front of the name)
</p>
<div class="org-src-container">
<pre class="src src-css"><span class="org-css-selector">#myParagraph</span> {
   <span class="org-css-property">text-align</span>: center;
   <span class="org-css-property">color</span>: <span class="custom">red</span>;
}
</pre>
</div></li>
<li><p>
Define a class (Note the "." in front of the name.).
</p>
<div class="org-src-container">
<pre class="src src-css"><span class="org-css-selector">.highlight</span>{
  <span class="org-css-property">color</span>: <span class="custom-1">black</span>;
  <span class="org-css-property">background-color</span>: <span class="custom">gold</span>;
}
</pre>
</div>
<p>
Use it like this: <code>&lt;span class="highlight"&gt;-&lt;/span&gt;</code>.
</p></li>
<li><p>
Style elements with classes
</p>
<div class="org-src-container">
<pre class="src src-css"><span class="org-css-selector">p.center</span> {
   <span class="org-css-property">text-align</span>: center;
   <span class="org-css-property">color</span>: <span class="custom">red</span>;
}
</pre>
</div></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org3725d9f" class="outline-2">
<h2 id="org3725d9f">Windows API</h2>
<div class="outline-text-2" id="text-org3725d9f">
</div>
<div id="outline-container-orgfe1ded1" class="outline-3">
<h3 id="orgfe1ded1">Functions used</h3>
<div class="outline-text-3" id="text-orgfe1ded1">
<ul class="org-ul">
<li>CreateProcess</li>
<li>SetWindowHookEx</li>
<li>RevokeDragDrop</li>
<li>GetMessagePos</li>

<li><p>
<code>WaitForMultipleObjects(nCount, lpHandles, bWaitAll, dwMilliseconds)</code>
Waits until the specified object is in the signaled state (or timeout has
occurred). The return value indicates the event that caused the return from
the function call.
</p>

<p>
The WaitForMultipleObjects function can specify handles of any of the
following object types in the lpHandles array:
</p>
<ul class="org-ul">
<li>Change notification</li>
<li>Console input</li>
<li>Event</li>
<li>Memory resource notification</li>
<li>Mutex</li>
<li>Process</li>
<li>Semaphore</li>
<li>Thread</li>
<li>Waitable timer</li>
</ul></li>

<li>GetOverlappedResult</li>
<li>WinUsb_ReadPipe</li>
</ul>
</div>
</div>
<div id="outline-container-org067f1bc" class="outline-3">
<h3 id="org067f1bc">Hooks</h3>
<div class="outline-text-3" id="text-org067f1bc">
<p>
A hook is a point in the system message-handling mechanism where an application can install a subroutine to monitor the
message traffic in the system and process certain types of messages before they reach the target window procedure.
</p>
</div>
</div>
<div id="outline-container-org4af2792" class="outline-3">
<h3 id="org4af2792">SharedMemory</h3>
</div>
<div id="outline-container-orgec17394" class="outline-3">
<h3 id="orgec17394">I/O</h3>
<div class="outline-text-3" id="text-orgec17394">
</div>
<div id="outline-container-org65571dc" class="outline-4">
<h4 id="org65571dc">File I/O</h4>
<div class="outline-text-4" id="text-org65571dc">
</div>
<div id="outline-container-org5a866ad" class="outline-5">
<h5 id="org5a866ad">File Services</h5>
<div class="outline-text-5" id="text-org5a866ad">
<p>
<a href="https://msdn.microsoft.com/en-us/library/aa364407(v=vs.85).aspx">https://msdn.microsoft.com/en-us/library/aa364407(v=vs.85).aspx</a>
</p>
</div>
</div>
<div id="outline-container-org6803d07" class="outline-5">
<h5 id="org6803d07">Windows Shell</h5>
<div class="outline-text-5" id="text-org6803d07">
<p>
SHFileOperation
 <a href="https://msdn.microsoft.com/en-us/library/bb762164(VS.85).aspx">https://msdn.microsoft.com/en-us/library/bb762164(VS.85).aspx</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgfc4e2a7" class="outline-4">
<h4 id="orgfc4e2a7">USB</h4>
<div class="outline-text-4" id="text-orgfc4e2a7">
</div>
<div id="outline-container-org563c0fc" class="outline-5">
<h5 id="org563c0fc">USB Device Path Format</h5>
<div class="outline-text-5" id="text-org563c0fc">
<pre class="example">
/?usb#vid_vvvv&amp;pid_pppp#ssss#{gggggggg-gggg-gggg-gggg-gggggggggggg}
</pre>


<ul class="org-ul">
<li><code>vvvv</code> is the USB vendor ID represented in 4 hexadecimal characters.</li>
<li><code>pppp</code> is the USB product ID represented in 4 hexadecimal characters.</li>
<li><code>ssss</code> is the USB serial string represented in n characters.</li>
<li><code>gggggggg-gggg-gggg-gggg-gggggggggggg</code> is the device interface GUID that is used to link applications to device with specific drivers loaded.</li>
</ul>
</div>
</div>

<div id="outline-container-org4bd3745" class="outline-5">
<h5 id="org4bd3745">Composite USB Device Path Format For Interfaces</h5>
<div class="outline-text-5" id="text-org4bd3745">
<pre class="example">
/?usb#vid_vvvv&amp;pid_pppp&amp;mi_ii#aaaaaaaaaaaaaaaa#{gggggggg-gggg-gggg-gggg-gggggggggggg}
</pre>


<ul class="org-ul">
<li><code>vvvv</code> is the USB vendor ID represented in 4 hexadecimal characters.</li>
<li><code>pppp</code> is the USB product ID represented in 4 hexadecimal characters.</li>
<li><code>ii</code> is the USB interface number.</li>
<li><code>aaaaaaaaaaaaaaaa</code> is a unique, Windows-generated string based on things such as the physical USB port address and/or interface number.</li>
<li><code>gggggggg-gggg-gggg-gggg-gggggggggggg</code> is the device interface GUID that is used to link applications to device with specific drivers loaded.</li>
</ul>
</div>
</div>


<div id="outline-container-orga610071" class="outline-5">
<h5 id="orga610071">WinUSB</h5>
<div class="outline-text-5" id="text-orga610071">
<p>
System32\winusb.dll
Important Functions:
</p>
<ul class="org-ul">
<li>CreateFile()</li>
<li>WinUsb_Initialize()</li>

<li>WinUsb_SetPipePolicy()</li>
<li>WinUsb_ReadPipe()</li>
<li>WinUsb_WritePipe()</li>

<li>WinUsb_GetOverlappedResult()</li>
<li>WaitForMultipleObjects()</li>
</ul>

<p>
<b>Sample Code</b>
</p>

<p>
Initialization:
</p>
<div class="org-src-container">
<pre class="src src-cpp">  FDeviceHandle = CreateFile(devicepath,
                    GENERIC_READ | GENERIC_WRITE,
                    FILE_SHARE_READ | FILE_SHARE_WRITE,
                    <span class="org-constant">NULL</span>,
                    OPEN_EXISTING,
                    FILE_FLAG_OVERLAPPED,
                    <span class="org-constant">NULL</span>);
WinUsb_Initialize(FDeviceHandle, &amp;FWinUSBHandle);
</pre>
</div>

<p>
Read Data:
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">static</span> <span class="org-type">unsigned</span> <span class="org-type">__stdcall</span> <span class="org-function-name">WinUSB_ReadThreadProc</span>(<span class="org-type">void</span> *<span class="org-variable-name">arg</span>)
{
   <span class="org-type">int</span> <span class="org-variable-name">read_size</span> = FReadPacketSize * BUFF_COUNT;
   <span class="org-type">DWORD</span> <span class="org-variable-name">cbRead</span>;
   <span class="org-type">BOOL</span> <span class="org-variable-name">bRet</span>;
   <span class="org-type">byte</span> *<span class="org-variable-name">buff</span>;
   <span class="org-type">int</span> <span class="org-variable-name">i</span>;
   buff = (<span class="org-type">byte</span> *)malloc(read_size);

   <span class="org-keyword">if</span> (buff == <span class="org-constant">NULL</span>)       <span class="org-comment-delimiter">// </span><span class="org-comment">should never happen</span>
      <span class="org-keyword">return</span> 0;

   memset(&amp;ol, 0x00, <span class="org-keyword">sizeof</span>(ol));
   ol.hEvent = CreateEvent(<span class="org-constant">NULL</span>, TRUE, FALSE, <span class="org-constant">NULL</span>);

   <span class="org-keyword">while</span> (<span class="org-constant">true</span>)
   {

      cbRead = 0;
      <span class="org-comment-delimiter">//</span><span class="org-comment">Reset-Event wurde hier entfernt... wenn ReadPipe and GetOverlapped sich abwechseln.</span>
      memset(buff, 0xDB, read_size); <span class="org-comment-delimiter">// </span><span class="org-comment">DEADBEEF keyword nur um zu schauen ob nichts in den bugger geschrieben wurde.</span>

      <span class="org-comment-delimiter">//</span><span class="org-comment">Start read...</span>
      <span class="org-comment-delimiter">//</span><span class="org-comment">In overlapped Mode macht diese funktion nichts, daher kann der prarameter der vorher cbRead war auch NULL sein.</span>
      bRet = WinUsb_ReadPipe(FWinUSBHandle, FPipeID.PipeInId, buff, read_size,  <span class="org-constant">NULL</span>, &amp;ol);

      <span class="org-comment-delimiter">//</span><span class="org-comment">waithandles initialisieren</span>
      <span class="org-type">HANDLE</span> <span class="org-variable-name">handles</span>[2];
      <span class="org-type">DWORD</span> <span class="org-variable-name">waitRet</span>;
      handles[0] = ol.hEvent;
      handles[1] = FStopEvent;

      <span class="org-comment-delimiter">//</span><span class="org-comment">Warten...</span>
      waitRet = WaitForMultipleObjects(2, handles, FALSE, INFINITE);

      <span class="org-keyword">if</span> (waitRet == (WAIT_OBJECT_0 + 1))
      {
         <span class="org-comment-delimiter">// </span><span class="org-comment">Stop event was set --&gt; und weg.</span>
         CloseHandle(ol.hEvent);

         free(buff);
         <span class="org-keyword">return</span> 0;
      }
      <span class="org-keyword">else</span> <span class="org-keyword">if</span> (waitRet == WAIT_OBJECT_0)
      {
         <span class="org-comment-delimiter">// </span><span class="org-comment">Data came in --&gt; abholen</span>
         bRet = WinUsb_GetOverlappedResult(FWinUSBHandle, &amp;ol, &amp;cbRead, <span class="org-constant">true</span>);
      }

      <span class="org-keyword">if</span> (<span class="org-negation-char">!</span>bRet)
      {
         <span class="org-comment-delimiter">//</span><span class="org-comment">Error --&gt; und weg.</span>
         Error_SetErr(USB_ERR_CONNECTION_LOST);

         CloseHandle(ol.hEvent);
         WinUSB_CloseDeviceHandles();

         <span class="org-keyword">return</span> 0;
      }
      <span class="org-keyword">else</span> <span class="org-keyword">if</span>(cbRead) <span class="org-comment-delimiter">//</span><span class="org-comment">Wenn daten ankamen... lesen.</span>
      {
         <span class="org-comment-delimiter">// </span><span class="org-comment">We write any data we get into the rx_queue.</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">The routine called from main() retrieves data from this queue then.</span>
<span class="org-preprocessor">#ifdef</span> LIVE_TRACE
          <span class="org-constant">System</span>::String^ str = <span class="org-string">""</span>;
<span class="org-preprocessor">#endif</span>
         <span class="org-keyword">for</span> (i = 0; i &lt; (<span class="org-type">int</span>)cbRead; i++)
         {
<span class="org-preprocessor">#ifdef</span> LIVE_TRACE
            str += <span class="org-constant">System</span>::<span class="org-constant">String</span>::Format(<span class="org-string">"{0:X} "</span>, buff[i]);
<span class="org-preprocessor">#endif</span>
            WinUSB_FillQueue(buff[i]);
         }
<span class="org-preprocessor">#ifdef</span> LIVE_TRACE
         <span class="org-constant">System</span>::<span class="org-constant">Diagnostics</span>::<span class="org-constant">Debug</span>::WriteLine(<span class="org-string">"USB-IN:"</span> + str);
<span class="org-preprocessor">#endif</span>
      }
   }
}
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-org0436b5e" class="outline-4">
<h4 id="org0436b5e">Synchronous (blocking) and asynchronous (non-blocking) I/O</h4>
<div class="outline-text-4" id="text-org0436b5e">
<ul class="org-ul">
<li>synchronous: thread waits until operation finished (called fct is blocking)</li>
<li>asynchronous: thread continues if request is accepted by kernel
(called fct immediately returns)</li>
</ul>
</div>

<div id="outline-container-orgc0a5543" class="outline-5">
<h5 id="orgc0a5543">Overlapped I/O (Asynchronous I/O)</h5>
<div class="outline-text-5" id="text-orgc0a5543">
<p>
asynchronous I/O on files, named pipes, serial devices
</p>

<p>
Asynchronous function calls can return immediately (non-blocking) even when the
operation has not completed yet.
</p>

<ul class="org-ul">
<li>CreateFile with <code>FILE_FLAG_OVERLAPPED</code></li>
</ul>

<p>
With
</p>
<pre class="example">
GetOverlappedResult()
</pre>

<p>
or
</p>
<pre class="example">
WaitMuiltipleObjects()
</pre>

<p>
it can be determined when the operation has ben completed.
</p>
</div>
</div>
</div>

<div id="outline-container-org031b9f8" class="outline-4">
<h4 id="org031b9f8">Interprocess Communication (IPC)</h4>
<div class="outline-text-4" id="text-org031b9f8">
</div>
<div id="outline-container-org1d89167" class="outline-5">
<h5 id="org1d89167">Named Pipes</h5>
<div class="outline-text-5" id="text-org1d89167">
<p>
Client/server communication style. Servers and clients are processes.
</p>

<p>
A named pipe is a named, one-way or duplex pipe for communication between the
pipe server and one or more pipe clients.
</p>

<p>
Any process can act as server and client. API functions are:
</p>
<pre class="example">
CreateNamedPipe()
ConnectNamedPipe()
</pre>


<p>
Each instance of a named pipe has it's
own buffers and handles.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org1b9ac90" class="outline-3">
<h3 id="org1b9ac90">Event Objects</h3>
<div class="outline-text-3" id="text-org1b9ac90">
<p>
Used for notifying a waiting thread of the occurence of an event, e.g. overlapped I/O
operations.
</p>

<ul class="org-ul">
<li>CreateEvent</li>
<li>SetEvent</li>
<li>ResetEvent</li>
<li>WaitForMultipleObjects</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf7cd2fd" class="outline-2">
<h2 id="orgf7cd2fd">XML</h2>
<div class="outline-text-2" id="text-orgf7cd2fd">
</div>
<div id="outline-container-org908a02a" class="outline-3">
<h3 id="org908a02a">Elemente in a XML File</h3>
<div class="outline-text-3" id="text-org908a02a">
<ul class="org-ul">
<li>Tree Structure: nodes are &lt;Tags&gt;&#x2026;&lt;/Tags&gt;</li>
<li>Tags</li>
<li>Attributes: &lt;Tag att="value"&gt;</li>

<li>processing instruction &lt;?target-name parameter ?&gt;</li>

<li>comment: &lt;!Comment&gt;</li>
</ul>
</div>
</div>

<div id="outline-container-org705aef0" class="outline-3">
<h3 id="org705aef0">Verarbeitungsmodelle</h3>
<div class="outline-text-3" id="text-org705aef0">
</div>
<div id="outline-container-org450e52a" class="outline-4">
<h4 id="org450e52a">DOM-API (Document Object Model)</h4>
<div class="outline-text-4" id="text-org450e52a">
<p>
Represents the document as a tree structure.
Random access to elements.
Manipulat tree.
</p>
<p>
*
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2024-01-20 Sat 06:00</p>
</div>
</body>
</html>