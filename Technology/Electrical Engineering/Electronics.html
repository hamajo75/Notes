<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-12-01 Fri 16:01 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Electronics</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="shortcut icon" href="/public_html/favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/html-export.css"/>
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/css/hideshow.css"/>
<link rel="stylesheet" type="text/css" href="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/css/code.css">

<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="https://joesanmarzano.duckdns.org/public_html/css/org-html-themes-master/styles/bigblow/js/jquery.stickytableheaders.min.js"></script>
</head>
<body>
<div style = "text-align: right; margin-top: 5px">
   <a accesskey="h" href="" style="font: 20px arial,helvetica,clean,sans-serif"></a>
   <a accesskey="H" href="https://joesanmarzano.duckdns.org/public_html/" style="font: 20px arial,helvetica,clean,sans-serif;margin: 30px;"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Electronics</h1>

<div id="outline-container-org82aa1a2" class="outline-2">
<h2 id="org82aa1a2">Fahrzeugtechnik</h2>
<div class="outline-text-2" id="text-org82aa1a2">
</div>
<div id="outline-container-org921b5ad" class="outline-3">
<h3 id="org921b5ad">Terminologie</h3>
<div class="outline-text-3" id="text-org921b5ad">
<p>
EPS &#x2026; Elektronisches Stabilitätsprogramm umfasst
        Fahrdynamikregelung: ABS, APS, grundsätzlich geht es ums Bremsen
OBD &#x2026; On-Board-Diagnose (OBD-Buchse)
</p>
</div>
</div>

<div id="outline-container-org6d6bcc3" class="outline-3">
<h3 id="org6d6bcc3">Motorsteuergeräte</h3>
<div class="outline-text-3" id="text-org6d6bcc3">
<p>
Wichtigster Input: Gaspedal (Wunsch nach mehr Drehmoment)
</p>

<p>
INPUT: Gaspedalstellung, Motordrehzahl, Drosselklappenstellung, Temperatur, versch. Drücke, Klopfsensor
OUTPUT: Aktivierung der Zündung, der Einspritzventile, Drosselklappensteller, Turbolader, Nockenwellenversteller
</p>
</div>

<div id="outline-container-org36a22fa" class="outline-4">
<h4 id="org36a22fa">Sensorik</h4>
<div class="outline-text-4" id="text-org36a22fa">
</div>
<div id="outline-container-orgd84e763" class="outline-5">
<h5 id="orgd84e763">Berechnung der Drosselklappenstellung</h5>
<div class="outline-text-5" id="text-orgd84e763">
<p>
Ansaugluftmenge, Luftdrucksensor, Motordrehzahl: Luftmasse für Einspritzung berechnen (Drosselklappe regelt die Luftzufuhr)
</p>
</div>
</div>
<div id="outline-container-orgef21c67" class="outline-5">
<h5 id="orgef21c67">Berechnung des Drehmoments</h5>
<div class="outline-text-5" id="text-orgef21c67">
<p>
Kurbelwellensensor, Klopfsensor, Temperatursensor, Nockenwellensensor
</p>

<div class="picture" id="org4f5db9c">

<div id="org0d41759" class="figure">
<p><img src="resources/Nockenwelle.PNG" alt="Nockenwelle.PNG" />
</p>
</div>

</div>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaf0c26e" class="outline-2">
<h2 id="orgaf0c26e">WIFI</h2>
<div class="outline-text-2" id="text-orgaf0c26e">
<p>
What do the b/g/n/a/ac letters mean?
</p>
<ul class="org-ul">
<li>a: 5 GHz-Band, bis zu 54 Mbits/s</li>
<li>b: 2.4 GHz-Band, bis zu 11 Mbits/s</li>
<li>g: 2.4 GHz-Band, bis zu 54 Mbits/s</li>
<li>n: 2.4 &amp; 5 GHz-Band, bis zu 600 Mbits/s</li>
<li>ac: 5 GHz-Band, bis zu 1.3 Gbits/s</li>
</ul>
</div>

<div id="outline-container-org9906a76" class="outline-3">
<h3 id="org9906a76">Wireless Multimedia Extensions</h3>
<div class="outline-text-3" id="text-org9906a76">
<ul class="org-ul">
<li>WMM: Wifi MultiMedia</li>
<li><a href="https://en.wikipedia.org/wiki/Wireless_Multimedia_Extensions">https://en.wikipedia.org/wiki/Wireless_Multimedia_Extensions</a></li>
</ul>
</div>

<div id="outline-container-orge8d8ce6" class="outline-4">
<h4 id="orge8d8ce6">WMM Power Save</h4>
<div class="outline-text-4" id="text-orge8d8ce6">
<p>
Devices that are in power-saving mode can go into a sleep state to conserve battery power.
The access point then buffers any incoming data until the device wakes up, at which point
the data is transmitted to the device.The access point then buffers any incoming data
until the device wakes up, at which point the data is transmitted to the device.
</p>

<p>
This feature is usually enabled by default.
</p>

<p>
4 access categories
</p>
<ul class="org-ul">
<li>background</li>
<li>best efford</li>
<li>video</li>
<li>voice</li>
</ul>

<p>
Data is buffered in 4 corresponding queues.
</p>

<p>
The client triggers the release of buffered data from the access
point by sending an uplink data frame.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org3394427" class="outline-2">
<h2 id="org3394427">Bus Systems</h2>
<div class="outline-text-2" id="text-org3394427">
</div>
<div id="outline-container-org35b47f6" class="outline-3">
<h3 id="org35b47f6">General Comments</h3>
<div class="outline-text-3" id="text-org35b47f6">
<p>
A bus is a collection of wires connecting different devices.
</p>
</div>

<div id="outline-container-orgc0a0771" class="outline-4">
<h4 id="orgc0a0771">Kinds of data transfer</h4>
<div class="outline-text-4" id="text-orgc0a0771">
</div>
<div id="outline-container-org6d5026d" class="outline-5">
<h5 id="org6d5026d">Synchronous I/O (blocking)</h5>
<div class="outline-text-5" id="text-org6d5026d">
<p>
Synchronization is done via a common clock signal.
</p>

<p>
Start data transfer and wait until it's finished, i.e. someone (a process or
a thread) is waiting until the operation is complete (usually a function call
is blocking the process). In other words nothing else can be done while the
transfer is running.
</p>
</div>
</div>

<div id="outline-container-org3711b93" class="outline-5">
<h5 id="org3711b93">Asynchronous I/O (non-blocking)</h5>
<div class="outline-text-5" id="text-org3711b93">
<p>
Don't wait for finish of the data transfer. This means while the transfer
is running processing can continue. In other words something else can be
done while the transfer is running.
</p>
<ul class="org-ul">
<li>clk has to be synchronized (e.g. start, stop bits, different default speeds)</li>
<li>data can be sent any time</li>
</ul>

<p>
(In Windows also called Overlapped I/O.)<br />
The communication is started but the calling process or thread immediately
returns from the call and doesn't wait for the operation to complete.
The completion of the transfer has to trigger something else, i.e. a callback
function is called or a flag is set.
Synchronization is done using special signals (symbols).
</p>
</div>
</div>

<div id="outline-container-orge569c20" class="outline-5">
<h5 id="orge569c20">Serial vs. parallel communication</h5>
<div class="outline-text-5" id="text-orge569c20">
<p>
One bit at a time.
</p>
</div>
</div>
</div>
<div id="outline-container-org0a5f303" class="outline-4">
<h4 id="org0a5f303">Arbitration</h4>
<div class="outline-text-4" id="text-org0a5f303">
<p>
(Vergabe des Buszugriffs)
Who gets the bus?
</p>

<p>
When there is more than one MCU (Master Control Unit) on the bus it might
happen that e.g. MCU2 wants to initiate a communication while there is still
another data transfer initiated by MCU1 active.
</p>

<p>
A Central Bus-Arbiter decides which component will get the bus next. There
might be a bus request line for each component.
</p>
</div>
</div>
<div id="outline-container-org7c93d4b" class="outline-4">
<h4 id="org7c93d4b">Duplex</h4>
<div class="outline-text-4" id="text-org7c93d4b">
<ul class="org-ul">
<li>Half duplex (Wechselsprechen, Funk: alle Teilnehmer sprechen auf der selben Frequenz)
Two-way alternate communication, one party can communicate while the other is listening
(e.g. Walkie-Talkie with a push-to-talk button).</li>
<li>Full duplex (Gegensprechen, Funk: zwei unterschiedliche Frequenzen, Oberband und Unterband)
Both parties can communicate at the same time (e.g. Telephone).</li>
</ul>
</div>
</div>
<div id="outline-container-org5c6c515" class="outline-4">
<h4 id="org5c6c515">Open Drain / Collector</h4>
<div class="outline-text-4" id="text-org5c6c515">
<p>
A open drain pin can pull it's output low, but not high. Therefor a pull up
resistor has to be provided. Imagine a rubber band that is being pulled down
by a transistor and flips back when it's released.
</p>
</div>
</div>
<div id="outline-container-orge8a993b" class="outline-4">
<h4 id="orge8a993b">Masters and Slaves</h4>
<div class="outline-text-4" id="text-orge8a993b">
<p>
Masters initiate data transfers, Slaves are told what to do. Normally there
is only one master at a time.
</p>
</div>
</div>
</div>
<div id="outline-container-orgb8fa19f" class="outline-3">
<h3 id="orgb8fa19f">CAN Bus</h3>
<div class="outline-text-3" id="text-orgb8fa19f">
<ul class="org-ul">
<li>2(3) Leitungen: CAN-Hi, CAN-Lo (Differenzsignal), evtl. GND
dominanter und rezessiver Zustand (3.5V, 2.5V), lo = 1.5V</li>
<li>ca. 500 kBit/s (bis 1MBit/s)</li>
<li>mehrere Busmaster, alle können gleichzeitig kommunizieren (nicht deterministisch)
Bus-Arbitrierung (Konfliktauflösung) nötig: dom./rez. Bits</li>
<li>NRZ (non return to 0) Kodierung, d.h. 0-hi, 1-lo</li>
<li>ID (11-bit) identifiziert die Datenquelle, den Sendeknoten,
der Empfänger entscheidet ob ihn die Nachricht interessiert oder nicht.</li>
</ul>
</div>


<div id="outline-container-org8e13ace" class="outline-4">
<h4 id="org8e13ace">Tools</h4>
<div class="outline-text-4" id="text-org8e13ace">
<p>
CANoe/CANalyzer
CANape
</p>
</div>
</div>
</div>

<div id="outline-container-orgec633a5" class="outline-3">
<h3 id="orgec633a5">Ethernet</h3>
</div>
<div id="outline-container-org95eaaeb" class="outline-3">
<h3 id="org95eaaeb">FlexRay</h3>
<div class="outline-text-3" id="text-org95eaaeb">
<p>
für sicherheitsrelevante Anwendungen (steer by wire, brake by wire, etc.)
</p>

<ul class="org-ul">
<li>2 Kommunikationskanäle</li>
<li>hohe Datenrate (10 Mbit/s pro Kanal)</li>
<li>echtzeitfähig (garantierte Latenzzeiten)</li>
<li><p>
Stern- und Bustopologie möglich
</p>
<div class="picture" id="org30b155c">

<div id="org10fdaf9" class="figure">
<p><img src="resources/Electronics/BusTopologie.PNG" alt="BusTopologie.PNG" />
</p>
</div>

</div></li>
<li>fixe Kommunikationszyklen (Endlosloop)</li>
</ul>
</div>
</div>

<div id="outline-container-orgc1ec867" class="outline-3">
<h3 id="orgc1ec867">I2C</h3>
<div class="outline-text-3" id="text-orgc1ec867">
<p>
(Inter integrated Circuit)
</p>
<ul class="org-ul">
<li><a href="https://www.nxp.com/docs/en/user-guide/UM10204.pdf">https://www.nxp.com/docs/en/user-guide/UM10204.pdf</a></li>
<li><a href="https://www.i2c-bus.org/repeated-start-condition/">https://www.i2c-bus.org/repeated-start-condition/</a></li>
</ul>

<p>
Derived from I2C are <i>System Management Bus</i> (SM Bus) and <i>Power Management Bus</i>
(PM Bus).
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>Repeated Start is useful when there is another master on the bus.
This way one master can block the bus, i.e. to wait for an answer from a device.</li>
</ul>

<p>
Operation Modes:
</p>
<ol class="org-ol">
<li><p>
Master Transmitter
</p>

<p>
Master addresses Slave with R/W = 0 and sends n bytes to the slave.
Each byte is followed by an ACK or NACK if slave wants no more data.
</p>
<div class="picture" id="orgd83de7a">

<div id="org933c9ee" class="figure">
<p><img src="resources/I2C/master-transmitter.PNG" alt="master-transmitter.PNG" />
</p>
</div>

</div></li>
<li><p>
Master Receiver
</p>

<p>
Master addresses Slave with R/W = 1 and expects data immediately.
</p>
<div class="picture" id="org45cb04a">

<div id="org3534905" class="figure">
<p><img src="resources/I2C/master-receiver.PNG" alt="master-receiver.PNG" />
</p>
</div>

</div></li>
<li><p>
Slave Receiver
</p>

<p>
Slave is addressed with R/W = 0 and starts receiving bytes from Master.
</p>
<div class="picture" id="org495dadf">

<div id="orgc6e83aa" class="figure">
<p><img src="resources/I2C/combined-format.PNG" alt="combined-format.PNG" />
</p>
</div>

</div></li>
<li><p>
Slave Transmitter
</p>

<p>
Slave is addresses with R/W = 1 and starts sending bytes to Master.
</p>

<p>
Notes:
</p>
<ul class="org-ul">
<li>In this case the master has to send a NACK before generating STOP.</li>
<li>Usually the master sends some data before the slave answers (e.g.
specifying a register that should be read). Therefore the slave has to be
addressed with R/W = 0 first and than again with R/W = 1.</li>
<li>Repeated Start ensures that the bus is not taken by another master before
the answer is read.</li>
</ul>
<div class="picture" id="org403f40d">

<div id="org1b8a594" class="figure">
<p><img src="resources/I2C/combined-format.PNG" alt="combined-format.PNG" />
</p>
</div>

</div></li>
</ol>
</div>

<div id="outline-container-org70da4b6" class="outline-4">
<h4 id="org70da4b6">Example</h4>
<div class="outline-text-4" id="text-org70da4b6">
<div class="picture" id="org5d4055e">

<div id="org69e9333" class="figure">
<p><img src="resources/I2C/i2c_Example.GIF" alt="i2c_Example.GIF" />
</p>
</div>

</div>

<ul class="org-ul">
<li>START begins the transfer.</li>
<li>Reading from a Slave Device. First the R/W-bit is 0 then 1 for reading.</li>
<li>STOP ends the transfer.</li>
</ul>
</div>
</div>

<div id="outline-container-org5ff5c6e" class="outline-4">
<h4 id="org5ff5c6e">Hardware</h4>
<div class="outline-text-4" id="text-org5ff5c6e">
<p>
Two active wires (SDA, SCL) and (VDD), GND connections. Master provides
the clock.
</p>

<ul class="org-ul">
<li>Master-Slave-Bus (Multimaster mode)
More than one device can initiate data transfers. But only one at a time.</li>
<li>128 (7 bits) possible addresses (112 can be used)
16 are reserved for special purposes.</li>
<li>half duplex</li>
<li>2 wire: SCA (data), SCL (clock)
Open drain outputs are used. When the bus is idle the lines are in HIGH state (pull up).
To put a signal on the bus an IC needs to turn on its output transistor thus pulling the line to LOW.</li>
<li>100 kHz (standard: 0.1 Mbit/s), 400 kHz (fast-mode: 0.4 Mbit/s)</li>
<li>Arbitration
Guaranteed by design: If the bus is occupied some IC is sending a 0 and no other
IC can initiate a transfer.</li>
<li>Drawbacks
The open drain technique has a serious effect on the speed for long bus lines.</li>
</ul>
</div>
</div>

<div id="outline-container-orge6a3df4" class="outline-4">
<h4 id="orge6a3df4">Protocol</h4>
<div class="outline-text-4" id="text-orge6a3df4">
<ul class="org-ul">
<li>Bit-Encoding: 1 - high, 0 - low</li>
<li>MSB first</li>

<li><p>
Transmission
Data transfer happens between the START and STOP sequences. In between the
bus is busy. Data transmission happens byte wise. Data from Slave (S) or data
to Slave. Each byte has to be acknowledged.
</p>

<pre class="example">
START | ADDRESS | ACK (S) | Byte1 (S or M) | ACK (M or S) |...| STOP
</pre></li>
</ul>

<p>
E.g. ADDRESS: 1100 0000 means address 0xC0 R/W bit = 0 (device will receive)
</p>

<p>
The first byte send by the master is a standard I2C-address, the first 7 bits are
the actual address, the last bit (R/W-bit) tells the device if it receives data
(0-LOW) or should send data (1-high).
</p>

<p>
The Slave is allowed to hold the SCL line low when it sends data back if it
needs to pause the transaction (clock stretching).
</p>
</div>
</div>
</div>

<div id="outline-container-org1ed56e9" class="outline-3">
<h3 id="org1ed56e9">LIN Bus</h3>
<div class="outline-text-3" id="text-org1ed56e9">
<p>
(local interconnet network)
</p>

<ul class="org-ul">
<li>Kommunikation zwischen lokalen Sensoren &amp; Aktuatoren</li>
<li>billiger Ersatz für CAN</li>
<li>Eindraht-Bus</li>
<li>1 Master, n Slaves</li>
</ul>
</div>
</div>

<div id="outline-container-orgf2e31f4" class="outline-3">
<h3 id="orgf2e31f4">MOST</h3>
<div class="outline-text-3" id="text-orgf2e31f4">
<p>
(Media Oriented Systems Transport)
Netzwerk für Multimediadaten.
</p>
</div>
</div>
<div id="outline-container-orgb8dc357" class="outline-3">
<h3 id="orgb8dc357">SD Card</h3>
<div class="outline-text-3" id="text-orgb8dc357">
<p>
All SD Cards should work with 2.7V to 3.6V (typically 3.3V).
</p>

<p>
Pinout:
</p>
<div class="picture" id="org3963d61">

<div id="org23ac008" class="figure">
<p><img src="resources/SD Card/Pinout.PNG" alt="Pinout.PNG" />
</p>
</div>

</div>

<p>
Communication with SD Cards works via commands.
</p>

<p>
Command Format:
</p>
<div class="picture" id="org458b97a">

<div id="org15f1a62" class="figure">
<p><img src="resources/SD Card/Command Format.PNG" alt="Command Format.PNG" />
</p>
</div>

</div>

<p>
There are different response formats (R1, R2, R3, etc.).
</p>

<p>
Transfer modes
</p>
<ul class="org-ul">
<li>SPI : Simplest mode, can be used with most microcontrollers.</li>
<li>1 Bit : CMD + Data Line</li>
<li>4 Bit : CMD + 4 Data Lines</li>
</ul>

<p>
The first commands for initialization of the SD-Card are sent with lower frequency
(e.g. 400kHz) in SPI mode, later frequency and mode are changed to the normal use
settings.
</p>
</div>
</div>

<div id="outline-container-org49f4c9a" class="outline-3">
<h3 id="org49f4c9a">SPI</h3>
<div class="outline-text-3" id="text-org49f4c9a">
<p>
(Serial Peripheral Interface)
</p>

<p>
Master-Slave 4-wire Bus with a single master. Slaves are selected with individual
slave lines. The master has to know how much data the slave returns, because that
is how much clock cycles it will generate.
</p>

<p>
Properties:
</p>
<ul class="org-ul">
<li>Master-Slave</li>
<li>serial communication, 4-16 bits per data frame</li>
<li>3 wires:     SCK,
MOSI (Master Output Slave Input) auch SDO (serial data out)
MISO auch SDI (serial data in)</li>
<li>full duplex, every read is also a write</li>
<li>synchronous
same clock: When the master clocks, the data on the MISO line counts!</li>
<li>data-rate: 1/2 clk</li>
<li>~ 16 devices (not 100)</li>
</ul>

<p>
From a hardware point of view the bus is simply a connection of two shift registers
in a ring topology.
</p>

<div class="picture" id="orgbd6b1c6">

<div id="org3b0be93" class="figure">
<p><img src="resources/SPI/SPI_MISO_MOSI.PNG" alt="SPI_MISO_MOSI.PNG" />
</p>
</div>

</div>

<p>
Master and Slave load their shift registers, then it takes eight clock cycles to
shift the date around, then the received data can be read and the shift registers
will be loaded again.
</p>

<p>
<b>Notes</b>
</p>
<ul class="org-ul">
<li>Motorola frame format (also SPI frame format): see the 4 modes below</li>
<li>Texas Instruments frame format</li>
<li>Microwire frame format</li>
</ul>
</div>

<div id="outline-container-org70315d4" class="outline-4">
<h4 id="org70315d4">Modes</h4>
<div class="outline-text-4" id="text-org70315d4">
<p>
Modes:
</p>
<ul class="org-ul">
<li><code>CPOL</code> Clock Polarity bit (0 - Active High, 1 - Active Low)</li>
<li><code>CPHA</code> Phase Control bit - timing of data relative to clock <br />
(0 - data valid on first edge after SSEL, rising, 1 - data valid on second edge after SSEL, falling)</li>
</ul>

<p>
Notes:
</p>
<ul class="org-ul">
<li>When <code>CPHA</code> is 0 the <code>SSEL</code> pin has to be pulled high between frames (ARM - not sure if it holds generally).</li>

<li><p>
Mode 0 (CPOL=0, CPHA=0)
</p>
<div class="picture" id="org05a9194">

<div id="orgb22e4ca" class="figure">
<p><img src="resources/SPI/mode0.PNG" alt="mode0.PNG" />
</p>
</div>

</div></li>
<li><p>
Mode 1 (CPOL=0, CPHA=1)
</p>
<div class="picture" id="org7005292">

<div id="orgcb081d0" class="figure">
<p><img src="resources/SPI/mode1.PNG" alt="mode1.PNG" />
</p>
</div>

</div></li>
<li><p>
Mode 2 (CPOL=1, CPHA=0)
</p>
<div class="picture" id="org29ff7f9">

<div id="orgcdc8dcd" class="figure">
<p><img src="resources/SPI/mode2.PNG" alt="mode2.PNG" />
</p>
</div>

</div></li>
<li><p>
Mode 3 (CPOL=1, CPHA=1)
</p>
<div class="picture" id="orgd049935">

<div id="org88ee90e" class="figure">
<p><img src="resources/SPI/mode3.PNG" alt="mode3.PNG" />
</p>
</div>

</div></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org43689f6" class="outline-3">
<h3 id="org43689f6">UART</h3>
<div class="outline-text-3" id="text-org43689f6">
<p>
(Universal Asynchronous Receiver Transmitter)
</p>

<ul class="org-ul">
<li>Asynchronous serial communication.</li>
<li>Full duplex.</li>
<li>Data format and transmission speeds can be configured.</li>
<li>No extra clk signal required. The receiver has to synchronize with
the data line by checking for the start bit.</li>
<li>The receiver needs to know the parameters of the communication (Baudrate, Parity Bit, etc. )</li>
</ul>

<p>
Data Frame:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Start Bit</td>
<td class="org-left">Bit0</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">Bit7</td>
<td class="org-left">Stop Bit</td>
</tr>
</tbody>
</table>

<p>
Common Data Rates:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">9.600 bit/s</td>
<td class="org-left">104 µs</td>
</tr>

<tr>
<td class="org-left">19.200 bit/s</td>
<td class="org-left">52,1 µs</td>
</tr>

<tr>
<td class="org-left">38.400 bit/s</td>
<td class="org-left">26,0 µs</td>
</tr>

<tr>
<td class="org-left">57.600 bit/s</td>
<td class="org-left">17,4 µs</td>
</tr>

<tr>
<td class="org-left">115.200 bit/s</td>
<td class="org-left">8,68 µs</td>
</tr>

<tr>
<td class="org-left">230.400 bit/s</td>
<td class="org-left">4,34 µs</td>
</tr>

<tr>
<td class="org-left">460.800 bit/s</td>
<td class="org-left">2,17 µs</td>
</tr>

<tr>
<td class="org-left">921.600 bit/s</td>
<td class="org-left">1,08 µs</td>
</tr>

<tr>
<td class="org-left">2.000.000 bit/s</td>
<td class="org-left">500 ns</td>
</tr>

<tr>
<td class="org-left">3.000.000 bit/s</td>
<td class="org-left">333 ns</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org4f041c4" class="outline-4">
<h4 id="org4f041c4">RS232</h4>
</div>

<div id="outline-container-org633084e" class="outline-4">
<h4 id="org633084e">RS485</h4>
<div class="outline-text-4" id="text-org633084e">
<ul class="org-ul">
<li>differential data signal (twisted pair)</li>
<li>3-state logic
<ul class="org-ul">
<li>transmitters can be turned off</li>
<li>linear bus with 2 wires</li>
</ul></li>
<li>noisy environments</li>
<li>up to 10 Mb/s</li>
<li>up to 1200 m</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org653d30e" class="outline-3">
<h3 id="org653d30e">USB</h3>
<div class="outline-text-3" id="text-org653d30e">
<ul class="org-ul">
<li>USB in a NutShell: - <a href="https://www.beyondlogic.org/usbnutshell/usb1.shtml">https://www.beyondlogic.org/usbnutshell/usb1.shtml</a></li>
</ul>
</div>

<div id="outline-container-org0566982" class="outline-4">
<h4 id="org0566982">Overview</h4>
<div class="outline-text-4" id="text-org0566982">
<ul class="org-ul">
<li>Tree structure with max. 7 layers, hubs are nodes, devices are leafs</li>
<li>11 bit address</li>
<li>polling: host checks for communication</li>
<li>communication in packets (URB: USB Request Block)
4 types of packets
<ul class="org-ul">
<li>Token (IN, OUT, Setup)</li>
<li>Data</li>
<li>Handshake</li>
<li>Start of Frame</li>
</ul></li>
<li>max. 127 devices</li>
<li>different transfer speeds available (slow, normal, fast, high)</li>
<li>4 transfer (endpoint) types: CONTROL, BULK, INTERRUPT, ISOCHRONOUS
<ul class="org-ul">
<li>CONTROL
Each USB device has at least on control pipe (default).</li>
<li>BULK
Large data, guarantee of delivery. Error correction.</li>
<li>INTERRUPT
E.g. HID</li>
<li>ISOCHRONOUS
Typically audio or video stream (time sensitive info). Packets
might be dropped.</li>
</ul></li>
<li>max. 16 IN and 16 OUT endpoints</li>
<li><p>
Pipes
Logical connection between host and endpoint(s). Two types of USB pipes
</p>
<ul class="org-ul">
<li>Stream (no defined format)</li>
<li>Message</li>
</ul>

<p>
Parameters: (e.g.)
</p>
<ul class="org-ul">
<li>max. bandwith</li>
<li>transfer type (control, bulk, isochronous, interrupt)</li>
<li>direction</li>
<li>max. packet size</li>
</ul>

<p>
Default Pipe 0 (corresponding to Endpoint 0) always exists. It's needed for the device setup process.
</p></li>

<li>2 kinds of data exchange: Functional and Control
<ul class="org-ul">
<li>Functional: move data back and forth (BULK, INTERRUPT, ISOCHRONOUS)</li>
<li>Control: configure device when attached via default Pipe 0.</li>
</ul></li>
</ul>

<p>
USB communication is done using buffers called <i>Endpoints</i>. Endpoints have a transfer direction (IN, OUT) viewed
from the Host. Endpoint 0 is reserved for control purposes (read Device Descriptors and control commands). A USB device
can have 16 OUT and 16 IN Endpoints.
</p>

<p>
Every USB data transfer is between a host and a device endpoint.
</p>

<p>
Each device has an address and multiple endpoints. The communication is serial, LSB first, organized in packets.
</p>
</div>
<div id="outline-container-orge75b701" class="outline-5">
<h5 id="orge75b701">Speeds</h5>
<div class="outline-text-5" id="text-orge75b701">
<ul class="org-ul">
<li>SuperSpeed+   2.5 GB/s    (USB 3.1)</li>
<li>SuperSpeed+   1.25 GB/s   (USB 3.2)</li>
<li>SuperSpeed    625 MB/s</li>
<li>High Speed    60 MB/s</li>
<li>Full Speed    1.5 MB/s</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org3b053c6" class="outline-4">
<h4 id="org3b053c6">USB Protocols</h4>
<div class="outline-text-4" id="text-org3b053c6">
<p>
USB transactions consist of packets.
</p>
<ul class="org-ul">
<li>Token packet (Host says what it wants from the device, e.g. IN- OUT-Tokens)</li>
<li>Data Packet (payload)</li>
<li>Handshake Packet (acknowledge, error correction)</li>
</ul>

<p>
All packets start with:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Sync</td>
<td class="org-left">PID</td>
<td class="org-left">&#x2026;</td>
<td class="org-left">(CRC)</td>
<td class="org-left">EOP</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>EOP : End of Packet</li>
<li>CRC: CRC5 and CRC16</li>
</ul>
</div>

<div id="outline-container-org97b6ab3" class="outline-5">
<h5 id="org97b6ab3">PID (Packet ID)</h5>
<div class="outline-text-5" id="text-org97b6ab3">
<p>
Identify the type of packet.
</p>
<div class="picture" id="org96f20fc">

<div id="orge9ec007" class="figure">
<p><img src="resources/USB/PID.PNG" alt="PID.PNG" />
</p>
</div>

</div>
</div>
</div>
<div id="outline-container-orgd2b21a3" class="outline-5">
<h5 id="orgd2b21a3">Token Packets</h5>
<div class="outline-text-5" id="text-orgd2b21a3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Sync</td>
<td class="org-left">PID</td>
<td class="org-left">ADDR</td>
<td class="org-left">ENDP</td>
<td class="org-left">CRC5</td>
<td class="org-left">EOP</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>IN</li>
<li>OUT</li>
<li>SETUP</li>
</ul>
</div>
</div>

<div id="outline-container-orga2f55d8" class="outline-5">
<h5 id="orga2f55d8">Data Packets</h5>
<div class="outline-text-5" id="text-orga2f55d8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Sync</td>
<td class="org-left">PID</td>
<td class="org-left">EOP</td>
</tr>
</tbody>
</table>

<p>
Types:
</p>
<ul class="org-ul">
<li>DATA0</li>
<li>DATA1</li>
<li>DATA2</li>
<li>MDATA</li>
</ul>
</div>
</div>

<div id="outline-container-orgae620e8" class="outline-5">
<h5 id="orgae620e8">Handshake Packets</h5>
<div class="outline-text-5" id="text-orgae620e8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Sync</td>
<td class="org-left">PID</td>
<td class="org-left">EOP</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>ACK</li>
<li>NAK</li>
<li>STALL</li>
</ul>
</div>
</div>

<div id="outline-container-org894aa1e" class="outline-5">
<h5 id="org894aa1e">Requests send from the Host</h5>
<div class="outline-text-5" id="text-org894aa1e">
<ul class="org-ul">
<li>Device Descriptor request</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org2125e16" class="outline-4">
<h4 id="org2125e16">Device Classes</h4>
<div class="outline-text-4" id="text-org2125e16">
<p>
The functionality of a device is defined by sending the class code (1 byte) to the host.
Examples:
</p>
<ul class="org-ul">
<li>0x03 : HID</li>
<li>0xFF : Vendor-specific</li>
</ul>
</div>
</div>
<div id="outline-container-orgfaa4881" class="outline-4">
<h4 id="orgfaa4881">Endpoint Types</h4>
<div class="outline-text-4" id="text-orgfaa4881">
<p>
Those correspond to different types of transfer.
</p>
</div>
<div id="outline-container-org54857df" class="outline-5">
<h5 id="org54857df">Control Transfers</h5>
<div class="outline-text-5" id="text-org54857df">
<p>
Set up a device.
3 stages
</p>
<ol class="org-ol">
<li>Setup Stage</li>
<li>Data Stage</li>
<li>Status Stage</li>
</ol>

<p>
Examples:
</p>
<ul class="org-ul">
<li>Enumeration: Host sends device descriptor request</li>
</ul>
</div>
</div>
<div id="outline-container-org9419f17" class="outline-5">
<h5 id="org9419f17">Interrupt Transfers</h5>
<div class="outline-text-5" id="text-org9419f17">
<p>
Since the host is polling a device needs to wait until it gets attention. So interrupt requests are queued on the device
side until the host polls the device.
</p>

<p>
Maximum data size
</p>
<ul class="org-ul">
<li>full-speed: 64 bytes</li>
<li>high-speed: 1024 bytes</li>
</ul>
</div>
</div>

<div id="outline-container-org047560e" class="outline-5">
<h5 id="org047560e">Bulk Transfers</h5>
</div>
<div id="outline-container-org361bdeb" class="outline-5">
<h5 id="org361bdeb">Isochronous Transfers</h5>
</div>
</div>
<div id="outline-container-orgb148402" class="outline-4">
<h4 id="orgb148402">Enumeration Process</h4>
<div class="outline-text-4" id="text-orgb148402">
</div>
<div id="outline-container-org7a039a1" class="outline-5">
<h5 id="org7a039a1">USB Descriptors</h5>
<div class="outline-text-5" id="text-org7a039a1">
<p>
<a href="https://www.beyondlogic.org/usbnutshell/usb5.shtml#StringDescriptors">https://www.beyondlogic.org/usbnutshell/usb5.shtml#StringDescriptors</a>
</p>

<p>
How is a USB connection identified?
</p>

<p>
Host gives addresses to the connected devices. The devices give back information about itself in form
of a series of <b>descriptors</b>.
</p>
<ul class="org-ul">
<li>ONE Device Descriptor
Vendor and Product ID
<ul class="org-ul">
<li>MULTIPLE Configuration Descriptors</li>
</ul></li>
</ul>

<p>
USB devices have a hierarchy of descriptors.
</p>


<div id="org0c7f758" class="figure">
<p><img src="resources/USB_Descriptor_Hierarchy.png" alt="USB_Descriptor_Hierarchy.png" />
</p>
</div>

<p>
Descriptor Types:
</p>

<ul class="org-ul">
<li>Device Descriptors (ONE only) (Type: 0x01)
<ul class="org-ul">
<li>USB version</li>
<li>product and vendor id</li>
</ul></li>
<li>Configuration Descriptors (0x02)
<ul class="org-ul">
<li>power usage</li>
</ul></li>
<li>Interface Descriptors (0x04)</li>
<li>Endpoint Descriptors (0x05)</li>
<li>String Descriptors (optional) (0x03)
<ul class="org-ul">
<li>provide human readable info</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org19d1169" class="outline-4">
<h4 id="org19d1169">Device Setup</h4>
<div class="outline-text-4" id="text-org19d1169">
<p>
When the device is attached to the host system a setup stage is initiated.
A 8-byte <i>Setup Packet</i> is sent to Endpoint 0 (default pipe).  Every USB device must respond to setup packets.
</p>

<div class="picture" id="org37d8296">

<div id="org7a37d78" class="figure">
<p><img src="resources/USB/USB Setup Packet.PNG" alt="USB Setup Packet.PNG" />
</p>
</div>

</div>

<p>
The host sends requests to the device: Device, Interface, Endpoint Requests.
</p>

<p>
Standard Device Requests:
</p>
<div class="picture" id="org0c4894e">

<div id="org7e21bd7" class="figure">
<p><img src="resources/USB/USB Standard Device Requests.PNG" alt="USB Standard Device Requests.PNG" />
</p>
</div>

</div>

<p>
Standard Interface Requests:
</p>
<div class="picture" id="org22a1625">

<div id="orgbc0a1ea" class="figure">
<p><img src="resources/USB/Standard Interface Requests.PNG" alt="Standard Interface Requests.PNG" />
</p>
</div>

</div>

<p>
Standard Endpoint Requests:
</p>
<div class="picture" id="orgd7f85a3">

<div id="orgd687de0" class="figure">
<p><img src="resources/USB/USB Standard Endpoint Requests.PNG" alt="USB Standard Endpoint Requests.PNG" />
</p>
</div>

</div>
</div>
</div>


<div id="outline-container-org3fe9bd6" class="outline-4">
<h4 id="org3fe9bd6">Software</h4>
<div class="outline-text-4" id="text-org3fe9bd6">
</div>
<div id="outline-container-orgd45d1e1" class="outline-5">
<h5 id="orgd45d1e1">Device</h5>
<div class="outline-text-5" id="text-orgd45d1e1">
<p>
When the host is polling a device an interrupt handler is called. Most of the complexity mentioned
above is of no concern to the programmer.
</p>
</div>
</div>

<div id="outline-container-org15a6cb5" class="outline-5">
<h5 id="org15a6cb5">Host</h5>
<div class="outline-text-5" id="text-org15a6cb5">
<p>
The usb interface is accessed through a file. You might have a thread handling incoming data.
Then you call a function (e.g. <code>WaitForMultipleObjects</code> on windows) that puts the thread to sleep
if nothing happens.
</p>

<p>
You might open pipes (Stream, Message).
</p>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc524e2f" class="outline-2">
<h2 id="orgc524e2f">Elektroinstallationen</h2>
<div class="outline-text-2" id="text-orgc524e2f">
<p>
Hausinstallation - Überblick
</p>
<div class="PICTURE" id="orge7f1746">

<div id="orgdc5fab0" class="figure">
<p><img src="resources/Electronics/Installation.PNG" alt="Installation.PNG" />
</p>
</div>

</div>
</div>

<div id="outline-container-org65de905" class="outline-3">
<h3 id="org65de905">Normen</h3>
<div class="outline-text-3" id="text-org65de905">
<ul class="org-ul">
<li>OVE E 8101 - Errichtungsbestimmungen für elektrische Niederspannungsanlagen</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org7393fdd" class="outline-2">
<h2 id="org7393fdd">IOT</h2>
<div class="outline-text-2" id="text-org7393fdd">
</div>
<div id="outline-container-orgeb07786" class="outline-3">
<h3 id="orgeb07786">MQTT (Message Queue Telemetry Transport)</h3>
<div class="outline-text-3" id="text-orgeb07786">
<p>
All communication goes via the MQTT-Broker. Devices don't know anything about
each other, they only communicate with the Broker.
</p>

<p>
Ports:
</p>
<ul class="org-ul">
<li>1883</li>
<li>8883 (encrypted)</li>
</ul>

<p>
MQTT is based on TCP and has a 2 Byte Header.
</p>
<dl class="org-dl">
<dt>Byte 1</dt><dd>Message Type (4 bit) Quality of Service (2 bit) Retain Flag</dd>
<dt>Byte 2</dt><dd>Length of the rest of the package</dd>
</dl>

<p>
The rest of the package is of variable length beginning with the <code>Topic</code>
(e.g. <code>/home/rooms/kitchen/temperature</code>).
</p>

<p>
Message Types:
</p>
<dl class="org-dl">
<dt>PUBLISH</dt><dd>Topic + Data (Payload)</dd>
<dt>SUBSCRIBE</dt><dd>subscript to a topic</dd>
<dt>UNSUBSCRIBE</dt><dd></dd>


<dt>CONNECT</dt><dd></dd>

<dt>(no term)</dt><dd>DISCONNE ::CT</dd>
<dt>CONNACK</dt><dd></dd>

<dt>PUBACK</dt><dd></dd>

<dt>PUBREC</dt><dd></dd>

<dt>PUBREL</dt><dd></dd>

<dt>PUBCOMP</dt><dd></dd>

<dt>SUBACK</dt><dd></dd>

<dt>UNSUBACK</dt><dd></dd>

<dt>PINGREQ</dt><dd></dd>

<dt>PINGRESP</dt><dd></dd>
</dl>

<p>
The symbol <code>#</code> allows to receive everything below a certain level in the topic.
E.g. <code>/level1/level2/#</code>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2023-12-01 Fri 16:01</p>
</div>
</body>
</html>
